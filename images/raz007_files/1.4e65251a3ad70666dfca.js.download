(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+R3h":function(t,e,n){"use strict";var i=n("exf4"),o=n("osi3"),r=function(t,e){var n=this,r=t,s=e,a=r.getPage(s),c=null;n.getDoc=function(){return r},n.getPageIndex=function(){return s},n.isEqual=function(t){return!!t&&t.getObjectType()==n.getObjectType()&&t.getDoc()==r&&t.getPageIndex()==s&&n.compareInternals(t)},n.getBounds=function(){var t=n.getCTM(),e=n.getObjectSpaceRect();return t.mapQuad(i.e.quadFromRect(e))},n.setEditCTM=function(t){return(c=o.a.correctCTMToRespectPageBox(a.getCropBox(),n.getObjectSpaceRect(),t))!=t},n.getEditBounds=function(){var t=n.getObjectSpaceRect();return c.mapQuad(i.e.quadFromRect(t))}};n.d(e,"a",function(){return a});var s=function(t,e,n){var o=this,s=n;o.prototype=new r(t,e),o.getPageIndex=function(){return o.prototype.getPageIndex()},o.getObjectType=function(){return"Transform"},o.getElement=function(){return s},o.hitTestPoint=function(t){return o.getBounds().containsPoint(t)},o.hitTestRect=function(t){return o.getBounds().hasIntersectionRect(t)},o.getObjectSpaceRect=function(){var t=s.getQuad();return o.getCTM().invert().mapQuad(t).getBound()},o.getCTM=function(){return s.matrix},o.applyEdit=function(){alert("graphicsEditObject - applyEdit")},o.delete=function(){alert("graphicsEditObject - delete")},o.getData=function(){return o},o.getPDEElement=function(){return s},o.getBounds=function(){var t=o.getCTM(),e=o.getObjectSpaceRect();return t.mapQuad(i.e.quadFromRect(e))},o.compareInternals=function(t){return t&&t.getPDEElement()===o.getPDEElement()}},a=function(){function t(){}return t.createGraphicsEditObject=function(t,e,n){return new s(t,e,n)},t.createEditObjectByPagePoint=function(e,n,o,r){switch(o.type){case i.d.PDEElementType.kPDEElementXObject:if(o.isVisible&&o.hitTest(r))return t.createGraphicsEditObject(e,n,o);break;case i.d.PDEElementType.kPDEElementPath:if(o.hitTest(r))return t.createGraphicsEditObject(e,n,o);break;case i.d.PDEElementType.kPDEElementInlineImage:case i.d.PDEElementType.kPDEElementShading:if(o.hitTest(r))return t.createGraphicsEditObject(e,n,o)}return null},t}()},"02Pb":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("exf4"),o=n("6okS"),r=function(){return function(){var t=this;this.timer=null,this.dragStartPoint=i.e.point(),this.touchduration=800,this.maxPointMoveDelta=5,this.eventHandler=function(e){var n=(e.changedTouches||e.originalEvent.changedTouches)[0],i="";switch(e.type){case"touchstart":i="mousedown",t.startLongTouchTimer(n);break;case"touchmove":i="mousemove",e.preventDefault(),t.clearLongTouchTimer(n);break;case"touchend":i="mouseup",t.clearLongTouchTimer();break;default:return}if("mousedown"===i){var o=t.generateSimulatedEvent("mousemove",n);n.target.dispatchEvent(o)}var r=t.generateSimulatedEvent(i,n);n.target.dispatchEvent(r),e.preventDefault()},this.mouseButtonsState=function(t){var e=0;if(!t)return e;if(t.shiftKey&&(e|=i.d.bLInputEventFlags.kBLInputEventFlagShiftPressed),t.ctrlKey&&(e|=i.d.bLInputEventFlags.kBLInputEventFlagCtrlPressed),!(o.h()||o.e()||o.g())||"mousemove"!==t.type&&"mouseenter"!==t.type&&"mouseleave"!==t.type){if(t.which)switch(t.which){case 1:e|=i.d.bLInputEventFlags.kBLInputEventFlagLButtonPressed;break;case 2:e|=i.d.bLInputEventFlags.kBLInputEventFlagMButtonPressed;break;case 3:e|=i.d.bLInputEventFlags.kBLInputEventFlagRButtonPressed}}else 1===t.buttons?e|=i.d.bLInputEventFlags.kBLInputEventFlagLButtonPressed:2===t.buttons?e|=i.d.bLInputEventFlags.kBLInputEventFlagRButtonPressed:4===t.buttons&&(e|=i.d.bLInputEventFlags.kBLInputEventFlagMButtonPressed);return e},this.generateSimulatedEvent=function(t,e,n){n||(n=0);var i=document.createEvent("MouseEvent");return i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,n,null),i},this.clearLongTouchTimer=function(e){if(e){var n=t.makeViewPoint(e),o=i.e.point(t.dragStartPoint.x-n.x,t.dragStartPoint.y-n.y);if(Math.abs(o.x)<t.maxPointMoveDelta&&Math.abs(o.y)<t.maxPointMoveDelta)return}t.timer&&(clearTimeout(t.timer),t.timer=null,t.dragStartPoint=i.e.point())},this.makeViewPoint=function(t){return i.e.point(t.pageX,t.pageY)},this.startLongTouchTimer=function(e){t.clearLongTouchTimer(),t.dragStartPoint=t.makeViewPoint(e),t.timer=setTimeout(function(){var n=t.generateSimulatedEvent("mousedown",e,2);e.target.dispatchEvent(n);var i=t.generateSimulatedEvent("mouseup",e,2);e.target.dispatchEvent(i)},t.touchduration)}}}()},"0O6x":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){function t(){this.items={}}return t.prototype.get=function(t){return this.items[t]},t.prototype.set=function(t,e){this.items[t]=e},t.prototype.remove=function(t){delete this.items[t]},t.prototype.removeAll=function(){this.items={}},t.prototype.exists=function(t){return console.error("no implementation"),!1},t}()},"21MZ":function(t,e,n){"use strict";n("5Rvh");var i=n("c5EE");n.d(e,"a",function(){return i.a});var o=n("HpxQ");n.d(e,"b",function(){return o.a})},"2D3m":function(t,e,n){"use strict";var i=n("CcnG"),o=n("Ip0R");n("jrl3"),n.d(e,"a",function(){return r}),n.d(e,"b",function(){return c});var r=i["ɵcrt"]({encapsulation:0,styles:[[".tabs[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;padding:5px 0 0;border-bottom:2px solid #adcff5;width:calc(100% - 60px);margin:0 30px;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse}.tabs__item[_ngcontent-%COMP%]{width:calc(100% / 5);cursor:pointer;background-color:#fff;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;border-right:1px solid transparent}.tabs__item.active[_ngcontent-%COMP%]{background-color:#adcff5}.tabs__item.active[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-weight:500}.tabs__item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;line-height:18px;padding:5px 15px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#000}.tabs__item[_ngcontent-%COMP%]:not(.active), .tabs__item[_ngcontent-%COMP%]:not(:last-child){border-right-color:#dedede}.tabs__close[_ngcontent-%COMP%]{font-size:12px;padding:5px 10px;font-weight:800;color:#6b6976}.tabs__close[_ngcontent-%COMP%]:hover{color:#000}"]],data:{}});function s(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,7,"li",[["class","tabs__item"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onSelect.emit(t.context.$implicit.id)&&i),i},null,null)),i["ɵprd"](512,null,o.u,o.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](2,278528,null,0,o.i,[o.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](3,{active:0}),(t()(),i["ɵeld"](4,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),i["ɵted"](5,null,["",""])),(t()(),i["ɵeld"](6,0,null,null,1,"span",[["class","tabs__close"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.onRemove.emit(t.context.$implicit.id)&&i),i},null,null)),(t()(),i["ɵted"](-1,null,["X"]))],function(t,e){var n=t(e,3,0,e.context.$implicit.id===e.component.selected.id);t(e,2,0,"tabs__item",n)},function(t,e){t(e,5,0,e.context.$implicit.name)})}function a(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,2,"ul",[["class","tabs"]],null,null,null,null,null)),(t()(),i["ɵand"](16777216,null,null,1,null,s)),i["ɵdid"](2,278528,null,0,o.j,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.items)},null)}function c(t){return i["ɵvid"](0,[(t()(),i["ɵand"](16777216,null,null,1,null,a)),i["ɵdid"](1,16384,null,0,o.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,1,0,n.items&&n.items.length>1)},null)}},"3ukz":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},"5HBy":function(t,e,n){"use strict";var i=n("exf4"),o=n("CZDQ"),r=function(t,e){var n=t,i=!1,r=null,s=null,a=null,c=e;this.isSelecting=function(){return i},this.startSelecting=function(){i=!0},this.endSelecting=function(){i=!1},this.hasSelection=function(){return r&&!r.isEqual(s)},this.getSelectedRange=function(){return{begin:s,end:r}},this.getSelectionStart=function(){return s},this.setSelectionStart=function(t){s=t},this.getPosition=function(){return r},this.setPosition=function(t){if(r=t){var e=r.getPageIndex(),i=null;a&&(i=a.getTextBlock());var s=r.getTextBlock();!i||s&&!s.isEqual(i)?a=o.a.createInstance(n,e,s):a.updateTransform()}},this.getCurrentPage=function(){var t=this.getPosition();return t?t.getPageIndex():0},this.moveTo=function(t){this.setPosition(t),i||this.setSelectionStart(t)},this.selectRange=function(t,e){this.setSelectionStart(t),this.setPosition(e)},this.getDoc=function(){return n},this.getTextBlockTransformer=function(){return a},this.canMergeTextBlocks=function(){return!!s},this.updateTextBlockTransformerSnapData=function(t,e){if(a){var n=a.getSnapData();n||a.setSnapData(n)}},this.delete=function(){a.delete()},this.isTextBlockEmpty=function(){return function(t,e){try{var n=r.getTextBlock().lines;return n&&n.some(function(t,e){return!!t.text})}catch(i){return!0}}()},this.notifyPositionChanged=function(){!function(){try{if(!c)return;if(!r)return;if(-1==r.getPageIndex())return;this.onCaretPositionChanged_({pageIndex:-1})}catch(t){}}()},this.canMoveTextBlockFront=function(){return!1},this.canMoveTextBlockBack=function(){return!1},this.draw=function(t,e){if(this.handler&&this.handler.selection)return this.handler.selection.draw(t,e)},this.handleEvent=function(t){if(this.handler&&this.handler.inputHandler)return this.handler.inputHandler.handleEvent(t)},this.terminate=function(){this.handler&&this.handler.inputHandler&&this.handler.inputHandler.terminate()},this.getModel=function(){if(!this.handler||!this.handler.selection)return null;var t=this.handler.selection.getSelectionData();return t&&t.getModel?t.getModel():null}},s=function(){return{createInstance:function(t){return new r(t)}}}(),a=n("GG9H"),c={},u=function(t,e,n){var o=t,r=e,s=n;this.getTextBlock=function(){return r.textBlocks[s.blockIndex]},this.getQuad=function(){return i.e.quadFromRect(s.boundRect)},this.getPageIndex=function(){return o.getPageIndex(r)},this.isEqual=function(t){return t&&this.getQuad().isEqual(t.getQuad())}},l=function(t,e){for(var n=t.items,i=0;i<n.length;++i){var o=n[i];if(o&&o.blockIndex==e)return o}},h=function(t,e){for(var n=t.length,o=0;o<n;++o){var r=t[o];switch(r.type){case i.d.PDEElementType.kPDEElementContainer:if(!a.a.shouldSkipContainer(r)&&r.isVisible&&(s=h(r.content,e)))return s;break;case i.d.PDEElementType.kPDEElementText:var s;if(s=l(r,e))return s}}return null};c.createCharIteratorForItemAtPoint=function(t,e,n,i){return new u(t,e,n)},c.createCharIteratorForItem=function(t,e,n){return new u(t,e,n)},c.createBeginCharIteratorForTextBlock=function(t,e,n,i){var o=h(n,i);return o?c.createCharIteratorForItem(t,e,o):null};var p={},d=function(t){var e,n=!1;this.initialize=function(t){e=t},this.terminate=function(){n||e.finalize()},this.getToolType=function(){return i.h.TextBlockEdit},this.isFinished=function(){return n},this.handleEvent=function(t){if(!n){switch(t.type){case i.d.BLInputEventType.kBLInputEventCommand:return o(t.commandArgs.command);case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return s(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return a(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return c(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return r(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventWheelChanged:return u(t.wheelArgs.position,t.wheelArgs.delta);case i.d.BLInputEventType.kBLInputEventKeyPressed:return l(t.keyArgs.keycode,t.keyArgs.flags);case i.d.BLInputEventType.kBLInputEventKeyReleased:return h(t.keyArgs.keycode,t.keyArgs.flags);case i.d.BLInputEventType.kBLInputEventCharReceived:return p(t.charArgs.unicode);case i.d.BLInputEventType.kBLInputEventPointerDoubleClicked:return d(t.pointerArgs.position,t.pointerArgs.flags)}return!1}return!1};var o=function(t){if("Cut"==t)e.cut();else if("Copy"==t)e.copy();else if("Paste"==t)e.paste();else{if("Delete"==t)return!1;"Undo"==t?e.canUndo()&&e.undo():"Redo"==t&&e.canRedo()&&e.redo()}return!0},r=function(t,n){return e.mouseMove(t,n)},s=function(t,n){return e.mouseDown(t,n)},a=function(t,n){return e.mouseUp(t,n)},c=function(t,e){return!1},u=function(t,n){return e.mouseWheel(t,n)},l=function(t,r){return t!==i.d.kBLKey.kBLKey_TAB&&(t===i.d.kBLKey.kBLKey_ESCAPE?(e.finalize(!1),n=!0,!1):t===i.d.kBLKey.kBLKey_V&&i.d.BLFlagIsSet(r,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?o("Paste"):t===i.d.kBLKey.kBLKey_X&&i.d.BLFlagIsSet(r,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?o("Cut"):e.keyDown(t,r))},h=function(t,n){return e.keyUp(t,n)},p=function(t){return e.charReceived(t)},d=function(t,n){return e.doubleClick(t,n)}};p.createInstance=function(t,e){return new d(e)};for(var f=n("6okS"),g=n("ukOs"),m=n("SU9I"),v=["030","033","036","039","03c","03f","090","093","096","099","09c","09f","0f0","0f3","0f6","0f9","0fc","0ff","330","333","336","339","33c","33f","390","393","396","399","39c","39f","3f0","3f3","3f6","3f9","3fc","3ff","630","633","636","639","63c","63f","690","693","696","699","69c","69f","6f0","6f3","6f6","6f9","6fc","6ff","930","933","936","939","93c","93f","990","993","996","999","99c","99f","9f0","9f3","9f6","9f9","9fc","9ff","c30","c33","c36","c39","c3c","c3f","c90","c93","c96","c99","c9c","c9f","ccf020","cf3","cf6","cf9","cfc","cff","f30","f33","f36","f39","f3c","f3f","f90","f93","f96","f99","f9c","f9f","ff0","ff3","ff6","ff9","ffc","fff","f00","f03","f06","f09","f0c","f0f","f60","f63","f66","f69","f6c","f6f","ffc020","fc3","fc6","fc9","fcc","fcf","c00","c03","c06","c09","c0c","c0f","c60","c63","c66","c69","c6c","c6f","cc0","cc3","cc6","cc9","ccc","ccf","900","903","906","909","90c","90f","960","963","966","969","96c","96f","9c0","9c3","9c6","9c9","9cc","9cf","600","603","606","609","60c","60f","660","663","666","669","66c","66f","6c0","6c3","6c6","6c9","6cc","6cf","300","303","306","309","30c","30f","360","363","366","369","36c","36f","3c0","3c3","3c6","3c9","3cc","3cf","000","003","006","009","00c","00f","060","063","066","069","06c","06f","0c0","0c3","0c6","0c9","0cc","0cf"],y=[v.length],b=0;b<v.length;++b){var P=v[b],_=null;if(3===P.length){var w=P[0],x=P[1],T=P[2];_="#ff"+w+w+x+x+T+T}else _="#ff"+P;y[b]=i.a.createInstance(_)}var S={rgbaColors:y},C={family:"Times New Roman",format:1,size:72},k=function(t,e,n,o,r,s){var a=f.j(t)?{value:{family:"Times New Roman",format:"tt"}}:t,c=f.j(e)?{id:12,text:12}:e,u=!f.j(n)&&n,l=!f.j(o)&&o,h=!f.j(s)&&s,p=f.j(r)?i.a.createInstance("#FFFFFFFF"):r;this.toPdfFont=function(){var t=i.d.FontStyle.Regular;return u&&l?t=i.d.FontStyle.BoldItalic:u?t=i.d.FontStyle.Bold:l&&(t=i.d.FontStyle.Italic),m.a.createInstance({F:a.value.family,f:a.value.format,C:p.toString(!0,!1),S:c.id,s:t,u:h})},Object.defineProperties(this,{descriptor:{get:function(){return a},set:function(t){a!=t&&(a=t,u=l=!1)}},size:{get:function(){return c},set:function(t){c!=t&&(c=t)}},isBold:{get:function(){return u},set:function(t){u!=t&&(u=t)}},isItalic:{get:function(){return l},set:function(t){l!=t&&(l=t)}},isUnderline:{get:function(){return h},set:function(t){h!=t&&(h=t)}},color:{get:function(){return p},set:function(t){p.toString()!=t.toString()&&(p=t)}}})},E=[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72],B=function(){return f.m(E)},L=function(){for(var t=this.getFontSizes(),e=new Array(t.length),n=0,i=t.length;n<i;++n){var o=t[n];e[n]={id:o,text:o}}return e},M=function(t,e){if(t){var n=A.documents[t.id];n&&(n.selectedFont=e)}},R=function(t){if(!t)return null;var e=A.documents[t.id];return e?e.selectedFont:null},O=function(t,e){if(t){var n=A.documents[t.id];n&&(n.selectedEffect=e)}},F=function(t){if(!t)return null;var e=A.documents[t.id];return e?e.selectedEffect:null},I=function(t){D(t&&t.document)},A=function(){var t={documents:{},getFontSizes:B,getFontSizesDropDown:L,setSelectedFont:M,getSelectedFont:R,setSelectedEffect:O,getSelectedEffect:F,add:I};return t.rgbColors=S.rgbaColors,t}(),D=function(t){if(t){var e=A.documents[t.id];if(!e){A.documents[t.id]=e={id:t.id},e.font=t.fonts,e.selectedFont=new k;var n=C.size;e.selectedFont.size={id:n,text:n},e.selectedEffect={opacity:100,fillColor:null,borderColor:null,borderThickness:1,borderMode:"center"},e.isLoaded=t.isLoaded}}},z=n("TQCd"),V={getPageToViewMatrix:j,getViewToPageMatrix:function(t,e){return j(t,e).invert()},getPageToDevSpaceMatrix:N,drawField:function(t,e){if(t&&e){var n=e.getRect();if(!n.isAreaEmpty()){t.pushState();var o=e.getEffect();if(o||(o={}),o.opacity&&100!==o.opacity&&(t.getContext().globalAlpha=o.opacity/100),o.fillColor&&t.fillRect(n,i.a.createInstance("#FF"+o.fillColor.slice(1))),o.borderColor&&o.borderThickness){var r=n.copy();"out"===o.borderMode?r.inflate(o.borderThickness/2,o.borderThickness/2):"in"===o.borderMode&&r.inflate(-o.borderThickness/2,-o.borderThickness/2),z.a.drawFrame(t,i.e.quadFromRect(r),null,i.a.createInstance("#FF"+o.borderColor.slice(1)),null,o.borderThickness)}e.getPhrases().forEach(function(e){var o=e.getFont(),r=e.getRect();t.pushState(),t.clipRect(n),t.translateCTM(r.left,r.bottom-e.getBottomOffset()),t.fillText(o.getRenderFontStr(),e.getText(),o.color),e.isUnderline()&&z.a.drawLine(t,i.e.point(0,4),i.e.point(e.getRect(!0).width,4),o.color),t.popState()}),t.popState()}}}};function N(t,e){var n=e%360,o=t.getPageBox(),r=t.getUserUnitSize();switch(n){case 90:return i.e.matrix(0,r,r,0,r*-o.bottom,r*-o.left);case 180:return i.e.matrix(-r,0,0,r,r*o.right,r*-o.bottom);case 270:return i.e.matrix(0,-r,-r,0,r*o.top,r*o.right);default:return i.e.matrix(r,0,0,-r,r*-o.left,r*o.top)}}function j(t,e){return N(t.getDocument().getPage(e),0)}var H=96/72,U={},G=function(t,e,n,o,r,s,a){var c,u=this;function l(){var t="";switch(u.style){case i.d.GFontStyle.kGFontStyleRegular:t="";break;case i.d.GFontStyle.kGFontStyleBold:t="bold ";break;case i.d.GFontStyle.kGFontStyleItalic:t="italic ";break;case i.d.GFontStyle.kGFontStyleBoldItalic:t="italic bold "}c=t+u.size/H+"pt "+u.name}u.name=f.j(e)?"Times New Roman, serif":e,u.originalFamily=f.j(n)?"Times New Roman":n,u.style=f.j(o)?i.d.GFontStyle.kGFontStyleRegular:o,u.size=f.j(t)?12:t,u.color=f.j(r)?i.a.createInstance("#FF000000"):r,u.format=f.j(s)?i.d.FontFormat.TrueType:s,u.isUnderline=!!a,l(),u.getRenderFontStr=function(){return c},u.isItalic=function(){return u.style==i.d.GFontStyle.kGFontStyleItalic||u.style==i.d.GFontStyle.kGFontStyleBoldItalic},u.isBold=function(){return u.style==i.d.GFontStyle.kGFontStyleBold||u.style==i.d.GFontStyle.kGFontStyleBoldItalic},u.copy=function(){return new G(u.size,u.name,u.originalFamily,u.style,Object.assign(u.color),u.format,u.isUnderline)},u.updateFont=function(t){Object.keys(t).forEach(function(e){u[e]=t[e]}),l()},u.isEqual=function(t){return u.name===t.name&&u.originalFamily===t.originalFamily&&u.style===t.style&&u.size===t.size&&(u.color===t.color||u.color.toString()===t.color.toString())&&u.format===t.format&&u.isUnderline===t.isUnderline}},W=function(t,e){var n=this,o=0,r=0,s=t;f.j(e)&&(e=U.createFontInstance());var a=e;n._text="",n.bound=function(t){void 0===t&&(t=!1);var e=i.e.size(0,a.size*s/H);return n._text.length>0&&(e=c(t?n._text.replace(new RegExp("\r|\n","g"),""):n._text)),i.e.rect(o,r,o+e.width,r+e.height)},n.getRect=function(t){return void 0===t&&(t=!1),n.bound(t)},n.getSymbolRect=function(t){var e=i.e.rect();if(n._text.length>t){var s=0;if(t>0){var a=f.n(n._text,0,t);s=(u=c(a)).width}a=f.n(n._text,t,1);var u=c(a);return i.e.rect(s+o,r,s+o+u.width,r+u.height)}return e},n.getSymbolQuad=function(t){var e=n.getSymbolRect(t);return i.e.quadFromRect(e)},n.scale=function(t){},n.translate=function(t,e){o+=t,r+=e},n.getFont=function(){return a.copy()},n.isFontColorWhite=function(){return a.color.isWhite()},n.isUnderline=function(){return a.isUnderline},n.getBottomOffset=function(){return a.size/H*(s-1)/2},n.getText=function(){return n._text};var c=function(t){var e=document.createElement("canvas").getContext("2d");e.font=a.getRenderFontStr();var n=e.measureText(t).width;return i.e.size(n,a.size/H*s)}};U.createInstance=function(t,e){return new W(t,e)},U.createFontInstance=function(t,e,n,i,o,r,s){return new G(t,e,n,i,o,r,s)};var q={},Y=function(){var t=this,e=function(){this.start_index=0,this.num_phrases=0,this.advance=0},n=function(){this.words=[],this.num_symbols=0,this.length=0,this.height=0},o=i.e.rect(),r=i.e.rect(),s="",a=0,c=Number.MAX_VALUE,u=1.5,l=!0,h=!1,p=[],d=[],g=null,v=null;function y(t){return U.createInstance(u,t)}t.getRect=function(){return o.copy()},t.getText=function(){return s},t.getCharAtPos=function(t){for(var e=null,n=0,i=0;i<p.length;i++){var o=p[i]._text.length;if(n+o>t){e=p[i]._text[t-n];break}n+=o}return e},t.getPhraseAtPos=function(t){for(var e=null,n=0,i=0;i<p.length;i++){var o=p[i]._text.length;if(n+o>t){e=p[i];break}n+=o}return e},t.setFont=function(t,e,n){for(var i,o=[],r=!1,s=0,a=0;a<p.length;a++){var c=p[a],h=c._text.length;if(s+h<t||s>e)o.push(c),s+=h;else{var d=c._text,f=d.slice(0,Math.max(t-s,0));c._text=f,f.length>0&&"\r"!==f&&o.push(c),(i=c.getFont()).updateFont(n);var g=d.slice(Math.max(t-s,0),Math.max(e-s,0));g.length>0&&"\r"!==g?((m=U.createInstance(u,i))._text=g,o.push(m),r=!0):!r&&s+h>e&&(o.push(y(i)),r=!0);var m,v=d.slice(Math.max(e-s,0),h);v.length>0&&"\r"!==v&&((m=U.createInstance(u,c.getFont()))._text=v,o.push(m)),s+=h}}0==o.length?(i||(i=p.length>0?p[p.length-1].getFont():U.createFontInstance()).updateFont(n),p=[y(i)]):p=o,l=!0,_(p,b().getWidth())},t.getPhrasesByPos=function(t,e){t>e&&(e=[t,t=e][0]);for(var n=[],i=0,o=0;o<p.length;o++){var r=p[o],s=r._text.length;if(i+s<t)i+=s;else{if(i>e)break;n.push(r),i+=s}}return n},t.keyStroke=function(t,e,n,i){for(var o=[],r=!1,s=0,a=0;a<p.length;a++){var c=p[a],u=c._text.length,h=!1;if(s+u<t||s>e)o.push(c),s+=u;else{var d=c._text.slice(0,Math.max(t-s,0));r||(d.length===c._text.length&&a+1<p.length&&(0===p[a+1]._text.length||"\r"===p[a+1]._text)?(p[a+1]._text=n+p[a+1]._text,h=!0):d+=n,r=!0),d+=c._text.slice(Math.max(e-s,0),u),s+=u,d.length>0&&(c._text=d,o.push(c)),h&&(o.push(p[a+1]),a++)}}if(0==o.length){var f=p.length>0?p[0].getFont():null;p=[y(f)]}else p=o;l=!0,_(p,b().getWidth())},t.getPhrases=function(){return f.m(p)},t.getLineHeightFactor=function(){return u},t.setQuadding=function(t){a!=t&&(a=t,l=!0)},t.getQuadding=function(){return a},t.getMargin=function(){return 0},t.setMaxLen=function(t){t!=c&&(c=t,l=!0)},t.getMaxLen=function(){return c},t.getSymbolsCount=function(){return s.length},t.getLinesCount=function(){return d.length},t.getFirstSymbol=function(e){if(e>=d.length)return s.length;for(var n=0,i=0;i<e;i++)n+=t.getNumSymbolsOnLine(i);return n},t.getNumSymbolsOnLine=function(t){return f.j(t)||t>=d.length?0:d[t].num_symbols},t.getFirstSymbol=function(t){return f.j(t)||0===t||t>=d.length?0:d.slice(0,t).reduce(function(t,e){return t+(e.num_symbols||0)},0)},t.getLineHeight=function(t){return f.j(t)||t>=d.length?0:d[t].height},t.getLastSymbol=function(e){return e>=d.length?s.length:t.getFirstSymbol(e)+t.getNumSymbolsOnLine(e)-1},t.getLineWithSymbol=function(e){for(var n=0,i=0;i<d.length;++i)if((n+=t.getNumSymbolsOnLine(i))>e)return i;return t.getLinesCount()-1},t.getWordPositions=function(t){for(var e=0,n=0;n<p.length;n++){var i=p[n];if(i.getRect().containsPoint(t))return{caret:e+i._text.length,selector:e};e+=i._text.length}},t.hitTestChar=function(e){t.getLinesCount();for(var n=0;n<p.length;++n)if(p[n].getRect().containsPoint(e))return!0;return!1},t.getSymbolAtPoint=function(e){for(var n=t.getFirstSymbol(0),o=t.getLinesCount(),r=0;r<o;++r){var a=d[r],c=(f=p[a.words[0].start_index]).getRect();if(!i.e.floatLt(c.max_y(),e.y)){for(var u=0;u<a.words.length;u++)for(var l=a.words[u],h=0;h<l.num_phrases;h++){c=(f=p[l.start_index+h]).getRect();for(var f,g=f._text.length,m=c.min_x(),v=0;v<g;++v){var y=f.getSymbolRect(v).getWidth();if(i.e.floatLt(e.x,m+=y))return i.e.floatLt(e.x,m-.5*y)||i.e.floatEq(m,c.max_x())?n+v:n+ ++v}n+=g}return n-1}n+=a.num_symbols}return s.length-1},t.getCharQuad=function(t){for(var e=0,n=0;n<d.length;++n){var o=d[n].num_symbols;if(e+o>t)for(var r=0;r<d[n].words.length;r++)for(var s=d[n].words[r],a=0;a<s.num_phrases;++a){var c=p[s.start_index+a],u=c._text.length;if(e+u>t)return c.getSymbolQuad(t-e);e+=u}e+=o}var l,h=p[p.length-1];if(0==h._text.length){var f=(l=h.getRect()).min_x();l.left=l.right=f}else{var g=(l=h.getSymbolRect(h._text.length-1)).max_x();l.left=l.right=g}return i.e.quadFromRect(l)},t.getLineRect=function(t){var e;if(t<d.length)for(var n=d[t],o=0;o<n.words.length;o++)for(var r=n.words[o],s=0;s<r.num_phrases;++s){var a=p[r.start_index+s].getRect();e=e.isAreaEmpty()?a:i.e.unionRects(e,a)}return e},t.getMaxLineWidth=function(){for(var t=0,e=0;e<d.length;e++){var n=d[e];t<n.length&&(t=n.length)}return t},t.isNeedUpdate=function(){return l};var b=function(){var t=o.copy();return t.inflate(-0,-0),t};function P(t){var e=t.style;return e&&(e==i.d.GFontStyle.kGFontStyleBold?e=i.d.GFontStyle.kGFontStyleItalic:e==i.d.GFontStyle.kGFontStyleItalic&&(e=i.d.GFontStyle.kGFontStyleBold)),U.createFontInstance(t.size,t.selectFamily,t.family,e,t.color,t.format,t.isUnderline)}function _(t,i,a){if(l){var c=h?Math.max(r.width-o.left,i):i,f=b();d=[],p=[],s="";var m=f.min_x(),y=f.min_y(),P=new n,x=0;a||(t=(t=(t=t.reduce(function(t,e){var n;if(e._text=e._text.replace(new RegExp("\r","g"),""),e._text.indexOf("\n")>=0){n=[];for(var i=e._text.split("\n"),o=0;o<i.length;o++){var r=i[o],s=U.createInstance(u,e.getFont());s._text=r,o<i.length-1&&(s._text+="\n"),n.push(s)}}else n=e;return t.concat(n)},[])).reduce(function(t,e){if(0===t.length)return t.concat(e);var n=t[t.length-1];return!n._text.endsWith("\n")&&n.getFont().isEqual(e.getFont())?(n._text+=e._text,t):t.concat(e)},[])).reduce(function(t,e){var n;if(e._text.indexOf(" ")>=0){n=[];for(var i=e._text.split(" "),o=0;o<i.length;o++){var r=i[o];if(r.length>0){var s=U.createInstance(u,e.getFont());s._text=r,n.push(s)}if(o<i.length-1||1===i.count){var a=U.createInstance(u,e.getFont());a._text=" ",n.push(a)}}}else n=e;return t.concat(n)},[]));for(var T=0;T<t.length;T++){var S=t[T],k=S.getFont(),E=U.createInstance(u,k);E.translate(m,y),p.push(E);var B=new e;B.start_index=p.length-1,B.num_phrases=1,B.advance=0,P.words.push(B);for(var L=S._text,M=0;M<L.length;M++){var R=L[M];R<" "&&"\r"!=R&&"\n"!=R&&(R=" "),E._text+=R;var O=E.getSymbolRect(E._text.length-1).getWidth();if(x+=O,B.advance+=O,m+=O,M==L.length-1&&"\n"==L[M]&&(w(P,i,x),m=f.min_x(),y+=P.height,(E=U.createInstance(u,k)).translate(m,y),p.push(E),(B=new e).start_index=p.length-1,B.num_phrases=1,B.advance=0,(P=new n).words.push(B),x=0),x>i){if(h&&x<c){i=x;continue}var F=0;if(!(P.words.length>1))return _(t,x,!0);F+=B.advance,x-=B.advance;var I=m-B.advance,A=y;P.words.pop(),w(P,i,x);for(var D=(m=f.min_x())-I,z=(y+=P.height)-A,V=0;V<B.num_phrases;++V)p[B.start_index+V].translate(D,z);(P=new n).words.push(B),x=F,m+=F}}}w(P,i,x),l=!1,s=p.reduce(function(t,e){return t+(e._text||"")},"");var N=!1,j=d.reduce(function(t,e){return t+(e.height||0)},0);if(o.height<j&&(o.bottom+=j-o.height,N=!0),o.width<i&&(o.right+=i-o.width,N=!0),N&&v){var H=v.getTextBlock();H&&(H.rect=C(g,v.getPageIndex(),o),v.updateTransform())}}}function w(t,e,n){var i=T(a,e,n);t.length=n,t.num_symbols=0;for(var o=null,r=0;r<t.words.length;++r)for(var s=t.words[r],c=0;c<s.num_phrases;++c){t.num_symbols+=(l=p[s.start_index+c])._text.length,l.translate(i,0);var u=l.getRect().height;t.height<u&&(t.height=l.getRect().height,o=l)}if(d.push(t),x(p[s.start_index+s.num_phrases-1])&&t.num_symbols++,o)for(r=0;r<t.words.length;++r)for(s=t.words[r],c=0;c<s.num_phrases;++c){var l;(l=p[s.start_index+c])!==o&&l.translate(0,t.height-l.getRect().height-o.getBottomOffset()+l.getBottomOffset())}}t.getSpans=function(){var t=[];return p.forEach(function(e,n){var o={text:e._text.replace(/\u200B/g,"").replace(/\uFEFF/g,"").replace(/\r/g,"")},r=e.getFont(),s=r.style;r.style==i.d.GFontStyle.kGFontStyleRegular?s=i.d.FontStyle.Regular:r.style==i.d.GFontStyle.kGFontStyleBold?s=i.d.FontStyle.Bold:r.style==i.d.GFontStyle.kGFontStyleItalic?s=i.d.FontStyle.Italic:r.style==i.d.GFontStyle.kGFontStyleBoldItalic&&(s=i.d.FontStyle.BoldItalic);var a={F:r.originalFamily,f:r.format,S:r.size,s:s,C:r.color.toHex(!0),u:r.isUnderline};o.font=m.a.createInstance(a),t.push(o)}),t},t.init=function(t,e,n){if(g=t,v=n){var i=v.getTextBlock();if(i){if(p=[],i.lines.forEach(function(t,e){var n=P(t.font),o=U.createInstance(u,n);o._text=t.text,o._text=o._text.replace(new RegExp("\r\n","g"),"\n"),o._text=o._text.replace(new RegExp("\r","g"),"\n"),e==i.lines.length-1&&(o._text=o._text.replace(/\n+$/,"")),p.push(o)}),0==p.length){var s=null,a=A.getSelectedFont(g.getDocument());null!=a&&(s=P(a.toPdfFont())),p.push(y(s))}o=S(g,e).mapRect(i.rect),r=S(g,e).mapRect(g.getDocument().getPage(e).getPageBox()),l=!0,h=!!i.iw,_(p,b().getWidth())}}};var x=function(t){return!t._text.endsWith("\n")&&!t._text.endsWith("\r")&&(t._text+="\r",!0)},T=function(t,e,n){switch(t){case 0:return 0;case 1:return.5*(e-n);case 2:return e-n}return 0},S=function(t,e){return-1!==e?V.getPageToViewMatrix(t,e):i.e.matrix()},C=function(t,e,n){var o=function(t,e){return-1!==e?V.getViewToPageMatrix(t,e):i.e.matrix()}(t,e),r=i.e.quad();return r.tl=o.mapPoint(i.e.point(n.left,n.top)),r.tr=o.mapPoint(i.e.point(n.right,n.top)),r.bl=o.mapPoint(i.e.point(n.left,n.bottom)),r.br=o.mapPoint(i.e.point(n.right,n.bottom)),i.e.rect(r.tl.x,r.tl.y,r.br.x,r.br.y)}};q.createInstance=function(){return new Y};var K=n("NMv8"),Z={},X=function(t,e,n){var o,r=this,s=0,a=0,c=e,u=n,l=n.getTextBlock(),h=t,p=i.e.rect(),d=[],g=[];function m(t,e){var n=a,i=s,c=o.getText().length;if((n=Math.min(n,c))>(i=Math.min(i,c))&&(i=[n,n=i][0]),i-n==1&&"\r"===o.getCharAtPos(n))do{e?n--:i++}while("\r"===o.getCharAtPos(e?n:i)&&i<c&&n>=0);var u=r.getLineWithChar(i);o.keyStroke(n,i,t,e);var l=r.getLineWithChar(i=n+t.length);"\n"!==t&&u<l?i++:"\n"===t&&u===l&&i--,r.setSelectorPosition(i,!0),r.setCaretPosition(i,!0)}Object.defineProperty(r,"annotRect",{get:function(){return l&&l.rect?l.rect.copy():i.e.rect()}}),Object.defineProperty(r,"value",{get:function(){return o.getText()}}),Object.defineProperty(r,"defaultValue",{get:function(){return o.getText()}}),Object.defineProperty(r,"isEmpty",{get:function(){var t=this.getText();return!(t=t.replace(/\r/g,""))||f.c(t)}}),Object.defineProperty(r,"BI",{get:function(){return l&&l.BI}}),Object.defineProperty(r,"isDeleted",{get:function(){return l&&l.isDeleted}}),r.getPageIndex=function(){return c},r.getRotate=function(){return l?l.rotate:0},r.getEffect=function(){return l?l.effect:{}},r.canUndo=function(){return!1},r.canRedo=function(){return!1},r.undo=function(){},r.redo=function(){},r.clearUndoRedoStack=function(){},r.getRect=function(){return o.getRect()},r.getText=function(){return o.getText()},r.getNumChars=function(){return o.getText().length},r.getNumLines=function(){return o.getLinesCount()},r.getLineHeightFactor=function(){return o.getLineHeightFactor()},r.getPhrases=function(){return o.getPhrases()},r.getMargin=function(){return o.getMargin()},r.getLineWithChar=function(t){return o.getLineWithSymbol(t)},r.getFirstCharOnLine=function(t){return o.getFirstSymbol(t)},r.getLastCharOnLine=function(t){if(t==r.getNumLines()-1)return r.getNumChars();var e=r.getFirstCharOnLine(t+1);return--e},r.getCharQuad=function(t){return o.getCharQuad(t)},r.selectAll=function(){r.setSelectorPosition(0),r.setCaretPosition(r.getNumChars())},r.setSelAtPoint=function(t){var e=o.getSymbolAtPoint(t);r.setSelectorPosition(e),r.setCaretPosition(e)},r.setSelectorAtPoint=function(t){var e=o.getSymbolAtPoint(t);r.setSelectorPosition(e)},r.setCaretAtPoint=function(t){var e=o.getSymbolAtPoint(t);r.setCaretPosition(e)},r.setCaretPosition=function(t,e){(e||s!=t)&&((s=t)>0&&s===r.getNumChars()&&s--,d.forEach(function(t){t(a,s)}))},r.setSelectorPosition=function(t,e){(e||a!=t)&&((a=t)>0&&a===r.getNumChars()&&a--,d.forEach(function(t){t(a,s)}))},r.hasSelection=function(){return a!=s},r.getSelectedText=function(){var t;if(r.hasSelection()){var e=a,n=s;e>n&&(n=[e,e=n][0]);var i=o.getText();t=(t=f.n(i,e,n-e)).replace(new RegExp("\r","g"),"")}return t},r.getSelectorPosition=function(){return a},r.getCaretPosition=function(){return s},r.hitTestChar=function(t){return o.hitTestChar(t)},r.goLeft=function(t){var e=r.getCaretPosition();e>0&&r.setCaretPosition(--e),t||r.setSelectorPosition(e)},r.goRight=function(t){var e=r.getCaretPosition();e<r.getNumChars()&&r.setCaretPosition(++e),t||r.setSelectorPosition(e)},r.goUp=function(t){var e=r.getLineWithChar(s);if(0!=e){var n=r.getCharQuad(s).top_left();n.y-=o.getLineHeight(e-1)/2,r.setCaretAtPoint(n)}else r.setCaretPosition(0);t||r.setSelectorPosition(s)},r.goDown=function(t){var e=r.getLineWithChar(s);if(e<o.getLinesCount()-1){var n=r.getCharQuad(s).bottom_left();n.y+=o.getLineHeight(e+1)/2,r.setCaretAtPoint(n)}else r.setCaretPosition(o.getLastSymbol(e));t||r.setSelectorPosition(s)},r.goToFirst=function(t){r.setCaretPosition(0),t||r.setSelectorPosition(0)},r.goToLast=function(t){var e=r.getNumChars();r.setCaretPosition(e),t||r.setSelectorPosition(e)},r.goToHome=function(t){var e=s,n=r.getLineWithChar(e);e=r.getFirstCharOnLine(n),r.setCaretPosition(e),t||r.setSelectorPosition(e)},r.goToEnd=function(t){var e=s,n=r.getLineWithChar(e);e=r.getLastCharOnLine(n),r.setCaretPosition(e),t||r.setSelectorPosition(e)},r.selectWord=function(t){var e=o.getWordPositions(t);f.j(e)||(r.setCaretPosition(e.caret),r.setSelectorPosition(e.selector))},r.keyStroke=function(t){m(t)},r.delete=function(t){var e=r.getSelectorPosition(),n=r.getCaretPosition();n<e&&(e=[n,n=e][0]),n==e&&(t?n>0&&r.setCaretPosition(n-1):r.setCaretPosition(n+1)),m("",t)},r.commitChanges=function(){var t=o.getSpans();return t?K.a.edit(h.getDocument(),c,l,t).then(function(){u.updateTransform()}):new Promise(function(t,e){t()})},r.cancelChanges=function(){l.rect.isEqual(p)||(l.rect=p.copy(),u.updateTransform())},r.onModify=function(){return h.requestPermissions(i.d.BLPermReqObj.kBLPermReqObjContent,i.d.BLPermReqOp.kBLPermReqOpModify,!0)},r.getCurrentFont=function(){var t=o.getPhraseAtPos(s>0?s-1:s);return f.j(t)?null:t.getFont()},r.setOnSelChangedCallBack=function(t){return d.find(function(e){return e===t})||d.push(t),function(){var e=d.indexOf(t,0);e>-1&&d.splice(e,1)}},r.setOnEffectChangedCallBack=function(t){return g.find(function(e){return e===t})||g.push(t),function(){var e=g.indexOf(t,0);e>-1&&g.splice(e,1)}},r.setFont=function(t,e){var n=a,i=s,r=o.getText().length;(n=Math.min(n,r))>(i=Math.min(i,r))&&(i=[n,n=i][0]),o.setFont(n,i,t),e&&h.invalidate(),d.forEach(function(t){t(a,s)})},r.updateEffect=function(t,e){l&&(Object.keys(t).forEach(function(e){l.effect[e]=t[e]}),e&&h.invalidate(),g.forEach(function(t){t(l.effect)}))},r.refresh=function(){p=l.rect.copy(),o.init(h,c,u),r.setCaretPosition(0),r.setSelectorPosition(0)},o=q.createInstance(),r.refresh()};Z.createInstance=function(t,e,n){return new X(t,e,n)};var Q=n("QRXY"),J={},$=function(t,e){var n=t,o=e,r=!1,s=(i.a.createInstance("#FF000000"),this);Object.defineProperty(s,"BI",{get:function(){return o&&o.BI}}),this.getModel=function(){return o},this.getPageIndex=function(){return o.getPageIndex()},this.getRect=function(){return o.getRect()},this.hitTest=function(t,e){return this.getPageIndex()==t&&this.getRect().containsPoint(e)},this.hitTestText=function(t){return o.hitTestChar(t)},this.mouseDown=function(t,e){var s=l(t);return o.getRect(),!!this.hitTestText(s)&&(r=!0,e&i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed?o.setCaretAtPoint(s):o.setSelAtPoint(s),n.invalidate(),!0)},this.mouseUp=function(t,e){return r&&(r=!1),!1},this.mouseMove=function(t,e){var s=l(t);return r?(o.setCaretAtPoint(s),n.setCursor(i.d.BLCursorType.kBLCursorIBeam),n.invalidate(),!0):!!this.hitTestText(s)&&(n.setCursor(i.d.BLCursorType.kBLCursorIBeam),!0)},this.mouseWheel=function(t,e){return!1},this.keyDown=function(t,e){var r=h(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed),s=h(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed);switch(t){case i.d.kBLKey.kBLKey_LEFT:o.goLeft(r);break;case i.d.kBLKey.kBLKey_RIGHT:o.goRight(r);break;case i.d.kBLKey.kBLKey_UP:o.goUp(r);break;case i.d.kBLKey.kBLKey_DOWN:o.goDown(r);break;case i.d.kBLKey.kBLKey_HOME:s?o.goToFirst(r):o.goToHome(r);break;case i.d.kBLKey.kBLKey_END:s?o.goToLast(r):o.goToEnd(r);break;case i.d.kBLKey.kBLKey_BACK:o.onModify()&&o.delete(!0);break;case i.d.kBLKey.kBLKey_DELETE:o.onModify()&&o.delete(!1);break;case i.d.kBLKey.kBLKey_A:s&&o.selectAll();break;case i.d.kBLKey.kBLKey_C:s&&this.copy()}return n.invalidate(),!0},this.keyUp=function(t,e){return!0},this.charReceived=function(t){var e=function(t){if("\r"==t)t="\n";else if(t<" ")return null;return t}(t);return!f.j(e)&&(o.onModify()&&(o.keyStroke(e),n.invalidate()),!0)},this.doubleClick=function(t,e){var i=l(t);return!!o.getRect().containsPoint(i)&&(o.selectWord(i),n.invalidate(),!0)},this.cut=function(){this.copy(),this.delete()},this.copy=function(){o.hasSelection()&&o.getSelectedText()},this.paste=function(){},this.delete=function(){o.onModify()&&(o.delete(!1),n.invalidate())},this.hasSelection=function(){return o.hasSelection()},this.draw=function(t,e){if(t==o.getPageIndex()){var r=o.getRect();e.pushState();var s=V.getViewToPageMatrix(n,t);e.concatCTM(s);var a=n.getDocument().getPage(t).getCropBox();e.clipRect(i.e.rect(0,0,a.width,a.height));var u=o.getRotate();0!==u&&(e.translateCTM(r.left,r.top),e.rotateCTM(-u),e.translateCTM(-r.left,-r.top)),V.drawField(e,o),c(e),e.popState()}},this.canUndo=function(){return o.canUndo()},this.canRedo=function(){return o.canRedo()},this.undo=function(){o.undo(),n.invalidate()},this.redo=function(){o.redo(),n.invalidate()},this.finalize=function(t){void 0===t&&(t=!0),o.clearUndoRedoStack(),t?o.commitChanges().catch(function(t){o.cancelChanges()}):o.cancelChanges(),n.setSelection(null)},this.commitChanges=function(){return o.commitChanges()},this.refresh=function(){o.refresh(),a(0,0)};var a=function(t,e){n.invalidate();var r=o.getCharQuad(e),a=i.e.rect(r.top_left().x,r.top_left().y,r.bottom_left().x,r.bottom_left().y),c=o.getRect(),u=i.e.rotationMatrix(-o.getRotate(),c.leftTop()),l=u.mapPoint(a.leftTop()),h=u.mapPoint(a.rightBottom());l=V.getViewToPageMatrix(n,o.getPageIndex()).mapPoint(l),h=V.getViewToPageMatrix(n,o.getPageIndex()).mapPoint(h);var p={};p.pageIndex=s.getPageIndex(),p.top=l,p.bottom=h,n.onCaretPositionChanged(p),s.refreshSelectedFont()};this.refreshSelectedFont=function(){var t=o.getCurrentFont(),e=A.getSelectedFont(n.getDocument());if(null!==t&&null!==e){var i=!1;e.size.id!==t.size&&(e.size={id:t.size,text:t.size},i=!0),e.descriptor.value.family===t.originalFamily&&e.descriptor.value.format===t.format||(e.descriptor.value.family=t.originalFamily,e.descriptor.value.format=t.format,i=!0),e.isBold!==t.isBold()&&(e.isBold=!e.isBold,i=!0),e.isItalic!==t.isItalic()&&(e.isItalic=!e.isItalic,i=!0),e.color!==t.color&&(e.color=t.color,i=!0),e.isUnderline!==t.isUnderline&&(e.isUnderline=t.isUnderline,i=!0),i&&A.setSelectedFont(n.getDocument(),e),setTimeout(function(){})}};var c=function(t){var e=u();if(e){t.pushState();var n=o.getRect();t.clipRect(n),t.fillGeometry(e,i.f.LookAndFeel.TextCopySelectionColor),t.popState()}},u=function(){var t=o.getSelectorPosition(),e=o.getCaretPosition();if(t==e)return null;t>e&&(e=[t,t=e][0]);for(var n=new Q.a,r=i.e.rect(),s=0,a=t;a<e;a++){var c=o.getCharQuad(a);if(c.isRect()){var u=c.getBound();if(0==s)r=u;else if(i.e.isRectsOnSameLine(r,u,1))r.right=u.right;else{var l=r.copy();n.rectangle(l),r=u,s=1}++s}else l=r.copy(),n.rectangle(l),r=i.e.rect(),s=0,n.beginFigure(c.top_left()),n.lineTo(c.top_right()),n.lineTo(c.bottom_right()),n.lineTo(c.bottom_left()),n.endFigureClose()}return 0!=s&&(l=r.copy(),n.rectangle(l)),n},l=function(t){var e=n.mapPointToPage(o.getPageIndex(),t);return function(t){if(0!==o.getRotate()){var e=o.getRect();t=i.e.rotationMatrix(o.getRotate(),i.e.point(e.left,e.top)).mapPoint(t)}return t}(e=V.getPageToViewMatrix(n,o.getPageIndex()).mapPoint(e))},h=function(t,e){return 0!=(t&e)};o.setOnSelChangedCallBack(a),o.setOnEffectChangedCallBack(function(){var t=o.getEffect(),e=A.getSelectedEffect(n.getDocument());null!=t&&null!=e&&(JSON.stringify(t)!=JSON.stringify(e)&&A.setSelectedEffect(n.getDocument(),t),setTimeout(function(){}))}),this.refresh()};J.createInstance=function(t,e){return new $(t,e)};var tt={},et=function(){var t=null;this.init=function(e,n){t=n},this.done=function(){},this.getType=function(){return i.h.TextBlockEdit},this.getSelectionData=function(){return t},this.draw=function(e,n){t.draw(n,e)},this.hitTest=function(e,n){return t.hitTest(e,n)},this.getDestination=function(){var e={};return e.pPageIndex=t.getPageIndex(),e.pRect=t.getRect(),e},this.getProperties=function(){return null}};tt.createInstance=function(){return new et};var nt=function(t,e){var n=this,o=t,r=e,s=o.getPage(r),c=null;n.getDoc=function(){return o},n.getPageIndex=function(){return r},n.isEqual=function(t){return!!t&&t.getObjectType()==n.getObjectType()&&t.getDoc()==o&&t.getPageIndex()==r&&n.compareInternals(t)},n.getBounds=function(){var t=n.getCTM(),e=n.getObjectSpaceRect();return t.mapQuad(i.e.quadFromRect(e))},n.setEditCTM=function(t){return(c=a.a.correctCTMToRespectPageBox(s.getCropBox(),n.getObjectSpaceRect(),t))!=t},n.getEditBounds=function(){var t=n.getObjectSpaceRect();return c.mapQuad(i.e.quadFromRect(t))}},it=function(t,e,n,o){var r,s,a,c=this,u=o,l=n,h=i.e.identityMatrix();(a={position:i.e.point(),size:i.e.size(),rotation:0,reflect:!1}).position=u.rect.leftTop(),a.size=u.rect.getSize(),a.rotation=u.rotate,a.reflect=u.reflect,r=a,s=(s=i.e.identityMatrix()).multiply(i.e.scalingMatrix(r.size.width,r.size.height)),r.reflect&&(s=s.multiply(i.e.reflectYMatrix())),h=s=(s=s.multiply(i.e.rotationMatrix(r.rotation))).multiply(i.e.translationMatrix(r.position.x,r.position.y)),c.prototype=new nt(t,e),c.getPageIndex=function(){return c.prototype.getPageIndex()},c.getObjectType=function(){return i.h.TextEdit},c.hitTestPoint=function(t){return c.getBounds().containsPoint(t)},c.hitTestRect=function(t){return c.getBounds().hasIntersectionRect(t)},c.getObjectSpaceRect=function(){return i.e.rect(0,0,1,-1)},c.getCTM=function(){return h},c.applyEdit=function(){},c.delete=function(){},c.getData=function(){return c},c.getActiveChar=function(){return l},c.getPDEElement=function(){return u},c.getBounds=function(){var t=c.getCTM(),e=c.getObjectSpaceRect();return t.mapQuad(i.e.quadFromRect(e))},c.compareInternals=function(t){return t&&t.getPDEElement()===c.getPDEElement()}},ot=function(){var t={createEditObjectByCharIterator:function(t,e,n){if(!n)return null;var i=n.getTextBlock();return i?new it(t,e,n,i):null},createEditObjectByPagePoint:function(e,n,o,r){if(o.type==i.d.PDEElementType.kPDEElementText){var s=o.getItemAtPoint(r);if(s){var a=e.getPage(n),u=c.createCharIteratorForItemAtPoint(e,a,s,r);return u?t.createEditObjectByCharIterator(e,n,u):null}}return null},createTextEditObject:function(e,n,i){var o=e.getPage(n);if(!i)return null;var r=o.textBlocks.indexOf(i);if(r<0)return null;var s=c.createBeginCharIteratorForTextBlock(e,o,o.content,r);return s?t.createEditObjectByCharIterator(e,n,s):null}};return t}(),rt={},st=function(t){var e=t,n=null,o=!1,r=i.d.AnchorPlace.ANCHOR_NONE,s=0,a=i.e.point(),c=i.e.point(),u=function(t,e,n){var o=i.e.point(t.x-e.x,t.y-e.y);return n*n>=o.x*o.x+o.y*o.y},l=function(t,e,n){return t.mapPointToPage(e,n)},h=function(t,e,n){return t.mapPointToDevice(e,n)},d=function(t,e,n){var o=h(t,e,n.tl),r=h(t,e,n.tr),s=h(t,e,n.bl),a=h(t,e,n.br);return i.e.quadFromPoints(o,r,s,a)},m=function(t){var e=v(t,0);return!(!n||!e)&&n.getPosition()},v=function(t,o){if(!n)return!1;var r,s=n.getTextBlockTransformer(),a=s.getPageIndex();if(!((r=e.getVisibleRange()).startPage<=a&&a<=r.endPage))return!1;var c=i.d.TransformType.TRANSFORM_RESIZE_BLOCK;(i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)||i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed))&&(c=i.d.TransformType.TRANSFORM_SCALE);var p=i.f.LookAndFeel.TransformerScaleZoneRadius,f=d(e,a,s.getBounds()),g=null,m=s.getAllActionButtons();if(m)for(var v in m)if(m.hasOwnProperty(v)){var y=m[v];if(y){var b=h(e,a,y.getPosition());if(u(t,b,y.anchorRadius)){(g=y).viewPoint=b;break}}}if(g)return{type:i.d.TransformType.TRANSFORM_HIT_ACTIONBUTTON,anchor:null,active:g.viewPoint};if(s.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&u(t,f.top_left(),p))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_TOP_LEFT,active:f.top_left()};if(s.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&u(t,f.top_right(),p))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_TOP_RIGHT,active:f.top_right()};if(s.hasAnyCurrentEditMode(i.d.EditModes.Move)&&u(t,f.top_right(),p))return{type:i.d.TransformType.TRANSFORM_MOVE,anchor:i.d.AnchorPlace.ANCHOR_TOP_RIGHT,active:f.top_right()};if(s.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&u(t,f.bottom_left(),p))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:f.bottom_left()};if(s.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&u(t,f.bottom_right(),p))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:f.bottom_right()};if(s.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&i.e.pointsDistance(f.center_right(),f.center_left())>=3*p){if(u(t,f.top_center(),p))return{type:c,anchor:i.d.AnchorPlace.ANCHOR_TOP,active:f.top_center()};if(u(t,f.bottom_center(),p))return{type:c,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM,active:f.bottom_center()}}if(s.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&i.e.pointsDistance(f.top_center(),f.bottom_center())>=3*p){if(u(t,f.center_left(),p))return{type:c,anchor:i.d.AnchorPlace.ANCHOR_LEFT,active:f.center_left()};if(u(t,f.center_right(),p))return{type:c,anchor:i.d.AnchorPlace.ANCHOR_RIGHT,active:f.center_right()}}var P=i.f.LookAndFeel.TransformerRotateZoneRadius,_=s.getRotateAnchor(e);if(_=h(e,a,_),s.hasAnyCurrentEditMode(i.d.EditModes.Rotate)&&u(t,_,P))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_TOP,active:_};var w=s.getDeleteAnchor(e);if(w=h(e,a,w),u(t,w,i.f.LookAndFeel.TransformerDeleteZoneRadius))return{type:i.d.TransformType.TRANSFORM_HIT_DELETEBUTTON,anchor:i.d.AnchorPlace.ANCHOR_TOP,active:w};var x=l(e,a,t);if(s.hitTest(x))return{type:s.hasAnyCurrentEditMode(i.d.EditModes.Move)?i.d.TransformType.TRANSFORM_MOVE:i.d.TransformType.TRANSFORM_NONE,anchor:i.d.AnchorPlace.ANCHOR_NONE,active:t};var T=s.getTransform().invert().mapPoint(x);return s.getUserSpaceRect().containsPoint(T)?{type:s.hasAnyCurrentEditMode(i.d.EditModes.Move)?i.d.TransformType.TRANSFORM_MOVE:i.d.TransformType.TRANSFORM_NONE,anchor:i.d.AnchorPlace.ANCHOR_NONE,active:t}:null},y=function(t,o,r){var s=i.d.BLCursorType.kBLCursorArrow;switch(t){case i.d.TransformType.TRANSFORM_MOVE:s=i.d.BLCursorType.kBLCursorMove;break;case i.d.TransformType.TRANSFORM_ROTATE:s=i.d.BLCursorType.kBLCursorRotate;break;case i.d.TransformType.TRANSFORM_SCALE:case i.d.TransformType.TRANSFORM_RESIZE_BLOCK:for(var a=n.getTextBlockTransformer(),c=e.getPagesRotation(),u=i.e.degreeToRadian(c)+a.getRotation_PropertyTest();u>=Math.PI;)u-=Math.PI;var l,h=i.e.degreeToRadian(45);l=i.e.castFloatToInt(u>0?u/h+.5:u/h-.5);var p=e.document,d=a.getPageIndex(),f=[[6,0,2,4,7,1,5,3],[4,6,0,2,5,7,3,1],[2,4,6,0,3,5,1,7],[0,2,4,6,1,3,7,5]][p.getPage(d).rotate/90][o];(f=(f-l)%8)<0&&(f+=8),s=(i.d.BLFlagIsSet(r,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.d.BLCursorType.kBLCursorScaleProportional_N:i.d.BLCursorType.kBLCursorScale_N)+f;break;case i.d.TransformType.TRANSFORM_HIT_DELETEBUTTON:s=i.d.BLCursorType.kBLCursorLinkHand}e.setCursor(s)},b=function(t,n,o,s){f.j(s)&&(s=!1);var a=t.getTransform(),c=a.invert();if(c){var u=c.mapPoint(n),l=t.getUserSpaceRect(),h=l.getWidth(),p=l.getHeight();if(!i.e.floatEq(h,0)&&!i.e.floatEq(p,0)){var d=l.getOrigin(),g=l.getCenter(),m=2*(u.x-d.x)/h,v=2*(u.y-d.y)/p;u.offset(-d.x,-d.y);var b=u.x/h,P=u.y/p,_=null,w=null;switch(r){case i.d.AnchorPlace.ANCHOR_LEFT:_=s?i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.e.scalingMatrix(1-b,1-b,d).multiply(i.e.translationMatrix(u.x,b*p/2)):i.e.scalingMatrix(1-m,1-m,g):i.e.scalingMatrix(1-b,1,d).multiply(i.e.translationMatrix(u.x,0));break;case i.d.AnchorPlace.ANCHOR_TOP:_=s?i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.e.scalingMatrix(P,P,d).multiply(i.e.translationMatrix((1-P)*h/2,0)):i.e.scalingMatrix(v-1,v-1,g):i.e.scalingMatrix(1,P,d);break;case i.d.AnchorPlace.ANCHOR_RIGHT:_=s?i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.e.scalingMatrix(b,b,d).multiply(i.e.translationMatrix(0,(1-b)*p/2)):i.e.scalingMatrix(m-1,m-1,g):i.e.scalingMatrix(b,1,d);break;case i.d.AnchorPlace.ANCHOR_BOTTOM:_=s?i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.e.scalingMatrix(1-P,1-P,d).multiply(i.e.translationMatrix(P*h/2,u.y)):i.e.scalingMatrix(1-v,1-v,g):i.e.scalingMatrix(1,1-P,d).multiply(i.e.translationMatrix(0,u.y));break;case i.d.AnchorPlace.ANCHOR_TOP_LEFT:w=Math.min(1-b,P),_=i.e.scalingMatrix(w,w,d).multiply(i.e.translationMatrix((1-w)*h,0));break;case i.d.AnchorPlace.ANCHOR_TOP_RIGHT:w=Math.min(b,P),_=i.e.scalingMatrix(w,w,d);break;case i.d.AnchorPlace.ANCHOR_BOTTOM_LEFT:w=Math.min(1-b,1-P),_=i.e.scalingMatrix(w,w,d).multiply(i.e.translationMatrix((1-w)*h,(1-w)*p));break;case i.d.AnchorPlace.ANCHOR_BOTTOM_RIGHT:w=Math.min(b,1-P),_=i.e.scalingMatrix(w,w,d).multiply(i.e.translationMatrix(0,(1-w)*p))}_&&(a=_.multiply(a),t.setOperationTransform(a)),e.invalidate(),y(i.d.TransformType.TRANSFORM_SCALE,r,o)}}},P=function(t){return"Delete"==t&&(e.requestPermissions(i.d.BLPermReqObj.kBLPermReqObjContent,i.d.BLPermReqOp.kBLPermReqOpDelete,!0)&&(e.setSelection(null),n.delete(),o=!0),!0)},_=function(t,e){t&&e&&setTimeout(function(){var n=e.getTextBlockTransformer();if(n){var o=n.getPageIndex(),r=d(t,o,n.getBounds());if(r){var s=r.top_right(),a=r.bottom_right();s&&a&&(s.x=Math.max(s.x,a.x),s.x+=i.f.LookAndFeel.TransformerScaleZoneRadius,w(s))}}})};function w(t){e.showContextMenu(i.d.ContextMenuType.Edit,t,i.d.BLSelectionOperations.kBLSelectionAllowPaste)}this.initialize=function(t,r,s){e&&e.setCursor(i.d.BLCursorType.kBLCursorIBeam),n=t,o=!1,function(){if(n&&!n.handler){var t=n.getTextBlockTransformer();if(t){var o=t.getTextBlock();if(o){var r=t.getPageIndex();g.a.clearViewModel(o.BI);var s=Z.createInstance(e,r,t),a=J.createInstance(e,s),c=p.createInstance(i.h.TextBlockEdit,e);if(c){c.initialize(a);var u=tt.createInstance();u&&u.init(e,a),n.handler={inputHandler:c,selection:u}}}}}}(),_(e,n)},this.terminate=function(){!function(t){if(e&&n){var i=n.handler;if(i){var o=i.selection;if(o){var r=o.getSelectionData();if(r){r.commitChanges(),r.refresh(),e.onCaretPositionChanged();var s=r.getModel();s&&(s.isDeleted||g.a.addViewModel(r))}}}}}(),n&&n.terminate(),n=null,e=null},this.getTextBlock=function(){if(!n)return null;var t=n.getTextBlockTransformer();return t?t.getTextBlock():null},this.refreshSelectionData=function(){if(n){var t=n.handler;if(t){var i=t.selection;if(i){var o=i.getSelectionData();o&&(o.refresh(),n.notifyPositionChanged(),e&&e.invalidate())}}}},this.getToolType=function(){return i.h.Edit},this.isFinished=function(){return o},this.handleEvent=function(t){if(o)return!1;if(n){var e=n.getTextBlockTransformer();if((!e||!e.isPerformingOperation())&&n.handler&&n.handleEvent(t))return!0}switch(t.type){case i.d.BLInputEventType.kBLInputEventCommand:return P(t.commandArgs.command);case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags);case i.d.BLInputEventType.kBLInputEventPointerDoubleClicked:return this.onDoubleClick(t.pointerArgs.position,t.pointerArgs.flags)}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonDown=function(t,u){var h=v(t,u);if(h){if(e.requestPermissions(i.d.BLPermReqObj.kBLPermReqObjContent,i.d.BLPermReqOp.kBLPermReqOpModify)&&(d=n.getTextBlockTransformer())&&h.type===i.d.TransformType.TRANSFORM_HIT_DELETEBUTTON&&P("Delete"),e.requestPermissions(i.d.BLPermReqObj.kBLPermReqObjContent,i.d.BLPermReqOp.kBLPermReqOpModify,!0)){r=h.anchor;var p=ot.createEditObjectByCharIterator(e.getDocument(),n.getCurrentPage(),n.getPosition());n.updateTextBlockTransformerSnapData(e,p);var d=n.getTextBlockTransformer();a=d.getRotationOrigin(),s=d.getRotation_PropertyTest(),d.startOperation(h.type);var f=i.e.point(i.e.castFloatToInt(h.active.x),i.e.castFloatToInt(h.active.y));c=l(e,d.getPageIndex(),f)}return!0}if(i.d.BLFlagIsSet(u,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed))return o=!0,!1;var g=m(t);return g?(!n.isTextBlockEmpty()&&i.d.BLFlagIsSet(u,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?(n.startSelecting(),n.moveTo(g),n.endSelecting()):n.moveTo(g),n.startSelecting(),e.goToSelection(),e.invalidate(),!0):(o=!0,!1)},this.onLButtonUp=function(t,o){var r=n.getTextBlockTransformer();if(r.isPerformingOperation()){if(!n.isTextBlockEmpty()){var s=v(t,o);if(s&&e.requestPermissions(i.d.BLPermReqObj.kBLPermReqObjContent,i.d.BLPermReqOp.kBLPermReqOpModify,!1)){var a=i.e.point(s.active.x,s.active.y),u=l(e,r.getPageIndex(),a);c.isEqual(u)&&n.setSelectionStart(n.getPosition())}}r.endOperation(n.handler?n.handler.selection.getSelectionData().commitChanges:new Promise(function(t,e){t(null)})).then(function(){try{n.handler&&n.handler.selection.getSelectionData().refresh()}catch(t){}n.notifyPositionChanged(),e.invalidate()},function(t){}),n.notifyPositionChanged(),e.invalidate()}else n.isSelecting()&&(n.endSelecting(),n.notifyPositionChanged());return!0},this.onRButtonDown=function(t,e){return!(!m(t)&&!v(t,e)&&(o=!0,1))},this.onRButtonUp=function(t,i){var o=m(t);if(o){if(n.hasSelection()){var r=n.getSelectedRange();if(r.begin<=o&&o<r.end)return n.canMergeTextBlocks(),_(e,n),!0}return n.moveTo(o),e.invalidate(),_(e,n),!0}return!!v(t,i)&&(n.canMoveTextBlockFront(),n.canMoveTextBlockBack(),_(e,n),!0)},this.onMouseMove=function(t,o){if(!n)return!1;var u=n.getTextBlockTransformer();if(u.isPerformingOperation())return u.getOperationType(),function(t,n,o){var u=l(e,t.getPageIndex(),n);switch(t.getOperationType()){case i.d.TransformType.TRANSFORM_MOVE:!function(t,n,o){var s=t.getTransform(),a=c.copy(),u=n.copy();if(!a.isEqual(u)){t.setSnapInfo(null);var l=i.e.point(u.x-a.x,u.y-a.y);if(t.setOperationTransform(s.multiply(i.e.translationMatrix(l.x,l.y))),!i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var h=t.getSnapData();if(h){var p;p=e.getZoom();var d=t.getOperationBounds().getBound(),f=null,g=i.e.point(),m=e.isGridEnabled(),v=h.snapMove(d,u,{zoom:p,snapToGrid:m});if(v&&(f=v.snapInfo,g=v.snappedAnchor),t.setSnapInfo(f),!g.isEqual(u)){var b=i.e.point(g.x-a.x,g.y-a.y);t.setOperationTransform(s.multiply(i.e.translationMatrix(b.x,b.y)))}}}e.invalidate()}y(i.d.TransformType.TRANSFORM_MOVE,r,o)}(t,u,o);break;case i.d.TransformType.TRANSFORM_SCALE:b(t,u,o,!0);break;case i.d.TransformType.TRANSFORM_RESIZE_BLOCK:b(t,u,o);break;case i.d.TransformType.TRANSFORM_ROTATE:!function(t,n,o){var u=t.getTransform(),l=a.copy(),h=c.copy(),p=n.copy(),d=i.e.point(h.x-l.x,h.y-l.y),f=i.e.point(p.x-l.x,p.y-l.y),g=i.e.vecAngleBetween(d,f);if(i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var m=s+g,v=i.e.degreeToRadian(45);g=(m=i.e.castFloatToInt(m>0?m/v+.5:m/v-.5)*v)-s}t.setOperationTransform(u.multiply(i.e.rotationMatrix(g,l))),e.invalidate(),y(i.d.TransformType.TRANSFORM_ROTATE,r,o)}(t,u,o)}}(u,t,o),!0;if(n.isSelecting()){var h=m(t);return h&&(e.setCursor(i.d.BLCursorType.kBLCursorIBeam),n.moveTo(h),e.invalidate()),!0}var p=v(t,o);return p?(e.setHighlight(null),y(p.type,p.anchor,i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),!0):(e&&e.setCursor(i.d.BLCursorType.kBLCursorIBeam),!1)},this.onDoubleClick=function(t,o){if(e.requestPermissions(i.d.BLPermReqObj.kBLPermReqObjContent,i.d.BLPermReqOp.kBLPermReqOpModify,!0))return!!v(t,o)&&(n.getTextBlockTransformer(),!0)},this.onKeyUp=function(t){return t==i.d.kBLKey.kBLKey_DELETE?P("Delete"):t===i.d.kBLKey.kBLKey_ESCAPE&&(o=!0,!0)}};rt.createInstance=function(t){return new st(t)};var at=function(){function t(){}return t.createAndSetCaret=function(t,e,n){var o=null;if(!t||!e)return o;var r,a=t.document;return a?(n?((r=s.createInstance(a)).moveTo(e),t.setHighlightNamed(i.h.TextEditHighlight,r)):(t.setHighlight(null),(r=s.createInstance(a,{})).moveTo(e),o=t.setSelectionAndTool(i.h.TextEdit,r)),o):o},t.setupTextEditTool=function(e,n,o,r,a){if(!e)return new Promise(function(t,e){t(null)});var u=e.document;if(!u)return new Promise(function(t,e){t(null)});var l=e.getPageAtPoint(n);if(f.j(l))return new Promise(function(t,e){t(null)});var h=u.getPage(l);if(!h)return new Promise(function(t,e){t(null)});var p=e.mapPointToPage(l,n),d=A.getSelectedFont(u),g=A.getSelectedEffect(u),m=i.d.FontStyle.Regular;return d.isItalic&&d.isBold?m=i.d.FontStyle.BoldItalic:d.isItalic?m=i.d.FontStyle.Italic:d.isBold&&(m=i.d.FontStyle.Bold),K.a.create(p.x,p.y,d.descriptor.value.family,d.size.id,d.color,m,d.descriptor.value.format,g,o,r=r||t.DefaultText,a).then(function(t){if(!t)return null;var n=h.textBlocks.indexOf(t);if(!(n<0)){var o=c.createBeginCharIteratorForTextBlock(u,h,h.content,n),r=s.createInstance(u,{});return r.moveTo(o),e.setSelectionAndTool(i.h.TextEdit,r)}}).catch(function(t){return console.log(t)})},t.transformTextEdit=function(t,e,n,i,o,r,s){return K.a.transform(t,e,n,i,o,r,s)},t.DefaultText="Click here to edit the text...",t}(),ct=function(){return function(t){this.view_=t,this.finished_=!1,this.initialize=function(){this.view_.setCursor(i.d.BLCursorType.kBLCursorIBeam)},this.terminate=function(){},this.getToolType=function(){return i.h.TypeText},this.isFinished=function(){return this.finished_},this.handleEvent=function(t){switch(t.type){case i.d.BLInputEventType.kBLInputEventPointerReleased:return t.pointerArgs.button!==i.d.BLPointerButton.kBLPointerButtonLeft||this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventPointerPressed:return t.pointerArgs.button!==i.d.BLPointerButton.kBLPointerButtonRight||this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventPointerMoved:return!0}return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonUp=function(t,e){try{return at.setupTextEditTool(this.view_,t),this.finished_=!0,!0}catch(n){return console.log(n),!1}},this.onRButtonUp=function(t,e){return this.view_.showContextMenu(i.d.ContextMenuType.Text,t,i.d.BLSelectionOperations.kBLSelectionAllowPaste),!0},this.onMouseMove=function(t,e){return!0},this.onKeyUp=function(t){}}}(),ut=(n("rxHE"),function(){return{selectObject:function(t,e,n){var o={selected:!1,inputHandler:null};if(!t||!e)return o;if("TextEdit"!==e.getObjectType())return o;var r=e.getData().getActiveChar();return o.inputHandler=at.createAndSetCaret(t,r,n),o.selected=!0,t.setCursor(i.d.BLCursorType.kBLCursorIBeam),o}}}()),lt=(n("dwNZ"),{}),ht=function(t,e){var n=this,o=t,r=e,s=o.getPage(r),c=null;n.getDoc=function(){return o},n.getPageIndex=function(){return r},n.isEqual=function(t){return!!t&&t.getObjectType()==n.getObjectType()&&t.getDoc()==o&&t.getPageIndex()==r&&n.compareInternals(t)},n.getBounds=function(){var t=n.getCTM(),e=n.getObjectSpaceRect();return t.mapQuad(i.e.quadFromRect(e))},n.setEditCTM=function(t){return(c=a.a.correctCTMToRespectPageBox(s.getCropBox(),n.getObjectSpaceRect(),t))!=t},n.getEditBounds=function(){var t=n.getObjectSpaceRect();return c.mapQuad(i.e.quadFromRect(t))}};lt.createInstance=function(t,e){return new ht(t,e)};var pt=function(t,e,n,o){var r,s,a,c=this,u=o,l=n,h=i.e.identityMatrix();(a={position:i.e.point(),size:i.e.size(),rotation:0,reflect:!1}).position=u.rect.leftTop(),a.size=u.rect.getSize(),a.rotation=u.rotate,a.reflect=u.reflect,r=a,s=(s=i.e.identityMatrix()).multiply(i.e.scalingMatrix(r.size.width,r.size.height)),r.reflect&&(s=s.multiply(i.e.reflectYMatrix())),h=s=(s=s.multiply(i.e.rotationMatrix(r.rotation))).multiply(i.e.translationMatrix(r.position.x,r.position.y)),c.prototype=lt.createInstance(t,e),c.getPageIndex=function(){return c.prototype.getPageIndex()},c.getObjectType=function(){return"TextEdit"},c.hitTestPoint=function(t){return c.getBounds().containsPoint(t)},c.hitTestRect=function(t){return c.getBounds().hasIntersectionRect(t)},c.getObjectSpaceRect=function(){return i.e.rect(0,0,1,-1)},c.getCTM=function(){return h},c.applyEdit=function(){alert("textEditObject - applyEdit")},c.delete=function(){alert("textEditObject - delete")},c.getData=function(){return c},c.getActiveChar=function(){return l},c.getPDEElement=function(){return u},c.getBounds=function(){var t=c.getCTM(),e=c.getObjectSpaceRect();return t.mapQuad(i.e.quadFromRect(e))},c.compareInternals=function(t){return t&&t.getPDEElement()===c.getPDEElement()}},dt=function(){var t={createEditObjectByCharIterator:function(t,e,n){if(!n)return null;var i=n.getTextBlock();return i?new pt(t,e,n,i):null},createEditObjectByPagePoint:function(e,n,o,r){if(o.type==i.d.PDEElementType.kPDEElementText){var s=o.getItemAtPoint(r);if(s){var a=e.getPage(n),u=c.createCharIteratorForItemAtPoint(e,a,s,r);return u?t.createEditObjectByCharIterator(e,n,u):null}}return null},createTextEditObject:function(e,n,i){var o=e.getPage(n);if(!i)return null;var r=o.textBlocks.indexOf(i);if(r<0)return null;var s=c.createBeginCharIteratorForTextBlock(e,o,o.content,r);return s?t.createEditObjectByCharIterator(e,n,s):null}};return t}();n("BWpt"),n.d(e,"b",function(){return rt}),n.d(e,"e",function(){return ct}),n.d(e,"d",function(){return ut}),n.d(e,"a",function(){return at}),n.d(e,"f",function(){return A}),n.d(e,"c",function(){return dt})},"5Rvh":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("exf4"),o=n("c5EE"),r=function(){function t(t){this.canvas=t,this.context=null,this.ctm=i.e.identityMatrix(),this.ctms=[],t&&this.init()}return t.prototype.getContext=function(){return this.context},t.prototype.toDataURL=function(t,e){return this.canvas?this.canvas.toDataURL(t,e):null},t.prototype.clear=function(){this.context&&this.context.clearRect(0,0,1e6,1e6)},t.prototype.setCompositeOperation=function(t){this.context&&(this.context.globalCompositeOperation=t)},t.prototype.getCompositeOperation=function(){return this.context?this.context.globalCompositeOperation:"source-over"},t.prototype.pushState=function(){this.context&&(this.context.save(),this.ctms.push(this.getCTM()))},t.prototype.popState=function(){this.context&&(this.context.restore(),this.setCTM(this.ctms.pop()))},t.prototype.setCTM=function(t){this.context&&(this.ctm=t||i.e.identityMatrix(),this.context.setTransform(this.ctm.a,this.ctm.b,this.ctm.c,this.ctm.d,this.ctm.e,this.ctm.f))},t.prototype.scaleCTM=function(t,e){this.context&&this.multiplyTransform(i.e.scalingMatrix(t,e))},t.prototype.translateCTM=function(t,e){this.context&&this.multiplyTransform(i.e.translationMatrix(t,e))},t.prototype.rotateCTM=function(t){this.context&&this.multiplyTransform(i.e.rotationMatrix(t))},t.prototype.getCTM=function(){return this.ctm.copy()},t.prototype.fillBitmap=function(t,e,n){var i=t.floor();if(n){var o=Math.min(i.width/e.width,i.height/e.height);this.context.drawImage(e,0,0,e.width,e.height,i.left+(i.width-e.width*o)/2,i.top+(i.height-e.height*o)/2,e.width*o,e.height*o)}else this.context.drawImage(e,i.left,i.top,i.width,i.height)},t.prototype.fillRect=function(t,e){this.context&&(this.drawRect(t),e&&(this.context.fillStyle=this.getColorValue(e),this.context.fill()))},t.prototype.strokeRect=function(t,e,n,i){if(this.context&&!t.isAreaEmpty()){var r=new o.a;r.rectangle(t),this.strokeGeometry(r,e,n,i)}},t.prototype.strokeLine=function(t,e,n,i,o){this.context&&(this.context.save(),this.drawLine(t,e),o&&o.dashPattern&&this.context.setLineDash(o.dashPattern),n&&(this.context.strokeStyle=this.getColorValue(n),this.context.stroke()),this.context.restore())},t.prototype.fillGeometry=function(t,e){this.context&&(this.drawGeometry(t),e&&(this.context.fillStyle=this.getColorValue(e),this.context.fill()))},t.prototype.strokeGeometry=function(t,e,n,o){if(this.context){this.context.save();var r=null;0===n&&(r=this.getCTM(),this.setCTM(i.e.identityMatrix())),this.drawGeometry(t,r),o&&o.dashPattern&&this.context.setLineDash(o.dashPattern),e&&(n&&(this.context.lineWidth=n),this.context.strokeStyle=this.getColorValue(e),this.context.stroke()),r&&this.setCTM(r),this.context.restore()}},t.prototype.fillEllipse=function(t,e){if(this.context){var n=new o.a;n.ellipse(t),this.fillGeometry(n,e)}},t.prototype.strokeEllipse=function(t,e,n,i){if(this.context){var r=new o.a;r.ellipse(t),this.strokeGeometry(r,e,n,i)}},t.prototype.drawMarker=function(t,e,n,i,o,r){this.context&&(this.context.save(),this.context.beginPath(),r&&this.context.setLineDash(r),this.context.arc(t.x,t.y,e,0,2*Math.PI,!1),this.context.closePath(),i&&(this.context.fillStyle=this.getColorValue(i),this.context.fill()),n&&(o&&(this.context.lineWidth=o),this.context.strokeStyle=this.getColorValue(n),this.context.stroke()),this.context.restore())},t.prototype.clearRect=function(t,e,n,i){this.context&&this.context.clearRect(t,e,n,i)},t.prototype.clipRect=function(t){this.context&&t&&!t.isAreaEmpty()&&(this.drawRect(t),this.context.clip())},t.prototype.clipGeometry=function(t){this.context&&(this.drawGeometry(t),this.context.clip())},t.prototype.paintClipGeometries=function(t,e){if(this.context&&e){this.context.save(),t&&(this.context.fillStyle=this.getColorValue(t));for(var n=0,i=e.length;n<i;++n)if(e[n].geometry){var o=e[n].geometry.paths;o&&(this.drawGeometryPaths(o,e[n].matrix),this.context.fill())}this.context.restore()}},t.prototype.setImageSmoothingEnabled=function(t){this.context.mozImageSmoothingEnabled=t,this.context.msImageSmoothingEnabled=t,this.context.imageSmoothingEnabled=t},t.prototype.createLinearGradient=function(t){for(var e=this.context.createLinearGradient(t.startPoint.x,t.startPoint.y,t.endPoint.x,t.endPoint.y),n=0;n<t.stops.length;n++)e.addColorStop(t.stops[n][0],t.stops[n][1]);return e},t.prototype.fillText=function(t,e,n,i){this.context&&t&&(this.context.save(),n&&(this.context.fillStyle=this.getColorValue(n)),i&&(this.context.textAlign=i),this.context.font=t,this.context.fillText(e,0,0),this.context.restore())},t.prototype.concatCTM=function(t){this.context&&this.multiplyTransform(t)},t.prototype.createFontFace=function(t,e,n){var o="";switch(e){case i.d.GFontStyle.kGFontStyleRegular:o="";break;case i.d.GFontStyle.kGFontStyleBold:o="bold ";break;case i.d.GFontStyle.kGFontStyleItalic:o="italic ";break;case i.d.GFontStyle.kGFontStyleBoldItalic:o="italic bold "}return o+n+"pt "+t},t.prototype.init=function(){this.context=this.canvas.getContext("2d");var t=i.e.identityMatrix();this.context.setTransform(t.a,t.b,t.c,t.d,t.e,t.f),this.context.save()},t.prototype.getColorValue=function(t){return i.a.isInstanceOfPdfColor(t)?t.toString():t},t.prototype.drawLine=function(t,e){this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(e.x,e.y),this.context.closePath()},t.prototype.drawRect=function(t){this.context.beginPath(),this.context.moveTo(t.left,t.top),this.context.lineTo(t.right,t.top),this.context.lineTo(t.right,t.bottom),this.context.lineTo(t.left,t.bottom),this.context.closePath()},t.prototype.sharpPoint=function(t){var e=i.e.point(parseInt(t.x),parseInt(t.y));return e.offset(.5,.5),e},t.prototype.drawGeometryPaths=function(t,e){this.context.beginPath();for(var n=0,o=t.length;n<o;++n){var r=t[n];if(r)switch(r.type){case i.d.pdfClipPath.moveTo:var s=r.data.copy();e&&(s=e.mapPoint(s),s=this.sharpPoint(s)),this.context.moveTo(s.x,s.y);break;case i.d.pdfClipPath.lineTo:s=r.data.copy(),e&&(s=e.mapPoint(s),s=this.sharpPoint(s)),this.context.lineTo(s.x,s.y);break;case i.d.pdfClipPath.curve:var a=r.data[0].copy();e&&(a=e.mapPoint(a),a=this.sharpPoint(a));var c=r.data[1].copy();e&&(c=e.mapPoint(c),c=this.sharpPoint(c));var u=r.data[2].copy();e&&(u=e.mapPoint(u),u=this.sharpPoint(u)),this.context.bezierCurveTo(a.x,a.y,c.x,c.y,u.x,u.y);break;case i.d.pdfClipPath.close:this.context.closePath()}}},t.prototype.drawGeometry=function(t,e){var n=t.getPaths();!n||n.length<=0||this.drawGeometryPaths(n,e)},t.prototype.multiplyTransform=function(t){t||(t=i.e.identityMatrix()),this.setCTM(t.multiply(this.ctm))},t}()},"97Va":function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return r}),n.d(e,"c",function(){return s});var i=n("6okS"),o={id:"undoRedo-group",text:"UndoRedo group",moreGroup:!0,buttons:[{id:"undo",text:Object(i.a)("Undo"),disabled:1,selected:0,divider:0,expandable:0,handler:"undo",tooltip:{text:Object(i.a)("Undo (Ctrl + Z)"),description:Object(i.a)("Undo the last action.")},svg:{xlinkHref:"ic-undo"}},{id:"redo",text:Object(i.a)("Redo"),disabled:1,selected:0,divider:0,expandable:0,handler:"redo",tooltip:{text:Object(i.a)("Redo (Ctrl + Y)"),description:Object(i.a)("Redo the last action.")},svg:{xlinkHref:"ic-redo"}}]},r=(Object(i.a)("Home"),Object(i.a)("Home"),Object(i.a)("Home"),{id:"actions-group",text:"Actions group",moreGroup:!0,buttons:[{id:"reset",text:Object(i.a)("Reset"),disabled:1,selected:0,divider:0,expandable:0,handler:"reset",tooltip:{text:Object(i.a)("Reset"),description:Object(i.a)("Reset to the original")},svg:{xlinkHref:"ic-reset"}}]}),s={id:"zoomInOut-group",text:"zoomInOut group",moreGroup:!0,buttons:[{id:"zoomIn",text:Object(i.a)("Zoom In"),disabled:0,selected:0,divider:0,expandable:0,handler:"zoomIn",tooltip:{text:Object(i.a)("Zoom In (Ctrl ++)"),description:Object(i.a)("Zoom In")},svg:{xlinkHref:"ic-zoomIn"}},{id:"zoomOut",text:Object(i.a)("Zoom Out"),disabled:0,selected:0,divider:0,expandable:0,handler:"zoomOut",tooltip:{text:Object(i.a)("Zoom Out (Ctrl +-)"),description:Object(i.a)("Zoom Out")},svg:{xlinkHref:"ic-zoomOut"}},{id:"actualSize",text:Object(i.a)("Actual size"),disabled:0,selected:0,divider:0,expandable:0,handler:"",tooltip:{text:Object(i.a)("Actual size  (Ctrl +-)"),description:Object(i.a)("Actual size")},svg:{xlinkHref:"ic-actualSize"}},{id:"fitToScreen",text:Object(i.a)("Fit to screen"),disabled:0,selected:0,divider:0,expandable:0,handler:"",tooltip:{text:Object(i.a)("Fit to screen (Ctrl +-)"),description:Object(i.a)("Fit to screen")},svg:{xlinkHref:"ic-fitScreen"}}]};Object(i.a)("Share"),Object(i.a)("Share"),Object(i.a)("Share")},BAfr:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("CcnG"),o=function(){function t(){this.onToggleTab=new i.EventEmitter,this.onChangeTabContent=new i.EventEmitter,this.onSelectTabGroup=new i.EventEmitter,this.onUploaded=new i.EventEmitter,this.isExpanded=!0}return t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){},t.prototype.isShow=function(){return"photomontage-tab-group"!==this.selectedTabGroupId},t.prototype.toggle=function(){this.isExpanded=!this.isExpanded},t.prototype.onZoomChanged=function(t){this.previewRef&&this.previewRef.docStateChanged(t)},t.prototype.onScrollStateChanged=function(t){this.previewRef&&this.previewRef.scrollStateChanged(t)},t.prototype.onCommandAppPreview=function(t){},t}()},BWpt:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},CZDQ:function(t,e,n){"use strict";var i=n("exf4"),o=n("pz3r"),r=n("GG9H"),s=n("NMv8"),a=function(t){var e=i.e.identityMatrix();e=e.multiply(i.e.scalingMatrix(t.size.width,t.size.height));var n=i.e.scalingMatrix((t.size.width+10)/t.size.width,(t.size.height+4)/t.size.height).multiply(i.e.translationMatrix(-5,2));return e=e.multiply(n),t.reflect&&(e=e.multiply(i.e.reflectYMatrix())),(e=e.multiply(i.e.rotationMatrix(t.rotation))).multiply(i.e.translationMatrix(t.position.x,t.position.y))},c=function(t){var e={position:i.e.point(),size:i.e.size(),rotation:0,reflect:!1};e.size.width=Math.sqrt(t.a*t.a+t.b*t.b);var n=t.b/e.size.width,o=t.a/e.size.width;e.rotation=Math.atan2(n,o),e.size.height=t.d*o-t.c*n,e.size.height<0?(e.size.height=-e.size.height,e.reflect=!0):e.reflect=!1,e.size.width-=10,e.size.height-=4,e.position.x=0,e.position.y=0;var r=a(e).invert();return r=r.multiply(t),e.position.x=r.e,e.position.y=r.f,e},u=function(t,e){var n=i.e.quad();return n.tl=t.mapPoint(i.e.point(e.left,e.top)),n.tr=t.mapPoint(i.e.point(e.right,e.top)),n.bl=t.mapPoint(i.e.point(e.left,e.bottom)),n.br=t.mapPoint(i.e.point(e.right,e.bottom)),n},l=function(t,e,n){var l=t,h=e,p=l.getPage(h),d=n,f=null,g=null,m=i.d.TransformType.TRANSFORM_NONE,v=i.e.identityMatrix(),y=i.e.identityMatrix(),b={},P=this;P.updateTransform=function(){var t={position:i.e.point(),size:i.e.size(),rotation:0,reflect:!1};t.position=d.rect.leftTop(),t.size=d.rect.getSize(),t.rotation=d.rotate,t.reflect=d.reflect,v=a(t)},P.updateTransform(),P.getDocument=function(){return l},P.getTextBlock=function(){return d},P.getPageIndex=function(){return h},P.getBBox=function(){var t=P.getUserSpaceRect();return v.mapRect(t)},P.isPerformingOperation=function(){return m!=i.d.TransformType.TRANSFORM_NONE},P.getOperationType=function(){return m},P.startOperation=function(t){m=t,y=v.copy()},P.endOperation=function(t){var e=new o.a;if(g=null,!v.isEqual(y)){var n=c(y),r=m;switch(r){case i.d.TransformType.TRANSFORM_MOVE:case i.d.TransformType.TRANSFORM_ROTATE:case i.d.TransformType.TRANSFORM_SCALE:case i.d.TransformType.TRANSFORM_RESIZE_BLOCK:var a=i.e.rect(n.position.x,n.position.y,n.position.x+n.size.width,n.position.y-n.size.height);return m=i.d.TransformType.TRANSFORM_NONE,t||(e.reject(),t=e.promise),t().then(function(){s.a.transform(l,h,d,a,n.rotation,n.reflect,r===i.d.TransformType.TRANSFORM_SCALE).then(function(){P.updateTransform()})})}}return m=i.d.TransformType.TRANSFORM_NONE,e.reject(),e.promise},P.delete=function(){d.isDeleted=!0,s.a.delete(l,h,d)},P.getTransform=function(){return v},P.setOperationTransform=function(t){var e=p.getCropBox();y=r.a.correctCTMToRespectPageBox(e,P.getUserSpaceRect(),t)},P.getOperationTransform=function(){return y},P.getRotationOrigin=function(){return P.getBounds().getCenter()},P.getUserSpaceRect=function(){return i.e.rect(0,0,1,-1)},P.getSnapOperationBounds=function(){var t=c(y),e=i.e.scalingMatrix(t.size.width,t.size.height);return t.reflect&&(e=e.multiply(i.e.reflectYMatrix)),e=(e=e.multiply(i.e.rotationMatrix(t.rotation))).multiply(i.e.translationMatrix(t.position.x,t.position.y)),u(e,P.getUserSpaceRect())},P.getOperationBounds=function(){return u(y,P.getUserSpaceRect())},P.getRotateAnchor=function(t){var e=P.getUserSpaceRect(),n=Math.abs(e.top-e.bottom),o=P.getBounds();o=t.mapQuadToDevice(0,o);var r=20/i.e.pointsDistance(o.top_left(),o.bottom_left())*n,s=i.e.point(e.min_x()+e.getWidth()/2,e.max_y()+r);return v.mapPoint(s)},P.getDeleteAnchor=function(t,e,n){e||(e=0),n||(n=0);var o=P.getUserSpaceRect(),r=Math.abs(o.top-o.bottom),s=Math.abs(o.left-o.right),a=P.getBounds();a=t.mapQuadToDevice(0,a);var c=i.e.pointsDistance(a.top_left(),a.top_right()),u=i.e.pointsDistance(a.top_left(),a.bottom_left()),l=(2*i.f.LookAndFeel.TransformerDeleteZoneRadius+e)/u*r,h=(2*i.f.LookAndFeel.TransformerDeleteZoneRadius+n)/c*s,p=i.e.point(o.max_x()+h,o.max_y()+l);return v.mapPoint(p)},P.getBounds=function(){return u(v,P.getUserSpaceRect())};var _=function(t,e,n){var o=i.e.pointsSquareDistance(t,e);if(0==o)return i.e.pointsDistance(n,t);var r=i.e.vecDotProduct(i.e.point(n.x-t.x,n.y-t.y),i.e.point(e.x-t.x,e.y-t.y))/o;return i.e.pointsDistance(n,r<0?t:r>1?e:i.e.point(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y)))};P.hitTest=function(t){var e=P.getBounds();return 3>=_(e.tl,e.tr,t)||3>=_(e.bl,e.br,t)||3>=_(e.tl,e.bl,t)||3>=_(e.tr,e.br,t)},P.getPosition_PropertyTest=function(){var t=m===i.d.TransformType.TRANSFORM_NONE?v.copy():y.copy();return c(t).position},P.getRotation_PropertyTest=function(){var t=m===i.d.TransformType.TRANSFORM_NONE?v.copy():y.copy();return c(t).rotation},P.getScaling_PropertyTest=function(){var t=m===i.d.TransformType.TRANSFORM_NONE?v.copy():y.copy();c(t)},P.setSnapData=function(t){f=t},P.getSnapData=function(){return f},P.setSnapInfo=function(t){g=t},P.getSnapInfo=function(){return g};var w=i.d.EditModes.Properties|i.d.EditModes.Move|i.d.EditModes.Rotate|i.d.EditModes.Resize|i.d.EditModes.Remove,x=w;P.setCurrentEditMode=function(t){x=t},P.hasAnyCurrentEditMode=function(t){return!!(x&t)},P.hasAnyEditMode=function(t){return!!(w&t)},P.addActionButton=function(t,e){b[t]=e},P.getAllActionButtons=function(){return b},P.getActionButtonById=function(t){return b[t]}};e.a={createInstance:function(t,e,n){return new l(t,e,n)}}},CasB:function(t,e,n){"use strict";var i=n("exf4"),o=n("21MZ"),r=function(){function t(){this.snapPen=i.f.LookAndFeel.SnapLinesColor,this.whiteBrush=i.a.createInstance("#FFFFFFFF")}return t.prototype.init=function(t,e){this.documentView_=t,this.transformer_=e},t.prototype.getType=function(){return"Transform"},t.prototype.getNumQuads=function(){return 1},t.prototype.getQuadPoints=function(){return this.transformer_.getBounds()},t.prototype.getSelectionData=function(){return this.transformer_},t.prototype.drawHighlight=function(t,e){if(e==this.transformer_.getPageIndex()){var n=i.f.LookAndFeel.ImageTransformerHighlightColor,r=this.transformer_.getBounds();o.b.drawFrame(t,r,null,n),o.b.drawFrame(t,r,null,"#FFFFFF",[10,5])}},t.prototype.draw=function(t,e){if(e==this.transformer_.getPageIndex()){this._drawClipArea(t,this.transformer_.getElement());var n=i.f.LookAndFeel.ImageTransformerFrameColor,r=null;if(this.transformer_.isPerformingOperation()){var s=this.transformer_.getBounds();o.b.drawFrame(t,s,null,n,[10]),r=this.transformer_.getOperationBounds();var a=i.e.quadFromRect(r.getBound());o.b.drawFrame(t,a,null,this.snapPen);var c=this.transformer_.getSnapInfo();c&&o.b.drawSnapInfo(t,c,this.snapPen)}else r=this.transformer_.getBounds();o.b.drawFrame(t,r,null,n);var u=i.f.LookAndFeel.TransformerAnchorRadius,l=i.f.LookAndFeel.TransformerOriginRadius,h=r.getCenter();if(this.transformer_.isPerformingOperation())switch(this.transformer_.getOperationType()){case i.d.TransformType.TRANSFORM_MOVE:break;case i.d.TransformType.TRANSFORM_ROTATE:case i.d.TransformType.TRANSFORM_SCALE:o.b.drawOrigin(t,this.whiteBrush,n,h,u,l)}else{this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize|i.d.EditModes.Rotate)&&o.b.drawMarker(t,this.whiteBrush,n,r.top_left(),u),this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Move|i.d.EditModes.Resize|i.d.EditModes.Rotate)&&o.b.drawMarker(t,this.whiteBrush,n,r.top_right(),u),this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize|i.d.EditModes.Rotate)&&(o.b.drawMarker(t,this.whiteBrush,n,r.bottom_right(),u),o.b.drawMarker(t,this.whiteBrush,n,r.bottom_left(),u));var p=this.documentView_.mapRectToDevice(e,r.getBound()),d=i.e.quadFromRect(p),f=i.f.LookAndFeel.TransformerScaleZoneRadius;this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize|i.d.EditModes.Rotate)&&i.e.pointsDistance(d.center_right(),d.center_left())>=3*f&&(o.b.drawMarker(t,this.whiteBrush,n,r.top_center(),u),o.b.drawMarker(t,this.whiteBrush,n,r.bottom_center(),u)),this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize|i.d.EditModes.Rotate)&&i.e.pointsDistance(d.top_center(),d.bottom_center())>=3*f&&(o.b.drawMarker(t,this.whiteBrush,n,r.center_right(),u),o.b.drawMarker(t,this.whiteBrush,n,r.center_left(),u))}}},t.prototype.hitTest=function(t,e){return t==this.transformer_.getPageIndex()&&this.transformer_.hitTest(e)},t.prototype.getDestination=function(){var t={};return t.pPageIndex=this.transformer_.getPageIndex(),t.pRect=this.transformer_.getBBox(),t},t.prototype._drawClipArea=function(t,e){var n=e.clip;n&&t.paintClipGeometries(i.f.LookAndFeel.ImageTransformerClippingColor,n)},t}(),s=n("5HBy"),a=n("osi3"),c=function(){function t(t,e,n,o){this.doc_=t,this.pageIndex_=e,this.element=n,this.snapData_=o,this.snapInfo__=null,this.operation_=i.d.TransformType.TRANSFORM_NONE,this.transform_=i.e.identityMatrix(),this.newTransform_=this.transform_.copy(),this.element_=null,this._editModes=i.d.EditModes.Properties|i.d.EditModes.Move|i.d.EditModes.Rotate|i.d.EditModes.Resize|i.d.EditModes.Remove,this._currentEditMode=this._editModes,this.init(n),this.page_=t.getPage(e)}return t.prototype.init=function(t){this.element_=t,this.transform_=t.matrix?t.matrix.copy():i.e.identityMatrix(),this.newTransform_=this.transform_.copy()},t.prototype.changeMatrix=function(t){t&&(this.element&&(this.element.matrix=t.copy()),this.transform_=t.copy())},t.prototype.getDocument=function(){return this.doc_},t.prototype.getElement=function(){return this.element_},t.prototype.getPageIndex=function(){return this.pageIndex_},t.prototype.getBBox=function(){return this.element_.boundRect},t.prototype.isPerformingOperation=function(){return this.operation_!=i.d.TransformType.TRANSFORM_NONE},t.prototype.getOperationType=function(){return this.operation_},t.prototype.startOperation=function(t){this.operation_=t,this.newTransform_=this.transform_.copy()},t.prototype.endOperation=function(){this.snapInfo__=null,this.transform_.isEqual(this.newTransform_)||this.changeMatrix(this.newTransform_),this.operation_=i.d.TransformType.TRANSFORM_NONE},t.prototype.getTransform=function(){return this.transform_},t.prototype.setOperationTransform=function(t){var e=this.page_.getCropBox();this.newTransform_=a.a.correctCTMToRespectPageBox(e,this.getUserSpaceRect(),t)},t.prototype.getOperationTransform=function(){return this.newTransform_},t.prototype.getRotationOrigin=function(){return this.getBounds().getCenter()},t.prototype.getUserSpaceRect=function(){var t=this.element_.getQuad();return this.transform_.invert().mapQuad(t).getBound()},t.prototype.getOperationBounds=function(){var t=this.element_.getQuad(),e=this.transform_.invert();return this.newTransform_.mapQuad(e.mapQuad(t))},t.prototype.getBounds=function(){return this.element_.getQuad().copy()},t.prototype.hitTest=function(t){var e=this.transform_.invert();if(!e)return!1;var n=e.mapPoint(t);return this.getUserSpaceRect().containsPoint(n)},t.prototype.deleteElement=function(){},t.prototype.getPosition_PropertyTest=function(){var t=this.operation_===i.d.TransformType.TRANSFORM_NONE?this.transform_.copy():this.newTransform_.copy();return this._matrixDecompose(t).position},t.prototype.getRotation_PropertyTest=function(){var t=this.operation_===i.d.TransformType.TRANSFORM_NONE?this.transform_.copy():this.newTransform_.copy();return this._matrixDecompose(t).rotation},t.prototype.setRotation=function(t){var e=this._matrixDecompose(this.transform_);e.rotation=t;var n=this._matrixCompose(e);this.changeMatrix(n)},t.prototype.getScaling_PropertyTest=function(){var t=this.operation_===i.d.TransformType.TRANSFORM_NONE?this.transform_.copy():this.newTransform_.copy();return this._matrixDecompose(t).scaling},t.prototype.setSnapData=function(t){this.snapData_=t},t.prototype.getSnapData=function(){return this.snapData_},t.prototype.setSnapInfo=function(t){this.snapInfo__=t},t.prototype.getSnapInfo=function(){return this.snapInfo__},t.prototype.setCurrentEditMode=function(t){this._currentEditMode=t},t.prototype.hasAnyCurrentEditMode=function(t){return!!(this._currentEditMode&t)},t.prototype.hasAnyEditMode=function(t){return!!(this._editModes&t)},t.prototype._matrixDecompose=function(t){var e={scaling:i.e.size(),rotation:0,shear:0,position:i.e.point()};e.scaling.width=Math.sqrt(t.a*t.a+t.b*t.b);var n=t.b/e.scaling.width,o=t.a/e.scaling.width;return e.rotation=Math.atan2(n,o),e.scaling.height=t.d*o-t.c*n,e.shear=(t.c+t.d-e.scaling.height*(o-n))/e.scaling.height*(o+n),e.position.x=t.e,e.position.y=t.f,e},t.prototype._matrixCompose=function(t){return i.e.scalingMatrix(t.scaling.width,t.scaling.height).multiply(i.e.rotationMatrix(t.rotation)).multiply(i.e.translationMatrix(t.position.x,t.position.y))},t}(),u=function(){function t(){}return t.createAndSetTransformer=function(t,e,n,o){var r=null;if(!t||e<0||!n)return r;var s=t.document;if(!s)return r;var a=new c(s,e,n,null);return o?t.setHighlightNamed(i.h.Transform,a):(t.resetSelection(!0),t.setHighlight(null),r=t.setSelectionAndTool(i.h.Transform,a)),r},t}(),l=function(){function t(){}return t.selectObject=function(t,e,n){var i={selected:!1,inputHandler:null};if(!t||!e)return i;if("Transform"!==e.getObjectType())return i;var o=e.getData().getElement(),r=e.getPageIndex();return r<0?i:(i.inputHandler=u.createAndSetTransformer(t,r,o,n),i.selected=!0,i)},t}(),h=function(){function t(){}return t.selectObject=function(t,e,n){var i={selected:!1,inputHandler:null};if(!t||!e)return i;n||t.resetSelection(!0);var o=e.getObjectType(),r=this.m_Store[o];return r?r.selectObject(t,e,n):i},t.addObjectToSelection=function(t,e){var n=t.getSelection();if(!n)return this.selectObject(t,e,!1);var i=n.getType();return this.m_Store[i]?{selected:!1,inputHandler:null}:this.selectObject(t,e,!1)},t.m_Store={Transform:l,TextEdit:s.d},t}(),p=function(){function t(t,e,n,o){this.doc_=t,this.pageIndex_=e,this.objects_=n,this.snapData_=o,this.snapInfo_=null,this.operation_=i.d.TransformType.TRANSFORM_NONE,this.transform_=i.e.identityMatrix(),this.newTransform_=this.transform_.copy(),this.userSpaceRect_=i.e.rect(),this.page_=t.getPage(e),this.resetUserSpaceRect()}return t.prototype.resetUserSpaceRect=function(){for(var t,e=!1,n=0;n<this.objects_.length;n++)t=this.objects_[n].getBounds(),e?this.userSpaceRect_=i.e.unionRects(this.userSpaceRect_,t.getBound()):(this.userSpaceRect_=t.getBound(),e=!0)},t.prototype.getDoc=function(){return this.doc_},t.prototype.getPageIndex=function(){return this.pageIndex_},t.prototype.getObjects=function(){return this.objects_},t.prototype.removeObject=function(t){for(var e=this.objects_.length;e--;)if(e==t){var n=this.objects_.indexOf(t);n>-1&&this.objects_.splice(n,1),this.resetUserSpaceRect();break}},t.prototype.isPerformingOperation=function(){return this.operation_!=i.d.TransformType.TRANSFORM_NONE},t.prototype.getOperationType=function(){return this.operation_},t.prototype.startOperation=function(t){this.operation_=t,this.newTransform_=this.transform_.copy()},t.prototype.endOperation=function(){this.snapInfo_=null,this.operation_=i.d.TransformType.TRANSFORM_NONE},t.prototype.getUserSpaceRect=function(){return this.userSpaceRect_},t.prototype.getTransform=function(){return this.transform_},t.prototype.setOperationTransform=function(t){this.newTransform_=t},t.prototype.getOperationTransform=function(){return this.newTransform_},t.prototype.getRotationOrigin=function(){return this.getBounds().getCenter()},t.prototype.getOperationBounds=function(){var t=i.e.quadFromRect(this.getUserSpaceRect());return this.newTransform_.mapQuad(t)},t.prototype.getBounds=function(){var t=i.e.quadFromRect(this.getUserSpaceRect());return this.transform_.mapQuad(t)},t.prototype.hitTest=function(t){for(var e=0;e<this.objects_.length;e++)if(this.objects_[e].hitTestPoint(t))return!0;return!1},t.prototype.delete=function(){},t.prototype._matrixDecompose=function(t){var e={scaling:i.e.size(),rotation:0,shear:0,position:i.e.point()};e.scaling.width=Math.sqrt(t.a*t.a+t.b*t.b);var n=t.b/e.scaling.width,o=t.a/e.scaling.width;return e.rotation=Math.atan2(n,o),e.scaling.height=t.d*o-t.c*n,e.shear=(t.c+t.d-e.scaling.height*(o-n))/e.scaling.height*(o+n),e.position.x=t.e,e.position.y=t.f,e},t.prototype.getPosition_PropertyTest=function(){var t=this.operation_===i.d.TransformType.TRANSFORM_NONE?this.transform_.copy():this.newTransform_.copy();return this._matrixDecompose(t).position},t.prototype.getRotation_PropertyTest=function(){var t=this.operation_===i.d.TransformType.TRANSFORM_NONE?this.transform_.copy():this.newTransform_.copy();return this._matrixDecompose(t).rotation},t.prototype.getScaling_PropertyTest=function(){var t=this.operation_===i.d.TransformType.TRANSFORM_NONE?this.transform_.copy():this.newTransform_.copy();return this._matrixDecompose(t).scaling},t.prototype.setSnapData=function(t){this.snapData_=t},t.prototype.getSnapData=function(){return this.snapData_},t.prototype.setSnapInfo=function(t){this.snapInfo_=t},t.prototype.getSnapInfo=function(){return this.snapInfo_},t}(),d=n("+R3h"),f=n("dwNZ"),g=function(){function t(){}return t.createSelection=function(t){var e=null;switch(t){case i.h.Transform:e=new r;break;case i.h.TextEdit:e=f.a.createTextEditSelection();break;case i.h.TextEditHighlight:e=f.a.createTextEditHighlightSelection()}return e},t}(),m=[d.a,s.c],v=function(t,e,n,o){for(var r=null,s=t.document,c=n.length;c>0;--c){var u=n[c-1];if(u)switch(u.type){case i.d.PDEElementType.kPDEElementContainer:if(!a.a.shouldSkipContainer(u)&&u.isVisible&&(r=v(t,e,u.content,o)))return r;break;default:for(var l=0;l<m.length;l++){var h=m[l].createEditObjectByPagePoint(s,e,u,o);if(h)return h}}}return null},y=function(){function t(){}return t.createEditObjectByPagePoint=function(t,e,n){if(!t||e<0||!n)return null;var i=t.document;if(!i)return null;var o=i.getPage(e);return o&&o.isLoaded?v(t,e,o.content,n):null},t}();n.d(e,"d",function(){return p}),n.d(e,"a",function(){return h}),n.d(e,"e",function(){return g}),n.d(e,"c",function(){return a.a}),n.d(e,"b",function(){return y})},CkTg:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n("CcnG"),o=n("5HBy"),r=n("rrFr"),s=n.n(r),a=n("RdDz"),c=n.n(a),u=n("ukOs"),l=n("exf4"),h=(n("jkSe"),n("Tzdt"),n("Ui+l")),p=n("p9KE"),d=n("HzAC"),f=function(){function t(t,e,n){var o=this;this.pageRenderService=t,this.translate=e,this.inputhandlersFactoryService=n,this.currentDocument=null,this.documentLoaded=new i.EventEmitter,this.onChangeState=new i.EventEmitter,this.onScrollChangeState=new i.EventEmitter,this.documentIds=[],this.documentViews=[],this.toolType=l.h.Brush,this.subscription=this.translate.onLangChange.subscribe(function(t){o.currentDocument&&o.currentDocument.invalidate()})}return t.prototype.ngOnDestroy=function(){this.getInfoSubscription&&this.getInfoSubscription.unsubscribe(),this.getDocumentsInfoSubscription&&this.getDocumentsInfoSubscription.unsubscribe(),this.currentDocument&&this.currentDocument.destroy(),this.subscription&&this.subscription.unsubscribe(),this.changeToolSubscription&&this.changeToolSubscription.unsubscribe()},Object.defineProperty(t.prototype,"isCurrentDocumentView",{get:function(){return null!==this.currentDocument},enumerable:!0,configurable:!0}),t.prototype.upload=function(t,e,n){t&&(this.documentIds=t.map(function(t){return t.id}),this.createDocumentViews(t),this.open(t[0],n&&n.current))},t.prototype.draw=function(t){this.currentDocument&&this.currentDocument.draw(t)},t.prototype.getViewSize=function(){return this.currentDocument.getViewSize()},t.prototype.resizeView=function(t){return this.currentDocument.resizeView(t)},t.prototype.initialize=function(t,e,n,i){return this.currentDocument.initialize(t,e,n,i)},t.prototype.dispatchEvent=function(t,e){return this.currentDocument.dispatchEvent(t,e)},t.prototype.getCursor=function(){return this.currentDocument?this.currentDocument.getCursor():null},t.prototype.resize=function(t){this.currentDocument&&this.currentDocument.resizeView(t)},t.prototype.set=function(t){-1===this.currentDocument.renderTargetCallbacks.indexOf(t)&&this.currentDocument.renderTargetCallbacks.push(t)},t.prototype.toNextPage=function(){var t=this.documentIds.indexOf(this.currentDocument.documentId);if(!(++t>=this.documentIds.length)){var e=this.documentViews[this.documentIds[t]];e&&this.open(e.document)}},t.prototype.toPrevPage=function(){var t=this.documentIds.indexOf(this.currentDocument.documentId);if(!(--t<0)){var e=this.documentViews[this.documentIds[t]];e&&(e.goToPageRect(e.getDocument().getNumPages()-1,l.e.rect()),this.open(e.document))}},t.prototype.reset=function(){if(this.currentDocument){var t=this.currentDocument.renderTargetCallbacks.indexOf(this.currentDocument.renderTargetCallback);~t&&this.currentDocument.renderTargetCallbacks.splice(t,1)}},t.prototype.resetSelection=function(){this.currentDocument&&(this.currentDocument.setHighlight(null),this.currentDocument.resetSelection(!0))},t.prototype.updateState=function(t,e,n,i,o){this.documentIds&&this.documentViews&&(this.updateStateAllDocuments(t,e),this.onChangeState.emit({id:"zoom",value:{zoom:e,offset:n,zoomType:t,size:i,viewSize:o}}))},t.prototype.updateScrollState=function(t,e){this.onScrollChangeState.emit({scrollType:t,newPos:e})},t.prototype.setActiveTool=function(t,e,n){void 0===n&&(n=!1),this.currentDocument&&this.currentDocument.setActiveTool(t,e,n)},t.prototype.setContent=function(t){this.currentDocument&&this.currentDocument.setPageContent(t)},t.prototype.fillContent=function(t){this.currentDocument.fillContent(t)},t.prototype.download=function(t,e,n){t&&(this.resetSelection(),setTimeout(function(){var i=t.toDataURL(),o=c()(i.split(",")[1],n||"image/png");s()(o,e||"download.png","application/octet-stream")},500))},t.prototype.open=function(t,e){if(t){var n=this.documentViews[t.id];this.setCurrentDocument(n),o.f.add(n);var i=e&&e.params;i?this.setActiveTool(i.toolType,i.params):this.setActiveTool(this.toolType)}},t.prototype.updateStateAllDocuments=function(t,e){if(this.documentIds)for(var n=0;n<this.documentIds.length;n++)this.documentViews[this.documentIds[n]]&&this.documentViews[this.documentIds[n]].document&&(this.documentViews[this.documentIds[n]].document.zoom=e,this.documentViews[this.documentIds[n]].document.pageView=t)},t.prototype.setCurrentDocument=function(t){if(t){var e=null;if(this.currentDocument){var n=this.currentDocument.document,i=t.document;n&&i&&(e=n.id===i.id?this.currentDocument.getZoom():null)}this.currentDocument=t,u.a.documentId=this.currentDocument.documentId,this.currentDocument.isLoadedChanged(),this.subscribeOnChangeTool(this.currentDocument),this.documentLoaded.emit({documentView:this.currentDocument}),e&&this.currentDocument.setZoom(e)}},t.prototype.subscribeOnChangeTool=function(t){var e=this;t&&(this.changeToolSubscription&&this.changeToolSubscription.unsubscribe(),this.changeToolSubscription=t.onChangeTool.subscribe(function(t){t&&(e.toolType=t.type)}))},t.prototype.createDocumentViews=function(t,e){if(void 0===e&&(e=null),t)for(var n=0;n<t.length;n++){var i=t[n];if(i){var o=null==e?i.info:e[i.id];if(o){var r=new p.a(i.id,i.name,i.length);r.set(o);var s=new h.a(r,new d.a(this),this.pageRenderService,this.inputhandlersFactoryService);this.documentViews[i.id]=s}}}},t}()},"E+v5":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},EHI3:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("exf4"),o=n("kzdD"),r=n("z2eg"),s=n("R0Qz"),a=function(){function t(){}return t.createInstance=function(t){switch(t){case i.d.pdfDocumentView.continuous:return new o.a;case i.d.pdfDocumentView.overlay:return new r.a;case i.d.pdfDocumentView.mask:return new s.a;default:return console.error("DocumentView createInstance is unknown: "+t),null}},t}()},EMMA:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},EQv5:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("exf4"),o=n("iF9q"),r=function(){function t(t){this.documentViewComponent=t}return t.prototype.onScrollPositionChanged=function(t,e){i.d.bLScrollBarType.kBLScrollBarHorz===t?this.documentViewComponent.scrollLeft=e:i.d.bLScrollBarType.kBLScrollBarVert===t&&(this.documentViewComponent.scrollTop=e)},t.prototype.onDrawUpdated=function(){this.documentViewComponent.invalidate()},t.prototype.onScrollChanged=function(t,e){this.onScrollRangeChanged(t,e.range),this.onScrollPositionChanged(t,e.pos)},t.prototype.onScrollRangeChanged=function(t,e){i.d.bLScrollBarType.kBLScrollBarHorz===t?this.documentViewComponent.scrollElementNative.style.width=e+"px":i.d.bLScrollBarType.kBLScrollBarVert===t&&(this.documentViewComponent.scrollElementNative.style.height=e+"px")},t.prototype.onScrollVisibilityChanged=function(t,e){this.documentViewComponent.ignoreScrollEvents=!0,e?i.d.bLScrollBarType.kBLScrollBarHorz===t?this.documentViewComponent.clienSizeElementNative.style.overflowX="scroll":i.d.bLScrollBarType.kBLScrollBarVert===t&&(this.documentViewComponent.clienSizeElementNative.style.overflowY="scroll"):(i.d.bLScrollBarType.kBLScrollBarHorz===t?this.documentViewComponent.clienSizeElementNative.style.overflowX="visible":i.d.bLScrollBarType.kBLScrollBarVert===t&&(this.documentViewComponent.clienSizeElementNative.style.overflowY="visible"),i.d.bLScrollBarType.kBLScrollBarHorz===t?this.documentViewComponent.scrollElementNative.style.width="100%":i.d.bLScrollBarType.kBLScrollBarVert===t&&(this.documentViewComponent.scrollElementNative.style.height="100%")),this.documentViewComponent.resize()},t.prototype.onShowContextMenu=function(t,e,n,i){this.documentViewComponent.hoverField=i,this.documentViewComponent.onShowContextMenu.emit(e)},t.prototype.onCaretPositionChanged=function(t,e){var n=t?t.copy():i.e.point(),r=e?e.copy():i.e.point();this.documentViewComponent.caretPoints[0].isEqual(n)&&this.documentViewComponent.caretPoints[1].isEqual(r)||(0!=(this.documentViewComponent.pdrFlags&o.a.kPDR_IsCaretVisible)&&0==(this.documentViewComponent.pdrFlags&o.a.kPDR_IsDrawingNow)&&this.documentViewComponent.drawCaret(),this.documentViewComponent.caretPoints[0]=n,this.documentViewComponent.caretPoints[1]=r,this.documentViewComponent.drawCaret(),this.documentViewComponent.killCaretTimer(),this.documentViewComponent.setCaretTimer())},t}()},GG9H:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("6okS"),o=n("exf4"),r=function(){function t(){}return t.correctCTMToRespectPageBox=function(t,e,n){var i=n.mapQuad(o.e.quadFromRect(e));if(i.hasIntersectionRect(t))return n;var r=i.getBound();if(r.bottom>r.top){var s=r.bottom;r.bottom=r.top,r.top=s}var a=o.e.point(),c=r.getSize();return t.right>r.right&&r.left>t.left||(t.left>r.right?a.x=t.left-r.right+c.width:t.right<r.left&&(a.x=t.right-r.left-c.width)),t.top>r.top&&r.bottom>t.bottom||(t.bottom>r.top?a.y=t.bottom-r.top+c.height:t.top<r.bottom&&(a.y=t.top-r.bottom-c.height)),0==a.x&&0==a.y&&(t.left>r.left?a.x=t.left-r.left:t.right<r.right&&(a.x=t.right-r.right),t.top<r.top?a.y=t.top-r.top:t.bottom>r.bottom&&(a.y=t.bottom-r.bottom)),n.multiply(o.e.translationMatrix(a.x,a.y))},t.correctRectToRespectPageBox=function(t,e){if(e.hasIntersection(t))return e;var n=e.copy();if(n.bottom>n.top){var i=n.bottom;n.bottom=n.top,n.top=i}var r=o.e.point(),s=n.getSize();return t.right>n.right&&n.left>t.left||(t.left>n.right?r.x=t.left-n.right+s.width:t.right<n.left&&(r.x=t.right-n.left-s.width)),t.top>n.top&&n.bottom>t.bottom||(t.bottom>n.top?r.y=t.bottom-n.top+s.height:t.top<n.bottom&&(r.y=t.top-n.bottom-s.height)),0==r.x&&0==r.y&&(t.left>n.left?r.x=t.left-n.left:t.right<n.right&&(r.x=t.right-n.right),t.top<n.top?r.y=t.top-n.top:t.bottom>n.bottom&&(r.y=t.bottom-n.bottom)),n.offset(r.x,r.y),n},t.shouldSkipContainer=function(t){var e=!1;if(!i.j(t.artifact)){var n=t.artifact;"Background"!==n&&"PageNumber"!==n&&"Watermark"!==n&&"BatesN"!==n&&"Header"!==n||(e=!0)}return e},t}()},HK4e:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},HpxQ:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("6okS"),o=n("exf4"),r=n("c5EE"),s=function(){function t(){}return t.drawLine=function(t,e,n,i,r){var s=t.getCTM();t.setCTM(null);var a=s.mapPoint(e).floor(),c=o.e.point(a.x+.5,a.y+.5),u=s.mapPoint(n).floor(),l=o.e.point(u.x+.5,u.y+.5),h={};h.lineCap=o.d.GLineCap.kGLineCapFlat,h.lineJoin=o.d.GLineJoin.kGLineJoinMiter,r&&(h.dashPattern=r),t.strokeLine(c,l,i,0,h),t.setCTM(s)},t.drawMetricLine=function(t,e,n,i){var s=t.getCTM();t.setCTM(null);var a=s.mapPoint(e).floor(),c=o.e.point(a.x+.5,a.y+.5),u=s.mapPoint(n).floor(),l=o.e.point(u.x+.5,u.y+.5),h=o.e.point(l.x-c.x,l.y-c.y).vecNormalized();c.copy().offset(-h.x,-h.y),l.copy().offset(h.x,h.y);var p=o.e.point(h.y,-h.x),d=c.copy();d.offset(4*(h.x+p.x),4*(h.y+p.y));var f=c.copy();f.offset(4*(h.x-p.x),4*(h.y-p.y));var g=new r.a;g.beginFigure(c),g.lineTo(d),g.lineTo(f),g.endFigureClose(),i&&t.fillGeometry(g,i);var m=l.copy();m.offset(-4*(h.x-p.x),-4*(h.y-p.y));var v=l.copy();v.offset(-4*(h.x+p.x),-4*(h.y+p.y));var y=new r.a;y.beginFigure(l),y.lineTo(m),y.lineTo(v),y.endFigureClose(),i&&t.fillGeometry(y,i);var b={};b.lineCap=o.d.GLineCap.kGLineCapFlat,b.lineJoin=o.d.GLineJoin.kGLineJoinMiter,b.miterLimit=10;var P=c.copy();P.offset(5*p.x,5*p.y);var _=c.copy();_.offset(-5*p.x,-5*p.y),t.strokeLine(P,_,i,0,b);var w=l.copy();w.offset(5*p.x,5*p.y);var x=l.copy();x.offset(-5*p.x,-5*p.y),t.strokeLine(w,x,i,0,b),t.strokeLine(c,l,i,0,b),t.setCTM(s)},t.drawFrame=function(t,e,n,i,s,a){var c=t.getCTM();t.setCTM(null);var u=!a||a%2?.5:0,l=c.mapPoint(e.tl).floor(),h=o.e.point(l.x+u,l.y+u),p=c.mapPoint(e.tr).floor(),d=o.e.point(p.x+u,p.y+u),f=c.mapPoint(e.bl).floor(),g=o.e.point(f.x+u,f.y+u),m=c.mapPoint(e.br).floor(),v=o.e.point(m.x+u,m.y+u),y=new r.a;if(y.beginFigure(g),y.lineTo(v),y.lineTo(d),y.lineTo(h),y.endFigureClose(),n&&t.fillGeometry(y,n),i){var b={};b.lineCap=o.d.GLineCap.kGLineCapFlat,b.lineJoin=o.d.GLineJoin.kGLineJoinBevel,s&&(b.dashPattern=s),a||(a=0),t.strokeGeometry(y,i,a,b)}t.setCTM(c)},t.drawMarker=function(t,e,n,i,r,s,a){var c=t.getCTM();t.setCTM(null);var u=c.mapPoint(i).floor(),l=o.e.point(u.x+0,u.y+0),h=1==a?c.mapSize(o.e.size(r,r)).width:r;o.e.rect(l.x-h,l.y-h,l.x+h,l.y+h),t.drawMarker(l,h,n,e,s),t.setCTM(c)},t.drawOrigin=function(t,e,n,i,r,s){var a=t.getCTM();t.setCTM(null);var c=a.mapPoint(i).floor(),u=o.e.point(c.x+.5,c.y+.5),l=o.e.rect(u.x-s,u.y-s,u.x+s,u.y+s);if(e&&t.fillEllipse(l,e),n){t.strokeEllipse(l,n,0,null);var h=o.e.rect(u.x-r,u.y-r,u.x+r,u.y+r);t.fillEllipse(h,n)}t.setCTM(a)},t.drawSnapInfo=function(t,e,n){if(!i.j(e)){var o=e.guides;if(o.length>0)for(var r=[4],s=0;s<o.length;++s)this.drawLine(t,o[s].pointA,o[s].pointB,n,r);var a=e.distances;if(a.length>0)for(s=0;s<a.length;++s)this.drawMetricLine(t,a[s].pointA,a[s].pointB,n);var c=e.scales;if(c.length>0)for(s=0;s<c.length;++s)this.drawMetricLine(t,c[s].pointA,c[s].pointB,n)}},t}()},HzAC:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("exf4"),o=function(){function t(t){this.documentViewService=t}return t.prototype.onDrawUpdated=function(){this.documentViewService.currentDocument.invalidate()},t.prototype.onDrawPageView=function(t,e){for(var n=0;n<this.documentViewService.currentDocument.onDrawPageViewSubscribers.length;n++)this.documentViewService.currentDocument.onDrawPageViewSubscribers[n](e,t);var i=e.getCTM();e.setCTM(null),this.documentViewService.currentDocument.drawSelection(e,t),e.setCTM(i)},t.prototype.onScrollVisibilityChanged=function(t,e){this.documentViewService.currentDocument.fireEventOnScrollVisibilityChanged(t,e)},t.prototype.onScrollChanged=function(t,e){this.documentViewService.currentDocument.fireEventOnScrollChanged(t,e)},t.prototype.onScrollRangeChanged=function(t,e){this.documentViewService.currentDocument.fireEventOnScrollRangeChanged(t,e)},t.prototype.onScrollSizeChanged=function(t,e){this.documentViewService.currentDocument.fireEventOnScrollSizeChanged(t,e)},t.prototype.onScrollPositionChanged=function(t,e){this.documentViewService.currentDocument.fireEventOnScrollPositionChanged(t,e),this.documentViewService.updateScrollState(t,e)},t.prototype.onChangeState=function(t,e,n,o,r){this.documentViewService.updateState(1===e?i.d.pdfPageView.actualSize:t,i.g.floorZoom(e),n,o,r)},t.prototype.onRotateChanged=function(t){this.documentViewService.currentDocument.getDocument().rotate=t},t.prototype.onFocusPageChanged=function(t){this.documentViewService.currentDocument.document.pageSelectedIndex=t},t.prototype.onVisibleRangeChanged=function(t,e){},t.prototype.onNavigateToNextPage=function(){this.documentViewService.toNextPage()},t.prototype.onNavigateToPrevPage=function(){this.documentViewService.toPrevPage()},t}()},In1z:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("exf4"),o=function(){function t(){}return t.prototype.draw=function(t,e,n){var i=this.clock()/450;this.drawProgressRing(t,n,e,20,i)},t.prototype.fillCircle=function(t,e,n,o){var r=n.copy(),s=i.e.rect(r.x,r.y,r.x+o,r.y+o);r.offset(-o/2,-o/2),t.fillEllipse(s,e)},t.prototype.drawProgressRing=function(t,e,n,i,o){},t.prototype.clock=function(){return(new Date).getMilliseconds()},t}()},J9nD:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("6okS"),o=function(){function t(t){this.range=t,i.d(t)?(this._index=t[0],this._length=t[1]):(this._index=t,this._length=t)}return Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t}()},JTg7:function(t,e,n){"use strict";var i=n("CcnG"),o=n("y/7Y"),r=n("Y/XC"),s=n("exf4"),a=n("ey9i"),c=n("97Va"),u=function(){function t(t,e,n){var i=this;this.imageStoreService=t,this.eventsHandlerService=e,this.renderer=n,this.imageSize=s.e.size(),this.inflateFrame=.5,this.colorFrame="#686868",this.lineWithFrame=1,this.sliderValue=100,this.mouseDownCanvas=function(t){var e=i.getImageSize();i.ctx.clearRect(i.canvasCenterX-1,i.canvasCenterY-1,e.width+2,e.height+2),i.drawImage(),i.rectCenterX=t.offsetX-i.widthRect/2,i.rectCenterY=t.offsetY-i.heightRect/2,e.width-i.rectCenterX<i.widthRect&&(i.rectCenterX=e.width-i.widthRect),i.widthRect/2>i.rectCenterX&&(t.offsetX>e.width/2&&i.widthRect>e.width-i.rectCenterX?i.rectCenterX=e.width-i.widthRect:t.offsetX<i.widthRect/2&&(i.rectCenterX=0)),i.heightRect/2>i.rectCenterY&&(t.offsetY>e.height/2&&i.heightRect>e.height-i.rectCenterY?i.rectCenterY=e.height-i.heightRect:t.offsetY<i.heightRect/2&&(i.rectCenterY=0)),e.height-i.rectCenterY<i.heightRect&&(i.rectCenterY=e.height-i.heightRect),i.drawRectangle(i.widthRect,i.heightRect,i.rectCenterX,i.rectCenterY),i.onScrollChanged({bar:s.d.bLScrollBarType.kBLScrollBarHorz,position:i.rectCenterX*i.ratioWidth}),i.onScrollChanged({bar:s.d.bLScrollBarType.kBLScrollBarVert,position:i.rectCenterY*i.ratioHeight}),i.subscribeEvent("mousemove",i.mouseMoveCanvas),i.isMousePressed=!0},this.mouseUpCanvas=function(t){!0===i.isMousePressed&&(i.unSubscribeEvent("mousemove"),i.isMousePressed=!1)},this.mouseOutCanvas=function(t){i.isMouseLeaveCanvas=!0===i.isMousePressed},this.mouseOverCanvas=function(t){i.isMouseLeaveCanvas=!1},this.mouseMoveDocument=function(t){if(i.isMouseLeaveCanvas){var e=i.getImageSize(),n=i.canvas.nativeElement.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop,a=n.left+o,c=n.top+r,u=a+e.width,l=(i.rectCenterX+t.movementX)*i.ratioWidth,h=(i.rectCenterY+t.movementY)*i.ratioHeight;(0===i.rectCenterX||i.rectCenterX>=e.width-i.widthRect)&&(l=i.rectCenterX*i.ratioWidth),(i.rectCenterY>=e.height-i.heightRect||0===i.rectCenterY||i.rectCenterY>=e.height-i.heightRect)&&(h=i.rectCenterY*i.ratioHeight),(0===i.rectCenterX&&0===i.rectCenterY||0===i.rectCenterX&&i.rectCenterY>=e.height-i.heightRect||0===i.rectCenterY&&i.rectCenterX>=e.width-i.widthRect)&&(t.movementX>t.movementY?t.pageX>=a&&t.pageX<=u&&(l=(i.rectCenterX+t.movementX)*i.ratioWidth):t.pageY>=c&&t.pageY<=c+e.height&&(h=(i.rectCenterY+t.movementY)*i.ratioHeight)),(i.rectCenterY>=e.height-i.heightRect&&i.rectCenterX>=e.width-i.widthRect||0===i.rectCenterY&&i.rectCenterX>=e.width-i.widthRect||0===i.rectCenterX&&i.rectCenterY>=e.height-i.heightRect)&&(-t.movementX>-t.movementY?t.pageX>=a&&t.pageX<=u&&(l=(i.rectCenterX+t.movementX)*i.ratioWidth):t.pageY>=c&&t.pageY<=c+e.height&&(h=(i.rectCenterY+t.movementY)*i.ratioHeight));var p={x:l,y:h};i.onScrollChanged({bar:s.d.bLScrollBarType.kBLScrollBarHorz,position:p.x}),i.onScrollChanged({bar:s.d.bLScrollBarType.kBLScrollBarVert,position:p.y})}},this.mouseUpDocument=function(t){i.isMouseLeaveCanvas&&(i.isMouseLeaveCanvas=!1,i.isMousePressed=!1)},this.mouseMoveCanvas=function(t){if(i.isMousePressed){var e={x:(t.offsetX-i.widthRect/2)*i.ratioWidth,y:(t.offsetY-i.heightRect/2)*i.ratioHeight};i.onScrollChanged({bar:s.d.bLScrollBarType.kBLScrollBarHorz,position:e.x}),i.onScrollChanged({bar:s.d.bLScrollBarType.kBLScrollBarVert,position:e.y})}},this.subscribeEvent=function(t,e){var n=i.canvas.nativeElement;n&&(n.events||(n.events={}),n.events[t]&&n.events[t](),n.events[t]=i.renderer.listen(n,t,e))},this.unSubscribeEvent=function(t){var e=i.canvas.nativeElement;e&&(e.events[t]&&e.events[t](),delete e.events[t])},this.sliderOptions={floor:12.5,ceil:200,step:.5}}return Object.defineProperty(t.prototype,"image",{set:function(t){this.fetch()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.subUpdate=this.imageStoreService.onUpdate.subscribe(function(e){setTimeout(function(){var e=t.previewElementRef.nativeElement,n=s.e.size(e.clientWidth,e.clientHeight);t.imageStoreService.getThumbnailCurrent(n.width,n.height,a.e.Current).then(function(e){e&&(t.setImage(e),t.drawBackground(),t.drawImage(),t.drawRectangle(t.widthRect,t.heightRect,t.rectCenterX,t.rectCenterY))})},400)}),this.buttons=c.c.buttons},t.prototype.ngAfterViewInit=function(){this.ctx=this.canvas.nativeElement.getContext("2d"),this.subscribeEvent("mousedown",this.mouseDownCanvas),this.subscribeEvent("mouseup",this.mouseUpCanvas),this.subscribeEvent("mouseout",this.mouseOutCanvas),this.subscribeEvent("mouseover",this.mouseOverCanvas)},t.prototype.ngOnDestroy=function(){this.subUpdate&&this.subUpdate.unsubscribe()},t.prototype.fetch=function(t){var e=this,n=this.previewElementRef.nativeElement,i=s.e.size(n.clientWidth,n.clientHeight);this.canvas.nativeElement.width=i.width,this.canvas.nativeElement.height=i.height,this.imageStoreService.getThumbnailCurrent(i.width,i.height,a.e.Current).then(function(t){if(t){e.setImage(t);var n=e.getImageSize();e.canvas.nativeElement.width=n.width,e.canvas.nativeElement.height=n.height,e.xWithRatio=0,e.yWithRatio=0,e.imageStoreService.getImageCurrent(a.e.Current).then(function(t){var i=t&&t.img;e.ratioWidth=i.width/n.width,e.ratioHeight=i.height/n.height}).catch(function(t){}),e.widthRect=n.width,e.heightRect=n.height,e.canvasCenterX=e.rectCenterX=(e.canvas.nativeElement.width-n.width)/2,e.canvasCenterY=e.rectCenterY=(e.canvas.nativeElement.height-n.height)/2,e.drawBackground(),e.drawImage(),e.drawFrame(e.canvas.nativeElement.width,e.canvas.nativeElement.height,e.lineWithFrame,e.inflateFrame,e.colorFrame),e.drawRectangle(n.width,n.height,e.canvasCenterX,e.canvasCenterY)}}).catch(function(t){})},t.prototype.drawFrame=function(t,e,n,i,o){this.ctx.lineWidth=n,this.ctx.strokeStyle=o,this.ctx.beginPath(),this.ctx.rect(i,i,t-2*i,e-2*i),this.ctx.stroke()},t.prototype.drawRectangle=function(t,e,n,i){this.cropRegions(s.e.quadFromRect(s.e.rect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height)),s.e.quadFromRect(s.e.rect(n,i,n+t,i+e)),"rgba(0, 0, 0, 0.5)"),this.ctx.lineWidth=1,this.ctx.strokeStyle="#FFFFFF",this.ctx.beginPath(),this.ctx.rect(n,i,t,e),this.ctx.stroke()},t.prototype.cropRegions=function(t,e,n){var i=this.ctx;i&&(i.save(),[e,t].forEach(function(t,e){var o=t.tl,r=t.tr,s=t.bl,a=t.br;i.beginPath(),0===e&&i.rect(0,0,i.canvas.width,i.canvas.height),i.moveTo(s.x,s.y),i.lineTo(a.x,a.y),i.lineTo(r.x,r.y),i.lineTo(o.x,o.y),i.closePath(),0===e?i.clip():(n&&(i.fillStyle=n),i.fill())}),i.restore())},t.prototype.cmd=function(t){t&&!t.disabled&&("fitToScreen"===t.id?this.onZoomChanged(this.fitToScreenZoom):this.eventsHandlerService.call({action:t.id}))},t.prototype.docStateChanged=function(t){this.fitToScreenZoom||(this.fitToScreenZoom=100*t.value.zoom),this.sliderValue=100*t.value.zoom,this.recalculateRatio(t.value.size),this.changeRectSize(t.value.offset.x,t.value.offset.y,t.value.viewSize)},t.prototype.scrollStateChanged=function(t){this.moveRectangle(t.scrollType,t.newPos)},t.prototype.recalculateRatio=function(t){if(this.thubnailImage){var e=this.getImageSize();this.ratioWidth=t.width/e.width,this.ratioHeight=t.height/e.height}},t.prototype.changeRectSize=function(t,e,n){if(this.thubnailImage){var i=this.getImageSize();this.ctx.clearRect(this.canvasCenterX-1,this.canvasCenterY-1,i.width+2,i.height+2),this.ctx.restore(),this.drawBackground(),this.drawImage(),this.drawFrame(this.canvas.nativeElement.width,this.canvas.nativeElement.height,this.lineWithFrame,this.inflateFrame,this.colorFrame),this.xWithRatio=t/this.ratioWidth,this.yWithRatio=e/this.ratioHeight,this.widthRect=n.width/this.ratioWidth,this.heightRect=n.height/this.ratioHeight,this.rectCenterX=this.canvasCenterX+this.xWithRatio,this.rectCenterY=this.canvasCenterY+this.yWithRatio,0===this.xWithRatio&&0===this.yWithRatio?this.drawRectangle(i.width,i.height,this.xWithRatio,this.yWithRatio):this.drawRectangle(this.widthRect,this.heightRect,this.rectCenterX,this.rectCenterY)}},t.prototype.moveRectangle=function(t,e){if(this.thubnailImage){var n=this.getImageSize();this.ctx.clearRect(this.canvasCenterX-1,this.canvasCenterY-1,n.width+2,n.height+2),this.ctx.restore(),this.drawBackground(),this.drawImage(),t===s.d.bLScrollBarType.kBLScrollBarHorz?this.rectCenterX=e/this.ratioWidth+this.canvasCenterX:this.rectCenterY=e/this.ratioHeight+this.canvasCenterY,this.widthRect+this.rectCenterX>n.width+this.canvasCenterX||this.drawRectangle(this.widthRect,this.heightRect,this.rectCenterX,this.rectCenterY)}},t.prototype.onZoomChanged=function(t){this.eventsHandlerService.call({action:"setZoom",params:t/100})},t.prototype.onScrollChanged=function(t){this.eventsHandlerService.call({action:"changeScrollPositon",params:t})},t.prototype.drawBackground=function(){this.ctx.fillStyle="#FFFFFF",this.ctx.rect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.ctx.fill()},t.prototype.drawImage=function(){var t=this.getImageSize();if(0===this.imageRotation)this.ctx.drawImage(this.thubnailImage,this.canvasCenterX,this.canvasCenterY,t.width,t.height);else{this.ctx.save(),this.ctx.translate(this.canvas.nativeElement.width/2,this.canvas.nativeElement.height/2),this.ctx.rotate(this.imageRotation*Math.PI/180);var e=this.imageRotation%180==0?s.e.size(t.width,t.height):s.e.size(t.height,t.width);this.ctx.drawImage(this.thubnailImage,-e.width/2,-e.height/2,e.width,e.height),this.ctx.restore()}},t.prototype.setImage=function(t){this.thubnailImage=t.img,this.imageRotation=t.rotation||0,this.imageSize=this.imageRotation%180==0?s.e.size(this.thubnailImage.width,this.thubnailImage.height):s.e.size(this.thubnailImage.height,this.thubnailImage.width);var e=Math.max(this.imageSize.width/this.previewElementRef.nativeElement.clientWidth,this.imageSize.height/this.previewElementRef.nativeElement.clientHeight);e>0&&(this.imageSize=s.e.size(this.imageSize.width/e,this.imageSize.height/e))},t.prototype.getImageSize=function(){return this.imageSize},t.prototype.focusOutCanvas=function(){},t}(),l=n("368k"),h=n("yPUT"),p=i["ɵcrt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.preview[_ngcontent-%COMP%]{width:100%;height:250px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;padding:30px 20px 15px;position:relative}.preview__holder[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;width:100%;height:calc(100% - 40px);position:relative;-ms-flex-pack:center;justify-content:center;margin-bottom:10px}.preview__holder[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{top:0;left:50%;position:absolute;padding:0;overflow:hidden;-ms-transform:translateX(-50%);transform:translateX(-50%);z-index:1}@media (max-width:960px){.preview__holder[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%;height:100%;left:50%;top:50%;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-o-object-fit:contain;object-fit:contain}}.preview__slider[_ngcontent-%COMP%]{width:100%}.b-navigate[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;height:30px;-ms-flex-pack:justify;justify-content:space-between}.b-navigate__list[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.b-navigate__item[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;cursor:pointer;margin-right:5px}.b-navigate__item[_ngcontent-%COMP%]:hover   .b-navigate__icon[_ngcontent-%COMP%]{fill:#009ea9}.b-navigate__icon[_ngcontent-%COMP%]{display:inline-block;width:25px;height:25px;fill:#fff}.loading[_ngcontent-%COMP%]{position:relative;z-index:0}.loading__overlay[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;position:absolute;left:0;top:0;width:100%;height:100%;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.loading__overlay[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:2.5em;height:3em;border:3px solid transparent;border-top-color:#76bd00;border-bottom-color:#76bd00;border-radius:50%;-webkit-animation:2s infinite spin-stretch;animation:2s infinite spin-stretch}@-webkit-keyframes spin-stretch{50%{transform:rotate(360deg) scale(.4,.33);border-width:8px}100%{transform:rotate(720deg) scale(1,1);border-width:3px}}@keyframes spin-stretch{50%{transform:rotate(360deg) scale(.4,.33);border-width:8px}100%{transform:rotate(720deg) scale(1,1);border-width:3px}}"]],data:{}});function d(t){return i["ɵvid"](0,[i["ɵqud"](671088640,1,{documentViewRef:0}),i["ɵqud"](402653184,2,{canvas:0}),i["ɵqud"](402653184,3,{previewElementRef:0}),(t()(),i["ɵeld"](3,0,[["previewElement",1]],null,10,"div",[["class","preview"]],null,null,null,null,null)),(t()(),i["ɵeld"](4,0,[[3,0],["clienSizeHolder",1]],null,5,"div",[["class","preview__holder"],["is-animated","false"],["name","render-target"]],null,null,null,null,null)),(t()(),i["ɵeld"](5,0,[["clienSizeElement",1]],null,1,"div",[["class","preview__elem"]],null,null,null,null,null)),(t()(),i["ɵeld"](6,0,[["scrollElement",1]],null,0,"div",[["class","preview__scroll"]],null,null,null,null,null)),(t()(),i["ɵeld"](7,0,[[2,0],["canvas",1]],null,0,"canvas",[["class","view-cursor"]],null,[[null,"focusout"]],function(t,e,n){var i=!0;return"focusout"===e&&(i=!1!==t.component.focusOutCanvas()&&i),i},null,null)),(t()(),i["ɵeld"](8,0,null,null,1,"div",[["class","loading__overlay"]],null,null,null,null,null)),(t()(),i["ɵeld"](9,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),i["ɵeld"](10,0,null,null,3,"div",[["class","b-navigate"]],null,null,null,null,null)),(t()(),i["ɵeld"](11,0,null,null,2,"div",[["class","preview__slider"]],null,null,null,null,null)),(t()(),i["ɵeld"](12,0,null,null,1,"app-slider",[],null,[[null,"onSliderValueChanged"]],function(t,e,n){var i=!0;return"onSliderValueChanged"===e&&(i=!1!==t.component.onZoomChanged(n)&&i),i},o.b,o.a)),i["ɵdid"](13,114688,[["slider",4]],0,r.a,[],{value:[0,"value"],options:[1,"options"],type:[2,"type"]},{onSliderValueChanged:"onSliderValueChanged"})],function(t,e){var n=e.component;t(e,13,0,n.sliderValue,n.sliderOptions,"%")},null)}var f=n("Ip0R"),g=n("iGz7"),m=function(){function t(){this.onToggle=new i.EventEmitter,this.onChange=new i.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.toggle=function(t){"photomontage-tab"!==t&&this.onToggle.emit(t===this.selectedId?null:t)},t}(),v=i["ɵcrt"]({encapsulation:0,styles:[[".tabs__content[_ngcontent-%COMP%], .tabs__item[_ngcontent-%COMP%], .tabs__triangle[_ngcontent-%COMP%]{transition:all .3s ease-in-out}[_nghost-%COMP%]{display:block}.tabs[_ngcontent-%COMP%]{overflow-y:auto}.tabs.photomontage-tab[_ngcontent-%COMP%]{height:100vh}.tabs[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:12px;text-transform:none}.tabs__item[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;overflow:hidden}.tabs__item.active[_ngcontent-%COMP%]   .tabs__content[_ngcontent-%COMP%]{height:auto}.tabs__item.active[_ngcontent-%COMP%]   .tabs__triangle[_ngcontent-%COMP%]{-ms-transform:rotate(45deg);transform:rotate(45deg)}.tabs__item.erase-tab[_ngcontent-%COMP%]   .tabs__title[_ngcontent-%COMP%]{background:url(bg-erase.08b3bd2b65d691b41142.jpg) center center/cover no-repeat}.tabs__item.cut-out-tab[_ngcontent-%COMP%]   .tabs__title[_ngcontent-%COMP%]{background:url(cut-out.602735b455ad489f361e.png) center center/cover no-repeat}.tabs__item.presets-tab[_ngcontent-%COMP%]   .tabs__title[_ngcontent-%COMP%]{background:url(presets.98c140ca90138db5ded6.png) center center/cover no-repeat}.tabs__item.photomontage-tab[_ngcontent-%COMP%]   .tabs__title[_ngcontent-%COMP%]{background:url(montage.d7f156e7c66fa13fb395.png) center center/cover no-repeat}.tabs__item.crop-tab[_ngcontent-%COMP%]   .tabs__title[_ngcontent-%COMP%]{background:url(crop.3c4d7b2fe7f40be43828.png) center center/cover no-repeat}.tabs__title[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:15px 10px;width:100%;min-height:50px;border-bottom:1px solid #000;cursor:pointer}.tabs__name[_ngcontent-%COMP%]{text-transform:uppercase;font-size:14px}.tabs__triangle[_ngcontent-%COMP%]{display:inline-block;margin-right:15px;border-style:solid;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:5px solid #fff}.tabs__content[_ngcontent-%COMP%]{width:100%;height:0}"]],data:{}});function y(t){return i["ɵvid"](0,[(t()(),i["ɵand"](0,null,null,0))],null,null)}function b(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,6,"li",[],null,null,null,null,null)),i["ɵprd"](512,null,f.u,f.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](2,278528,null,0,f.i,[f.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](3,{active:0}),(t()(),i["ɵeld"](4,0,null,null,2,"div",[["class","tabs__content"]],null,null,null,null,null)),(t()(),i["ɵand"](16777216,null,null,1,function(t,e,n){var i=!0;return"onChange"===e&&(i=!1!==t.component.onChange.emit(n)&&i),i},y)),i["ɵdid"](6,81920,null,0,g.a,[i.ViewContainerRef,i.ComponentFactoryResolver],{model:[0,"model"]},{onChange:"onChange"})],function(t,e){var n=e.component,o=i["ɵinlineInterpolate"](1,"tabs__item ",e.context.$implicit.id,""),r=t(e,3,0,e.context.$implicit.id===n.selectedId);t(e,2,0,o,r),t(e,6,0,e.context.$implicit)},null)}function P(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,2,"ul",[],[[8,"className",0]],null,null,null,null)),(t()(),i["ɵand"](16777216,null,null,1,null,b)),i["ɵdid"](2,278528,null,0,f.j,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){t(e,2,0,e.component.items)},function(t,e){t(e,0,0,i["ɵinlineInterpolate"](1,"tabs  ",e.component.selectedId,""))})}var _=n("A7o+"),w=n("TIxM"),x=n("sMba"),T=n("ZYCi"),S=n("7lH9"),C=function(){function t(t){this.eventsHandlerService=t,this.isDisabled=!1,this.buttons=[{id:"download",text:"Save your photo",classes:"button--green"}],this.onUploaded=new i.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.cmd=function(t){this.isDisabled||t&&this.eventsHandlerService.call({action:t})},t}(),k=i["ɵcrt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block}.sidebar-menu[_ngcontent-%COMP%]{text-align:center;padding:20px}.button[_ngcontent-%COMP%]{display:inline-block}"]],data:{}});function E(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,5,"a",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.cmd(t.context.$implicit.id)&&i),i},null,null)),i["ɵprd"](512,null,f.u,f.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](2,278528,null,0,f.i,[f.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](3,{disabled:0}),(t()(),i["ɵted"](4,null,["",""])),i["ɵpid"](131072,_.h,[_.i,i.ChangeDetectorRef])],function(t,e){var n=e.component,o=i["ɵinlineInterpolate"](1,"button ",e.context.$implicit.classes,""),r=t(e,3,0,n.isDisabled);t(e,2,0,o,r)},function(t,e){t(e,4,0,i["ɵunv"](e,4,0,i["ɵnov"](e,5).transform(e.context.$implicit.text)))})}function B(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,4,"div",[["class","sidebar-menu"]],null,null,null,null,null)),(t()(),i["ɵeld"](1,0,null,null,1,"app-upload",[],null,[[null,"onUploaded"]],function(t,e,n){var i=!0;return"onUploaded"===e&&(i=!1!==t.component.onUploaded.emit(n)&&i),i},w.b,w.a)),i["ɵdid"](2,4308992,null,0,x.a,[T.a,S.a],{isOnlyChoose:[0,"isOnlyChoose"],isDisabled:[1,"isDisabled"],classes:[2,"classes"]},{onUploaded:"onUploaded"}),(t()(),i["ɵand"](16777216,null,null,1,null,E)),i["ɵdid"](4,278528,null,0,f.j,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(t,e){var n=e.component;t(e,2,0,!0,n.isDisabled,"button--gray"),t(e,4,0,n.buttons)},null)}n("BAfr"),n.d(e,"a",function(){return L}),n.d(e,"b",function(){return R});var L=i["ɵcrt"]({encapsulation:0,styles:[[".sidebar__strip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{transition:all .3s ease-in-out;width:10px;height:1px;background-color:#fff;-ms-transform:rotate(135deg);transform:rotate(135deg);top:-1px;position:relative}[_nghost-%COMP%]{position:relative}.sidebar[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:435px;height:100%;min-width:435px;max-width:435px;overflow:auto;position:relative;border-left:1px solid #fff;background-color:#ddd;overflow-x:hidden}@media (max-width:767px){.sidebar[_ngcontent-%COMP%]{width:auto;min-width:220px;max-width:320px}}@media (max-width:960px){.sidebar[_ngcontent-%COMP%]{display:none;padding-right:30px;top:0;right:0;position:absolute;z-index:3}.sidebar.active[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}}.sidebar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.sidebar__main[_ngcontent-%COMP%]{width:100%}.sidebar[_ngcontent-%COMP%]   app-toolbar[_ngcontent-%COMP%]{display:none}.sidebar__strip[_ngcontent-%COMP%]{border-left:1px solid transparent;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column;cursor:pointer;top:0;right:0;position:absolute;width:15px;height:100vh}.sidebar__strip[_ngcontent-%COMP%]:hover{background-color:rgba(80,78,78,.8)}.sidebar__strip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{-ms-transform:rotate(45deg);transform:rotate(45deg);top:5px;left:0}.mobile-strip[_ngcontent-%COMP%]{display:none;position:absolute;width:30px;height:100%;background:#fff;border:1px solid #a7a3a3;top:0;right:0;z-index:100}.mobile-strip.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{-ms-transform:rotate(-45deg);transform:rotate(-45deg)}.mobile-strip.active[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{-ms-transform:rotate(45deg);transform:rotate(45deg)}@media (max-width:960px){.mobile-strip[_ngcontent-%COMP%]{display:block}}.mobile-strip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:15px;height:3px;background:#a7a3a3;-ms-transform:rotate(45deg);transform:rotate(45deg);position:absolute;top:calc(50% - 6px);left:6px}.mobile-strip[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{-ms-transform:rotate(-45deg);transform:rotate(-45deg);top:auto;bottom:calc(50% - 6px)}"]],data:{}});function M(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,1,"app-preview",[],null,[[null,"onCommand"],["document","mousemove"],["document","mouseup"]],function(t,e,n){var o=!0,r=t.component;return"document:mousemove"===e&&(o=!1!==i["ɵnov"](t,1).mouseMoveDocument(n)&&o),"document:mouseup"===e&&(o=!1!==i["ɵnov"](t,1).mouseUpDocument(n)&&o),"onCommand"===e&&(o=!1!==r.onCommandAppPreview(n)&&o),o},d,p)),i["ɵdid"](1,4440064,[[1,4],["preview",4]],0,u,[l.a,h.a,i.Renderer],{image:[0,"image"]},null)],function(t,e){t(e,1,0,e.component.image)},null)}function R(t){return i["ɵvid"](0,[i["ɵqud"](671088640,1,{previewRef:0}),(t()(),i["ɵeld"](1,0,null,null,10,"div",[["class","sidebar"]],null,null,null,null,null)),i["ɵprd"](512,null,f.u,f.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](3,278528,null,0,f.i,[f.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](4,{active:0}),(t()(),i["ɵeld"](5,0,null,null,6,"div",[["class","sidebar__main"]],null,null,null,null,null)),(t()(),i["ɵand"](16777216,null,null,1,null,M)),i["ɵdid"](7,16384,null,0,f.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["ɵeld"](8,0,null,null,1,"app-tabs",[],null,[[null,"onToggle"],[null,"onChange"]],function(t,e,n){var i=!0,o=t.component;return"onToggle"===e&&(i=!1!==o.onToggleTab.emit(n)&&i),"onChange"===e&&(i=!1!==o.onChangeTabContent.emit(n)&&i),i},P,v)),i["ɵdid"](9,114688,null,0,m,[],{items:[0,"items"],selectedId:[1,"selectedId"]},{onToggle:"onToggle",onChange:"onChange"}),(t()(),i["ɵeld"](10,0,null,null,1,"app-sidebar-menu",[],null,[[null,"onUploaded"]],function(t,e,n){var i=!0;return"onUploaded"===e&&(i=!1!==t.component.onUploaded.emit(n)&&i),i},B,k)),i["ɵdid"](11,114688,null,0,C,[h.a],{isDisabled:[0,"isDisabled"]},{onUploaded:"onUploaded"}),(t()(),i["ɵeld"](12,0,null,null,5,"div",[["class","mobile-strip"]],null,[[null,"click"]],function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=0!=(o.isExpanded=!o.isExpanded)&&i),i},null,null)),i["ɵprd"](512,null,f.u,f.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](14,278528,null,0,f.i,[f.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](15,{active:0}),(t()(),i["ɵeld"](16,0,null,null,0,"span",[],null,null,null,null,null)),(t()(),i["ɵeld"](17,0,null,null,0,"span",[],null,null,null,null,null))],function(t,e){var n=e.component,i=t(e,4,0,!n.isExpanded);t(e,3,0,"sidebar",i),t(e,7,0,n.isShow()),t(e,9,0,n.tabs,n.selectedTabId),t(e,11,0,n.isDisabled);var o=t(e,15,0,n.isExpanded);t(e,14,0,"mobile-strip",o)},null)}},"K+iD":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("mrSG"),o=n("exf4"),r=function(t){return o.e.castFloatToInt(t)},s=function(t){function e(e){var n=t.call(this,e[0],e[1],e[2],e[3])||this;return n.rect=e,n}return i.__extends(e,t),Object.defineProperty(e.prototype,"leftPx",{get:function(){return r(this.left)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topPx",{get:function(){return r(this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightPx",{get:function(){return r(this.right)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomPx",{get:function(){return r(this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widthPx",{get:function(){return r(this.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightPx",{get:function(){return r(this.height)},enumerable:!0,configurable:!0}),e}(o.c)},"LDQ/":function(t,e,n){"use strict";n("HzAC"),n("EQv5"),n("02Pb"),n("CcnG"),n("0O6x");var i=n("YTF9"),o=n("EHI3"),r=function(){function t(){}return Object.defineProperty(t,"mask",{get:function(){return this.layout?this.layout.mask:{id:null,img:null,blob:null}},enumerable:!0,configurable:!0}),t.setMask=function(t){this.layout&&(this.layout.mask=t)},t.update=function(t,e,n,i,o){this.layout&&i&&this.layout.update(t,e,n,i.width,i.height,o)},t.getData=function(t,e,n,i,o){if(this.layout&&i)return this.layout.getData(t,e,n,i.width,i.height,o)},t.draw=function(t,e,n,i){if(this.layout&&e){var o=e.getPage(i);if(o){var r=o.getDevSpacePageBox(e.zoom);this.layout.draw(t,r,n,o.rotate)}}},t.clear=function(){this.layout&&this.layout.clear()},t.layout=o.a.createInstance("mask"),t}();n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return r})},"Lt/k":function(t,e,n){"use strict";var i=n("CcnG"),o=n("6okS"),r=n("exf4"),s=n("5Rvh"),a=(n("CkTg"),n("02Pb"),n("yLV6"),n("HpxQ")),c=n("EQv5"),u=n("iF9q"),l=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var o=i[n];t.call(e,o[1],o[0])}},e}()}(),h="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,p="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),d="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(p):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},f=2,g=20,m=["top","right","bottom","left","width","height","size","weight"],v="undefined"!=typeof MutationObserver,y=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,o=0;function r(){n&&(n=!1,t()),i&&a()}function s(){d(r)}function a(){var t=Date.now();if(n){if(t-o<f)return;i=!0}else n=!0,i=!1,setTimeout(s,e);o=t}return a}(this.refresh.bind(this),g)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){h&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),v?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){h&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;m.some(function(t){return!!~n.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),b=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},P=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||p},_=S(0,0,0,0);function w(t){return parseFloat(t)||0}function x(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){return e+w(t["border-"+n+"-width"])},0)}var T="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof P(t).SVGGraphicsElement}:function(t){return t instanceof P(t).SVGElement&&"function"==typeof t.getBBox};function S(t,e,n,i){return{x:t,y:e,width:n,height:i}}var C=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t,e=(t=this.target,h?T(t)?function(t){var e=t.getBBox();return S(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return _;var i=P(t).getComputedStyle(t),o=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var o=i[n];e[o]=w(t["padding-"+o])}return e}(i),r=o.left+o.right,s=o.top+o.bottom,a=w(i.width),c=w(i.height);if("border-box"===i.boxSizing&&(Math.round(a+r)!==e&&(a-=x(i,"left","right")+r),Math.round(c+s)!==n&&(c-=x(i,"top","bottom")+s)),!function(t){return t===P(t).document.documentElement}(t)){var u=Math.round(a+r)-e,l=Math.round(c+s)-n;1!==Math.abs(u)&&(a-=u),1!==Math.abs(l)&&(c-=l)}return S(o.left,o.top,a,c)}(t):_);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),k=function(t,e){var n,i,o,r,s,a,c,u=(i=(n=e).x,o=n.y,r=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),b(c,{x:i,y:o,width:r,height:s,top:o,right:i+r,bottom:s+o,left:i}),c);b(this,{target:t,contentRect:u})},E=function(){function t(t,e,n){if(this.activeObservations_=[],this.observations_=new l,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=n}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof P(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new C(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof P(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new k(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),B="undefined"!=typeof WeakMap?new WeakMap:new l,L=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=y.getInstance(),i=new E(e,n,this);B.set(this,i)};["observe","unobserve","disconnect"].forEach(function(t){L.prototype[t]=function(){var e;return(e=B.get(this))[t].apply(e,arguments)}});var M=void 0!==p.ResizeObserver?p.ResizeObserver:L,R=n("5HBy");n.d(e,"a",function(){return F}),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),r=window.setTimeout(function(){e(i+o)},o);return t=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var O=r.a.createInstance("FFFFFFFF"),F=function(){function t(t,e,n,o,s,c){var l=this;this.ngZone=t,this.documentViewService=e,this.touchService=n,this.router=o,this.renderer=s,this.elementRef=c,this.documentView=null,this.isLoaded=!1,this.ignoreScrollEvents=!1,this.scrollLeft=null,this.scrollTop=null,this.disabledMove=!1,this.xPosContextMenu=0,this.yPosContextMenu=0,this.caretPoints=[r.e.point(),r.e.point()],this.pdrFlags=u.a.kPDR_IsVisible|u.a.kPDR_WheelHandlingEnabled,this.deviceInfo=null,this.isHiddenMask=!1,this.isShowMask=!0,this.isShowCursor=!0,this.onChangeDocumentState=new i.EventEmitter,this.onChangeState=new i.EventEmitter,this.onScrollChangeState=new i.EventEmitter,this.onChangeCurrentDocument=new i.EventEmitter,this.onDocumentLoaded=new i.EventEmitter,this.onShowContextMenu=new i.EventEmitter,this.isDirty=!1,this.animated=!1,this.animDOMAttribute=null,this.cursor=r.d.bLCursorType.kBLCursorArrow,this.onAnimationStartedEvent=null,this.onAnimationCompletedEvent=null,this.isGlobalSubscribed=!1,this.scale=1,this.last_scale=1,this.ro=new M(function(t,e){if(l.documentView){var n=l.getElementSize(),i=l.documentView.getViewSize();n.isEqual(i)||l.invalidate()}}),this.drawCaret=function(){if(!l.caretPoints[0].isEqual(l.caretPoints[1])){var t=l.renderTarget.getCompositeOperation();l.renderTarget.setCompositeOperation("exclusion"),a.a.drawLine(l.renderTarget,l.caretPoints[0],l.caretPoints[1],O),l.renderTarget.setCompositeOperation(t),0!=(l.pdrFlags&u.a.kPDR_IsCaretVisible)?l.pdrFlags&=~u.a.kPDR_IsCaretVisible:l.pdrFlags|=u.a.kPDR_IsCaretVisible}},this.onMouseMove=function(t){if(!l.disabledMove){var e=l.makeViewPoint(t);if(!e.isEqual(l.lastMouseMovePoint)&&(l.lastMouseMovePoint=e,l.documentView)){var n={pointerArgs:{}};n.type=r.d.bLInputEventType.kBLInputEventPointerMoved,n.pointerArgs.button=r.d.bLPointerButton.kBLPointerButtonLeft,n.pointerArgs.position=e,n.pointerArgs.flags=l.makeEventFlags(t),l.documentView.dispatchEvent(n,t),l.refreshCursor()}}},this.onMousedown=function(t){if(l.lastMouseMovePoint=r.e.point(-1,-1),l.documentView){var e=l.makeViewPoint(t);l.unSubscribeEvent("canvas","mousemove"),l.unSubscribeEvent("canvas","touchmove"),l.subscribeEvent("window","mousemove",l.onMouseMove),l.subscribeEvent("window","touchmove",l.touchService.eventHandler),l.subscribeEvent("window","mouseup",l.onMouseUp),l.subscribeEvent("window","touchend",l.touchService.eventHandler),l.canvasRef.nativeElement.setCapture&&l.canvasRef.nativeElement.setCapture();var n={pointerArgs:{}};n.type=r.d.bLInputEventType.kBLInputEventPointerPressed,n.pointerArgs.position=e,n.pointerArgs.flags=l.makeEventFlags(t),n.pointerArgs.button=l.extractButtonFromFlags(n.pointerArgs.flags),l.documentView.dispatchEvent(n,t),l.refreshCursor()}},this.onMouseUp=function(t){if(l.lastMouseMovePoint=r.e.point(-1,-1),l.documentView){var e=l.makeEventFlags(t),n=l.makeViewPoint(t);l.unSubscribeEvent("window","mousemove"),l.unSubscribeEvent("window","touchmove"),l.unSubscribeEvent("window","mouseup"),l.unSubscribeEvent("window","touchend"),l.subscribeEvent("canvas","mousemove",l.onMouseMove),l.subscribeEvent("canvas","touchmove",l.touchService.eventHandler),l.canvasRef.nativeElement.releaseCapture&&l.canvasRef.nativeElement.releaseCapture();var i={pointerArgs:{}};i.type=r.d.bLInputEventType.kBLInputEventPointerReleased,i.pointerArgs.position=n,i.pointerArgs.flags=e,i.pointerArgs.button=l.extractButtonFromFlags(i.pointerArgs.flags),l.documentView.dispatchEvent(i,t),l.refreshCursor()}},this.onContextMenu=function(t){return l.xPosContextMenu=t.offsetX,l.yPosContextMenu=t.offsetY,!1},this.onScroll=function(t){l.ignoreScrollEvents||l.documentView&&(l.documentView.processScrollEvent(r.d.bLScrollBarType.kBLScrollBarHorz,r.d.bLScrollEvent.kBLScrollPos,l.getScrollPos(r.d.bLScrollBarType.kBLScrollBarHorz)),l.documentView.processScrollEvent(r.d.bLScrollBarType.kBLScrollBarVert,r.d.bLScrollEvent.kBLScrollPos,l.getScrollPos(r.d.bLScrollBarType.kBLScrollBarVert)))},this.onMouseEnter=function(t){if(l.documentView){var e={pointerArgs:{}};e.type=r.d.bLInputEventType.kBLInputEventPointerEnter,e.pointerArgs.button=r.d.bLPointerButton.kBLPointerButtonLeft,e.pointerArgs.position=l.makeViewPoint(t),e.pointerArgs.flags=l.makeEventFlags(t),l.documentView.dispatchEvent(e,t)}},this.onMouseLeave=function(t){if(l.documentView){var e={pointerArgs:{}};e.type=r.d.bLInputEventType.kBLInputEventPointerLeave,e.pointerArgs.button=r.d.bLPointerButton.kBLPointerButtonLeft,e.pointerArgs.position=l.makeViewPoint(t),e.pointerArgs.flags=l.makeEventFlags(t),l.documentView.dispatchEvent(e,t)}},this.onKeyDown=function(t){return!(l.impKeyEvent(t,r.d.bLInputEventType.kBLInputEventKeyPressed)&&(t.ctrlKey||t.altKey||t.metaKey)||t.keyCode===r.d.kBLKey.kBLKey_BACK&&!l.ignoreCapturedByControls(t)&&(t.preventDefault(),1))},this.onKeyUp=function(t){if(l.impKeyEvent(t,r.d.bLInputEventType.kBLInputEventKeyReleased)&&(t.ctrlKey||t.altKey||t.metaKey))return!1},this.onKeyPress=function(t){if(!l.beforeKeyEventCheck(t))return!0;if(t.ctrlKey||t.altKey||t.metaKey)return!1;var e=l.getCharForKeyPress(t);if(!e)return!1;var n={charArgs:{}};return n.type=r.d.bLInputEventType.kBLInputEventCharReceived,n.charArgs.unicode=e,l.documentView.dispatchEvent(n,t)},this.onPinch=function(t){if("pinch"===t.type){if(l.disabledMove=!0,l.scale=Math.max(r.f.availableZoomValues[0],Math.min(l.last_scale*t.scale,r.f.availableZoomValues[r.f.availableZoomValues.length-1])),!l.documentView)return;l.documentView.setZoom(l.scale)}"pinchend"===t.type&&(l.last_scale=l.scale,l.disabledMove=!1)},this.onSwipeDown=function(t){if(!l.documentView||!t)return!1;if(t.changedPointers&&t.changedPointers.length<1)return!1;var e={wheelArgs:{}};return e.type=r.d.bLInputEventType.kBLInputEventWheelChanged,e.wheelArgs.delta=1,e.wheelArgs.position=l.makeViewPoint(t.changedPointers[0]),e.wheelArgs.flags=l.makeEventFlags(t),l.documentView.dispatchEvent(e,t)},this.onSwipeUp=function(t){if(!l.documentView||!t)return!1;if(t.changedPointers&&t.changedPointers.length<1)return!1;var e={wheelArgs:{}};return e.type=r.d.bLInputEventType.kBLInputEventWheelChanged,e.wheelArgs.delta=-1,e.wheelArgs.position=l.makeViewPoint(t.changedPointers[0]),e.wheelArgs.flags=l.makeEventFlags(t),l.documentView.dispatchEvent(e,t)},this.subscribeEvent=function(t,e,n){var i=l.eventSubscribeHolder[t];i&&i.element&&(i.events||(i.events={}),i.events[e]&&i.events[e](),i.events[e]=l.renderer.listen(i.element,e,n))},this.unSubscribeEvent=function(t,e){var n=l.eventSubscribeHolder[t];n&&n.events&&(n.events[e]&&n.events[e](),delete n.events[e])},this.unSubscribeFromAllEvents=function(){for(var t in l.eventSubscribeHolder){var e=l.eventSubscribeHolder[t].events;if(e)for(var n in e)e[n]&&e[n]()}for(var t in l.eventSubscribeHolder)delete l.eventSubscribeHolder[t].events}}return Object.defineProperty(t.prototype,"documents",{set:function(t){t&&this.documentViewService.upload(t,this.router,this.selectedTab)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"document",{set:function(t){t&&this.documentViewService.upload([t],this.router,this.selectedTab)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{set:function(t){this.documentViewService.setContent(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{set:function(t){this.setMask(t)},enumerable:!0,configurable:!0}),t.prototype.onResize=function(){this.resize()},t.prototype.onMousewheel=function(t){return!this.mousewheel(t)},t.prototype.ngOnInit=function(){this.subscribe()},t.prototype.ngOnChanges=function(){},t.prototype.ngAfterViewInit=function(){this.scrollElementNative=this.scrollElementRef.nativeElement,this.clienSizeElementNative=this.clienSizeElementRef.nativeElement,this.clienSizeHolderNative=this.clienSizeHolderRef.nativeElement,this.canvasElementNative=this.canvasRef.nativeElement,this.canvasMaskElementNative=this.canvasMaskRef&&this.canvasMaskRef.nativeElement,this.canvasCursorElementNative=this.canvasCursorRef&&this.canvasCursorRef.nativeElement,this.eventSubscribeHolder={canvas:{element:this.canvasElementNative},window:{element:window},clienSize:{element:this.clienSizeElementNative}},this.subscribeEvent("clienSize","scroll",this.onScroll),this.subscribeEvent("canvas","mousedown",this.onMousedown),this.subscribeEvent("canvas","mouseup",this.onMouseUp),this.subscribeEvent("canvas","mousemove",this.onMouseMove),this.subscribeEvent("canvas","mouseenter",this.onMouseEnter),this.subscribeEvent("canvas","mouseleave",this.onMouseLeave),this.subscribeEvent("canvas","touchstart",this.touchService.eventHandler),this.subscribeEvent("canvas","touchmove",this.touchService.eventHandler),this.subscribeEvent("window","keydown",this.onKeyDown),this.subscribeEvent("window","keyup",this.onKeyUp),this.subscribeEvent("window","keypress",this.onKeyPress),this.subscribeEvent("canvas","contextmenu",this.onContextMenu),this.hammer=new Hammer.Manager(this.canvasElementNative),this.hammer.add(new Hammer.Pinch({})),this.hammer.on("pinch pinchend",this.onPinch),this.lastMouseMovePoint=r.e.point(-1,-1),this.renderTarget=new s.a(this.canvasElementNative),this.renderTargetCallback=new c.a(this),this.maskRenderTarget=new s.a(this.canvasMaskElementNative),this.cursorRenderTarget=new s.a(this.canvasCursorElementNative),this.ro.observe(this.clienSizeElementRef.nativeElement)},t.prototype.ngOnDestroy=function(){this.documentLoadedSubscription&&this.documentLoadedSubscription.unsubscribe(),this.zoomChangedSubscription&&this.zoomChangedSubscription.unsubscribe(),this.scrollChangeStateSubscription&&this.scrollChangeStateSubscription.unsubscribe(),this.updateCurrentSubscription&&this.updateCurrentSubscription.unsubscribe(),this.unSubscribeFromAllEvents(),this.hammer.off("pinch pinchend",this.onPinch),this.ro.unobserve(this.clienSizeElementRef.nativeElement)},t.prototype.invalidate=function(){0!=(this.pdrFlags&u.a.kPDR_IsVisible)&&(this.isDirty=!0)},t.prototype.refreshPages=function(){this.documentView&&this.documentView.refreshPages()},t.prototype.resize=function(){var t=this.getElementSize();if(this.canvasRef){var e=this.canvasRef.nativeElement;e.width=t.width,e.height=t.height}this.canvasCursorElementNative&&(this.canvasCursorElementNative.width=t.width,this.canvasCursorElementNative.height=t.height),this.documentView&&this.documentView.resizeView(t)},t.prototype.setCaretTimer=function(){o.j(this.DOCUMENT_CARET_BLINK_TIMER)&&(this.DOCUMENT_CARET_BLINK_TIMER=setInterval(this.drawCaret,500))},t.prototype.killCaretTimer=function(){o.j(this.DOCUMENT_CARET_BLINK_TIMER)||(clearInterval(this.DOCUMENT_CARET_BLINK_TIMER),this.DOCUMENT_CARET_BLINK_TIMER=void 0)},t.prototype.getScrollPos=function(t){return r.d.bLScrollBarType.kBLScrollBarHorz===t?this.clienSizeElementNative.scrollLeft:r.d.bLScrollBarType.kBLScrollBarVert===t?this.clienSizeElementNative.scrollTop:0},t.prototype.zoomIn=function(){this.documentView&&this.documentView.zoomIn()},t.prototype.zoomOut=function(){this.documentView&&this.documentView.zoomOut()},t.prototype.setZoom=function(t){this.documentView&&this.documentView.setZoom(t)},t.prototype.actualSize=function(){this.documentView&&this.documentView.setZoom(1)},t.prototype.changeScrollPositon=function(t){this.documentView&&this.documentView.processScrollEvent(t.bar,r.d.bLScrollEvent.kBLScrollPos,t.position)},t.prototype.setActiveTool=function(t,e,n){void 0===n&&(n=!1),this.documentViewService.setActiveTool(t,e,n)},t.prototype.resetSelection=function(){this.documentViewService.resetSelection()},t.prototype.update=function(t){this.documentView.update(t),this.refreshPages(),this.invalidate()},t.prototype.mouseLeave=function(){"erase-tab"!==this.selectedTabId&&(this.isHiddenMask=!0)},t.prototype.mouseEnter=function(){"cut-out-tab"!==this.selectedTabId&&"erase-tab"!==this.selectedTabId||(this.isHiddenMask=!1)},t.prototype.onItemDrop=function(t){var e=this;this.resetSelection();var n=r.e.point(t.nativeEvent.offsetX,t.nativeEvent.offsetY),i=this.documentView.mapPointToPage(this.documentView.getPageAtPoint(n),n),o=t.dragData.data.rect,s=JSON.parse(JSON.stringify(t.dragData.data.data));R.a.setupTextEditTool(this.documentView,n,o?r.e.rect(i.x,i.y,i.x+o.width,i.y-o.height):null,null,s).then(function(i){if(t.dragData.data.expandable&&i&&e.documentView){var o=i.getTextBlock(),r=e.documentView.document;if(r){var s=e.documentView.getPageAtPoint(n),a=r.getPage(s);a&&R.a.transformTextEdit(r,s,o,a.rect,0,null,!0).then(function(t){i.refreshSelectionData()})}}})},t.prototype.download=function(t,e){this.documentViewService.download(this.renderTarget,t,e)},t.prototype.fillContent=function(t){if(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var n=new s.a(e),i=r.e.rect(0,0,t.width,t.height),o=i.getCenter();n.fillBitmap(i,t),n.translateCTM(o.x,o.y),n.concatCTM(r.e.reflectYMatrix()),n.translateCTM(-o.x,-o.y),this.documentViewService.fillContent(n),this.documentViewService.download(e,this.documentView.getDocument().name)}},t.prototype.getDataMask=function(){if(this.documentView)return this.documentView.getDataMask()},t.prototype.setMask=function(t){this.documentView&&this.documentView.setMask(t)},t.prototype.step=function(){var t=this;this.ngZone.runOutsideAngular(function(){t.requestId=requestAnimationFrame(function(e){t.step()}),t.updateDOM(),(t.isDirty||t.animated)&&t.onDraw()})},t.prototype.start=function(){var t=this;this.requestId||this.ngZone.runOutsideAngular(function(){t.step()})},t.prototype.stop=function(){this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=void 0)},t.prototype.resetDocumentView=function(){this.documentView&&(this.documentView=null)},t.prototype.unsubscribeGlobalViewEvents=function(){this.isGlobalSubscribed&&(this.isGlobalSubscribed=!1)},t.prototype.unsubscribeFromViewEvents=function(){this.onAnimationStartedEvent&&this.onAnimationStartedEvent(),this.onAnimationCompletedEvent&&this.onAnimationCompletedEvent(),this.disposeTimer(),this.pdrFlags=this.pdrFlags&~u.a.kPDR_IsVisible,this.stop(),this.unsubscribeGlobalViewEvents()},t.prototype.resetView=function(){this.resetDocumentView(),this.killCaretTimer(),this.caretPoints[0]=r.e.point(),this.caretPoints[1]=r.e.point(),this.pdrFlags&=~u.a.kPDR_IsCaretVisible,this.invalidate(),this.unsubscribeFromViewEvents(),this.scrollLeft=null,this.scrollTop=null,this.renderTargetCallback.onScrollVisibilityChanged(r.d.bLScrollBarType.kBLScrollBarHorz,!1),this.renderTargetCallback.onScrollVisibilityChanged(r.d.bLScrollBarType.kBLScrollBarVert,!1)},t.prototype.setDocument=function(t){this.resetView(),this.documentView=t,this.documentView&&(-1===this.documentView.renderTargetCallbacks.indexOf(this.renderTargetCallback)&&this.documentView.renderTargetCallbacks.push(this.renderTargetCallback),this.subscribeFromViewEvents(),this.pdrFlags=this.pdrFlags&~u.a.kPDR_IsInitiallyUpdated,this.setCaretTimer(),this.invalidate())},t.prototype.disposeTimer=function(){this.animated=!1,this.animDOMAttribute=!1},t.prototype.refreshCursor=function(){var t=r.d.bLCursorType.kBLCursorArrow;this.documentView&&(t=this.documentView.getCursor()),this.cursor!==t&&(this.cursor=t,this.canvasRef.nativeElement.setAttribute("cursor",this.cursor))},t.prototype.ignoreCapturedByControls=function(t){return!(t.target&&"mobile-input"===t.target.className||"INPUT"!==t.target.tagName.toUpperCase()&&"TEXTAREA"!==t.target.tagName.toUpperCase())},t.prototype.extractButtonFromFlags=function(t){return 0!=(t&r.d.bLInputEventFlags.kBLInputEventFlagLButtonPressed)?r.d.bLPointerButton.kBLPointerButtonLeft:0!=(t&r.d.bLInputEventFlags.kBLInputEventFlagRButtonPressed)?r.d.bLPointerButton.kBLPointerButtonRight:0!=(t&r.d.bLInputEventFlags.kBLInputEventFlagMButtonPressed)?r.d.bLPointerButton.kBLPointerButtonMiddle:r.d.bLPointerButton.kBLPointerButtonLeft},t.prototype.makeEventFlags=function(t){return this.touchService.mouseButtonsState(t)},t.prototype.makeViewPoint=function(t){var e=t.pageX-this.canvasElementNative.getBoundingClientRect().left,n=t.pageY-this.canvasElementNative.getBoundingClientRect().top;return r.e.point(e,n)},t.prototype.drawDocument=function(t){this.documentView&&this.documentView.draw(t)},t.prototype.onDraw=function(){if((this.pdrFlags&u.a.kPDR_IsVisible)===u.a.kPDR_IsVisible&&(this.pdrFlags&u.a.kPDR_IsDrawingNow)!==u.a.kPDR_IsDrawingNow){this.isDirty=!1,this.pdrFlags=this.pdrFlags|u.a.kPDR_IsDrawingNow;try{var t=this.renderTarget;this.updateViewSize(),this.drawDocument(t),(this.pdrFlags&u.a.kPDR_IsCaretVisible)===u.a.kPDR_IsCaretVisible&&(this.pdrFlags&=~u.a.kPDR_IsCaretVisible,this.drawCaret())}catch(e){console.log("error: ",e)}this.pdrFlags=this.pdrFlags&~u.a.kPDR_IsDrawingNow}},t.prototype.translateOverlay=function(t,e,n,i,o,s,a,c){if(t){var u=i,l=o;if(c/90&1&&(u=o,l=i),u>s){var h=this.getScrollPos(r.d.bLScrollBarType.kBLScrollBarHorz);e=h>0?0:6,u=Math.trunc(u-h+12)===s||0===h?s-6:s}if(l>a){var p=this.getScrollPos(r.d.bLScrollBarType.kBLScrollBarVert);n=p>0?0:15,l=Math.trunc(l-p+15+15)===a||0===p?a-15:a}t.style.left=e+"px",t.style.top=n+"px",t.width=u,t.height=l}},t.prototype.updateOverlayViewSize=function(t,e,n,i){if(e&&i){var o=e.position,r=e.getDevSpacePageBox(n).getSize();o&&r&&this.translateOverlay(t,o.x,o.y,r.width,r.height,i.width,i.height,e.rotate)}},t.prototype.updateViewSize=function(){if(this.documentView){var t=this.getElementSize();if(!t.isAreaEmpty()){var e=this.documentView.document;if(e){var n=e.zoom,i=e.getPage(0);this.updateOverlayViewSize(this.canvasMaskElementNative,i,n,t)}(this.pdrFlags&u.a.kPDR_IsInitiallyUpdated)===u.a.kPDR_IsInitiallyUpdated?this.documentView.getViewSize().isEqual(t)||this.documentView.resizeView(t):(this.documentView.initialize(t,this.renderTarget,this.maskRenderTarget,this.cursorRenderTarget),this.pdrFlags=this.pdrFlags|u.a.kPDR_IsInitiallyUpdated)}}},t.prototype.getElementSize=function(){var t=this.clienSizeElementRef.nativeElement;return r.e.size(t.clientWidth,t.clientHeight)},t.prototype.updateDOM=function(){this.ignoreScrollEvents=!0,o.j(this.scrollLeft)||(this.clienSizeElementNative.scrollLeft=this.scrollLeft,this.scrollLeft=null),o.j(this.scrollTop)||(this.clienSizeElementNative.scrollTop=this.scrollTop,this.scrollTop=null),this.ignoreScrollEvents=!1,o.j(this.animDOMAttribute)||(this.clienSizeElementNative.setAttribute("is-animated",this.animDOMAttribute),this.animDOMAttribute=null)},t.prototype.subscribeGlobalViewEvents=function(){this.isGlobalSubscribed||(this.isGlobalSubscribed=!0)},t.prototype.subscribeFromViewEvents=function(){this.pdrFlags=this.pdrFlags|u.a.kPDR_IsVisible,this.start(),this.subscribeGlobalViewEvents()},t.prototype.subscribe=function(){var t=this;this.documentLoadedSubscription=this.documentViewService.documentLoaded.subscribe(function(e){e&&(t.isLoaded=!0,t.setDocument(e.documentView),t.onChangeDocumentState.emit({isDocumentLoaded:!0,id:"???????? - required"}),t.onDocumentLoaded.emit(),setTimeout(function(){e.documentView.setZoom(e.documentView.document.zoom,e.documentView.document.pageView)},100))}),this.zoomChangedSubscription=this.documentViewService.onChangeState.subscribe(function(e){t.onChangeState.emit(e)}),this.scrollChangeStateSubscription=this.documentViewService.onScrollChangeState.subscribe(function(e){t.onScrollChangeState.emit(e)})},t.prototype.mousewheel=function(t){if(this.ignoreCapturedByControls(t))return!1;if(!this.documentView)return!1;var e=0;t.wheelDelta?e=t.wheelDelta/120:t.deltaY&&(e=t.deltaY<0?1:-1);var n={wheelArgs:{}};return n.type=r.d.bLInputEventType.kBLInputEventWheelChanged,n.wheelArgs.delta=e,n.wheelArgs.position=this.makeViewPoint(t),n.wheelArgs.flags=this.makeEventFlags(t),this.documentView.dispatchEvent(n,t)},t.prototype.onDblclick=function(t){if(this.documentView){var e={pointerArgs:{}};e.type=r.d.bLInputEventType.kBLInputEventPointerDoubleClicked,e.pointerArgs.button=r.d.bLPointerButton.kBLPointerButtonLeft,e.pointerArgs.position=this.makeViewPoint(t),e.pointerArgs.flags=this.makeEventFlags(t),this.documentView.dispatchEvent(e,t)}},t.prototype.impKeyEvent=function(t,e){if(!this.beforeKeyEventCheck(t))return!1;var n=t.which||t.keyCode,i={keyArgs:{}};return i.type=e,i.keyArgs.keycode=n,i.keyArgs.flags=this.makeEventFlags(t),229===n?this.onKeyUpChromeAndroid(t):this.documentView.dispatchEvent(i,t)},t.prototype.onKeyUpChromeAndroid=function(t){if(!t)return!1;if("keydown"===t.type)return!1;var e=t.target.value.slice(-1),n={charArgs:{}};return!!e&&(n.type=r.d.bLInputEventType.kBLInputEventCharReceived,n.charArgs.unicode=e,this.documentView.dispatchEvent(n,t))},t.prototype.beforeKeyEventCheck=function(t){return!this.ignoreCapturedByControls(t)&&!!this.documentView},t.prototype.getCharForKeyPress=function(t){return null==t.which?String.fromCharCode(t.keyCode):0!=t.which&&0!=t.charCode?String.fromCharCode(t.which):null},t}()},NMv8:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("mrSG"),o=n("6okS"),r=n("ukOs"),s=n("khrK"),a=n("pz3r"),c=n("rxHE"),u=function(){function t(){}return t.create=function(t,e,n,u,l,h,p,d,f,g,m){var v=new a.a,y=r.a.pointer,b=f?[f.left,f.top,f.right,f.bottom]:[t,e,t+this.DefaultWidth,e-this.DefaultHeight],P=m&&m.T?m.T:{B:b,BI:y,L:[{B:b,F:0,T:g||""}],iw:0};P.B=b,P.BI=y,P.effect=i.__assign({},d,P.effect);var _={I:[P],T:"text"},w=l?l.toHex(!0):l,x={textblock:{F:m&&m.F?m.F:[{F:n,s:h,f:p,S:u,C:w,fl:6,u:!1}],T:P}};if(x.textblock&&x.textblock.T){var T=x.textblock.T;o.d(T)||(T=[T]);var S=c.a.createInstanceCollection(x.textblock.F,T);if(o.d(S)){var C=S[0],k=s.a.createInstance(_);r.a.add({BI:C.BI,json:_,content:k,block:C}),v.resolve(C)}else v.reject()}return v.promise},t.transform=function(t,e,n,i,u,l,h){var p=new a.a;if(!n)return new Promise(function(t,e){t(null)});if(n.isDeleted)return new Promise(function(t,e){t(null)});var d=t.getPage(e).textBlocks.indexOf(n),f=r.a.getJson(d);if(!f)return new Promise(function(t,e){t(null)});var g=null;if(f){var m=f.I;o.d(m)&&(g=m[0])&&(g.B=[i.left,i.top,i.right,i.bottom],g.r=u)}var v={textblock:{F:[],T:g}};if(v.textblock&&v.textblock.T){var y=v.textblock.T;o.d(y)||(y=[y]);var b=c.a.createInstanceCollection(v.textblock.F,y);if(o.d(b)){var P=b[0];if(P){var _=s.a.createInstance(f);if(r.a.updateContent(_,n.BI),h)for(var w=Math.min(i.width/n.rect.width,i.height/n.rect.height),x=0;x<n.lines.length;x++){var T=n.lines[x].font;T.size=T.size*w}n.rotate=P.rotate,n.rect=P.rect,n.reflect=P.reflect}}}return p.resolve(n),p.promise},t.edit=function(t,e,n,i){var u=new a.a;if(!n)return new Promise(function(t,e){t(null)});if(n.isDeleted)return new Promise(function(t,e){t(null)});n.lines=i;var l=t.getPage(e).textBlocks.indexOf(n),h=r.a.getJson(l);if(!h)return new Promise(function(t,e){t(null)});var p=null;if(h){var d=h.I;if(o.d(d)&&(p=d[0])){var f=n.rect;f&&(p.B=[f.left,f.top,f.right,f.bottom])}}var g={textblock:{F:[],T:p}};if(g.textblock&&g.textblock.T){var m=g.textblock.T;o.d(m)||(m=[m]);var v=c.a.createInstanceCollection(g.textblock.F,m);if(o.d(v)){var y=v[0];if(y){var b=s.a.createInstance(h);r.a.updateContent(b,n.BI),n.rotate=y.rotate,n.rect=y.rect,n.reflect=y.reflect,n.lines=i}}}return u.resolve(),u.promise},t.delete=function(t,e,n){var i=t.getPage(e).textBlocks.indexOf(n);r.a.remove(i)},t.DefaultWidth=30,t.DefaultHeight=120,t}()},NWuy:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=10,o=function(){function t(t){this.elementRef=t,this.shouldFocusElement="",this.timer=null,this.timerDelay=i}return t.prototype.ngAfterContentInit=function(){""===this.shouldFocusElement&&this.startFocusWorkflow()},t.prototype.ngOnChanges=function(t){t.timerDelay&&"number"!=typeof this.timerDelay&&isNaN(this.timerDelay=+this.timerDelay)&&(this.timerDelay=i),t.shouldFocusElement&&(this.shouldFocusElement?this.startFocusWorkflow():this.stopFocusWorkflow())},t.prototype.ngOnDestroy=function(){this.stopFocusWorkflow()},t.prototype.startFocusWorkflow=function(){var t=this;this.timer||(this.timer=setTimeout(function(){t.timer=null,t.elementRef.nativeElement.focus()},this.timerDelay))},t.prototype.stopFocusWorkflow=function(){clearTimeout(this.timer),this.timer=null},t}()},NthO:function(t,e,n){"use strict";var i=n("exf4"),o=n("6okS"),r=function(){function t(){this.m_FillBrush="#FF0000",this.m_FrameBrush="RGBA(255,255,255,1)",this.m_DashesBrush="RGBA(0,0,0,1)",this.m_Dashes=[10,5],this.m_LineWidth=0,this.m_Radius=25}return t.prototype.mapPointToMask=function(t,e,n,r,s){var a=i.e.point(),c=t.getPage(e);return o.j(c)?a:(a=c.getPageToDevSpaceMatrix(r,0).mapPoint(n,!0).floor(),this.offsetPointView(a,s),a)},t.prototype.offsetPointView=function(t,e){t&&e&&(0!==e.y&&(t.y+=e.y+15),0!==e.x&&(t.x+=e.x+6))},t}(),s=n("mrSG"),a=function(t){function e(e){var n=t.call(this)||this;return n.documentView=e,n.m_Finished=!1,n.m_Removed=!0,n.m_Pressed=!1,n.globalcompositeoperation=null,n}return s.__extends(e,t),e.prototype.initialize=function(t){t&&(t.fillBrush&&(this.m_FillBrush=t.fillBrush),isFinite(t.brushSize)&&(this.m_Radius=t.brushSize/2),this.globalcompositeoperation=t.globalcompositeoperation?t.globalcompositeoperation:null)},e.prototype.onDraw=function(t,e){},e.prototype.terminate=function(){this.documentView=null},e.prototype.getToolType=function(){return i.h.Brush},e.prototype.isFinished=function(){return this.m_Finished},e.prototype.handleEvent=function(t){switch(t.type){case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onMouseDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onMouseUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventWheelChanged:return!1;case i.d.BLInputEventType.kBLInputEventPointerLeave:return this.onMouseLeave(t.pointerArgs.position,t.pointerArgs.flags)}return!1},e.prototype.removed=function(){return this.m_Removed},e.prototype.onMouseDown=function(t,e){if(!this.documentView)return!1;var n=this.mapPointToMask(this.documentView.document,0,this.documentView.mapPointToPage(0,t),this.documentView.document.zoom,this.documentView.getLayoutOffset());return!!n&&(this.m_Pressed=!0,this.lastPoint={x:n.x,y:n.y},this.drawMarker(this.documentView.maskRenderTarget,n),!0)},e.prototype.onMouseUp=function(t,e){return!!this.documentView&&(this.m_Pressed=!1,this.documentView.updateMask(),!0)},e.prototype.onMouseMove=function(t,e){if(this.documentView.setCursor(i.d.bLCursorType.kBLCursorCross),!this.documentView)return!0;if(this.drawCursor(this.documentView.cursorRenderTarget,t),!this.m_Pressed)return!0;var n=this.mapPointToMask(this.documentView.document,0,this.documentView.mapPointToPage(0,t),this.documentView.document.zoom,this.documentView.getLayoutOffset());return!n||(this.draw(this.documentView.maskRenderTarget,n),!0)},e.prototype.onMouseLeave=function(t,e){if(!this.documentView)return!0;var n=this.documentView.cursorRenderTarget;return!n||(n.clear(),!0)},e.prototype.drawCursor=function(t,e){t&&(t.clear(),t.drawMarker(e,this.m_Radius,this.m_FrameBrush),t.drawMarker(e,this.m_Radius,this.m_DashesBrush,null,null,this.m_Dashes))},e.prototype.drawMarker=function(t,e){if(t){var n=t.getCompositeOperation();t.setCompositeOperation(this.globalcompositeoperation),t.drawMarker(e,this.m_Radius,null,this.m_FillBrush),t.setCompositeOperation(n)}},e.prototype.draw=function(t,e){if(t&&e){var n=t.context;if(n){var i=t.getCompositeOperation();t.setCompositeOperation(this.globalcompositeoperation),n.lineJoin=n.lineCap="round";for(var o={x:e.x,y:e.y},r=this.distanceBetween(this.lastPoint,o),s=this.angleBetween(this.lastPoint,o),a=Math.min(this.m_Radius,5),c=0;c<r;c+=a){var u=this.lastPoint.x+Math.sin(s)*c,l=this.lastPoint.y+Math.cos(s)*c;n.beginPath(),n.fillStyle=this.m_FillBrush,n.arc(u,l,this.m_Radius,!1,2*Math.PI,!1),n.closePath(),n.fill()}t.setCompositeOperation(i),this.lastPoint=o}}},e.prototype.distanceBetween=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.prototype.angleBetween=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},e}(r),c=n("Vz+2"),u=function(t){function e(e){var n=t.call(this)||this;return n.documentView=e,n.m_Context=null,n.m_Finished=!1,n.m_Removed=!0,n.m_Pressed=!1,n.m_isReadOnly=!1,n}return s.__extends(e,t),e.prototype.initialize=function(t){t&&(t.fillBrush&&(this.m_FillBrush=t.fillBrush),t.m_FrameBrush&&(this.m_FrameBrush=t.m_FrameBrush),t.m_DashesBrush&&(this.m_DashesBrush=t.m_DashesBrush),t.m_Dashes&&(this.m_Dashes=t.m_Dashes),t.m_LineWidth&&(this.m_LineWidth=t.m_LineWidth))},e.prototype.onDraw=function(t,e){this.drawSelection(t,e)},e.prototype.terminate=function(){this.m_Context=null,this.documentView=null},e.prototype.getToolType=function(){return i.h.Lasso},e.prototype.isFinished=function(){return this.m_Finished},e.prototype.handleEvent=function(t){switch(t.type){case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onMouseDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onMouseUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventWheelChanged:return!1}return!1},e.prototype.removed=function(){return this.m_Removed},e.prototype.onMouseDown=function(t,e){if(this.m_isReadOnly)return!0;if(this.m_Context=new c.b(this.documentView,this.m_FillBrush),this.m_Context.onMouseDown(t)){var n=this.documentView.getPageAtPoint(t);n<0&&(n=0),n>=0&&(this.m_Context.setPageIndex(n),this.addPointToPath(t),this.m_Pressed=!0,this.documentView.invalidate())}return!0},e.prototype.onMouseUp=function(t,e){return this.m_Pressed&&!this.m_isReadOnly&&this.m_Context.onMouseUp(t)&&(this.m_Pressed=!1,this.documentView&&this.documentView.document&&(this.drawOnMask(this.documentView.maskRenderTarget,this.m_Context.getPath(),this.documentView.document,this.m_FillBrush),this.documentView.updateMask())),!0},e.prototype.onMouseMove=function(t,e){return this.documentView.setCursor(i.d.bLCursorType.kBLCursorArrow),this.m_Pressed&&!this.m_isReadOnly&&(this.addPointToPath(t),this.documentView.invalidate()),!0},e.prototype.drawOnMask=function(t,e,n,i){if(t&&e&&n){e=this.mapPointsToMask(e,n);var o=this.m_Context.createGeometry(e);o&&t.fillGeometry(o,this.m_FillBrush)}},e.prototype.mapPointsToMask=function(t,e){if(t&&e){for(var n=[],i=0;i<t.length;i++){var o=t[i];o&&n.push(this.mapPointToMask(e,0,o,e.zoom,this.documentView.getLayoutOffset()))}return n}},e.prototype.drawSelection=function(t,e){if(t&&this.m_Context&&this.m_Context.getDrawing()&&this.m_Context.getPageIndex()===e){var n=this.m_Context.createGeometry(this.m_Context.getPath());n&&(t.strokeGeometry(n,this.m_FrameBrush,this.m_LineWidth),t.strokeGeometry(n,this.m_DashesBrush,this.m_LineWidth,{dashPattern:this.m_Dashes}))}},e.prototype.addPointToPath=function(t){if(this.documentView){var e=this.m_Context.getPageIndex(),n=this.documentView.mapPointToPage(e,t);this.m_Context.addPointToPath(n)}},e}(r),l=n("21MZ"),h=function(t){function e(e){var n=t.call(this)||this;return n.documentView=e,n.m_Finished=!1,n._tracking=!1,n._tracker=null,n.m_IsReadOnly=!1,n}return s.__extends(e,t),e.prototype.initialize=function(t){t&&(t.fillBrush&&(this.m_FillBrush=t.fillBrush),t.m_FrameBrush&&(this.m_FrameBrush=t.m_FrameBrush),t.m_DashesBrush&&(this.m_DashesBrush=t.m_DashesBrush),t.m_Dashes&&(this.m_Dashes=t.m_Dashes),t.m_LineWidth&&(this.m_LineWidth=t.m_LineWidth))},e.prototype.onDraw=function(t,e){this.drawSelection(t,e)},e.prototype.terminate=function(){this._tracker&&this._tracker.dispose(),this._tracker=null,this.documentView=null},e.prototype.getToolType=function(){return i.h.Rect},e.prototype.isFinished=function(){return this.m_Finished},e.prototype.handleEvent=function(t){switch(t.type){case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onMouseDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onMouseUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags)}return!1},e.prototype.removed=function(){return!0},e.prototype.restoreSelection=function(){},e.prototype.onMouseDown=function(t,e){if(this.m_IsReadOnly)return!0;this._tracking=!0,this._tracker&&this._tracker.dispose();var n=i.e.size(0,0);return this._tracker=new c.a(n,this.documentView,this.m_FrameBrush,this.m_FillBrush),!!this._tracker.onMouseDown(t)},e.prototype.onMouseUp=function(t,e){if(this.m_IsReadOnly)return!0;if(this._tracking=!1,!this._tracker)return!1;if(this._tracker.onMouseUp(t)){var n=this._tracker.getRect();return this._tracker.dispose(),this.documentView&&(this.drawOnMask(this.documentView.maskRenderTarget,n,this.documentView.document,this.m_FillBrush),this.documentView.updateMask()),!0}return!1},e.prototype.onMouseMove=function(t,e){if(this.m_IsReadOnly)return!0;if(!this._tracking){var n=c.d.hitTestChar(this.documentView,t);return this.documentView.setCursor(n?i.d.bLCursorType.kBLCursorIBeam:i.d.bLCursorType.kBLCursorCross),!0}return!!this._tracker.onMouseMove(t)&&(this.documentView.setCursor(i.d.bLCursorType.kBLCursorCross),!0)},e.prototype.drawOnMask=function(t,e,n,o){if(t&&e&&n){var r=i.e.quadFromRect(e),s=this.documentView.getLayoutOffset();r=new i.b(this.mapPointToMask(n,0,r.top_left(),n.zoom,s),this.mapPointToMask(n,0,r.top_right(),n.zoom,s),this.mapPointToMask(n,0,r.bottom_left(),n.zoom,s),this.mapPointToMask(n,0,r.bottom_right(),n.zoom,s)),l.b.drawFrame(t,r,o)}},e.prototype.drawSelection=function(t,e){if(this._tracker&&this._tracker.getTracking()){var n=this._tracker.getRect();l.b.drawFrame(t,i.e.quadFromRect(n),null,this.m_FrameBrush,null,this.m_LineWidth),l.b.drawFrame(t,i.e.quadFromRect(n),null,this.m_DashesBrush,this.m_Dashes,this.m_LineWidth)}},e}(r),p=n("Y8xn"),d=function(){function t(t){this._documentView=t,this.annotObjectFactory=null,this.dragging_=!1,this.shouldResetFocus_=!1,this.tempPt=i.e.point(),this.hoverObject_=null,this.hoverMouseDown_=!1,this.focusObject_=null}return t.prototype.initialize=function(){this.dragging_=!1},t.prototype.onActiveToolChanged=function(){this.focusObject_=null},t.prototype.onUndoRedoChanged=function(){this.focusObject_=null},t.prototype.onPagesChanged=function(){this.focusObject_=null},t.prototype.onDraw=function(t,e){this.focusObject_&&this.focusObject_.drawFocus(t,e)},t.prototype.terminate=function(){this.dragging_&&this._abortDragView(),this.focusObject_&&this.focusObject_.blur(),this._documentView=null},t.prototype.getToolType=function(){return i.h.View},t.prototype.isFinished=function(){return!1},t.prototype.handleEvent=function(t){if(t.type===i.d.BLInputEventType.kBLInputEventPointerMoved){if(Math.abs(t.pointerArgs.button.x-this.tempPt.x)<1&&Math.abs(t.pointerArgs.button.y-this.tempPt.y)<1)return!1;this.tempPt=t.pointerArgs.button}switch(t.type){case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventKeyPressed:return this.onKeyDown(t.keyArgs.keycode,t.keyArgs.flags);case i.d.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags)}return!1},t.prototype.removed=function(){return!1},t.prototype.focusAnnot=function(t,e){var n=null;return e&&-1!=t&&(n=p.a.createInstance(this._documentView,t,e)),this._selectAnnotByTab(n),!0},t.prototype.restoreSelection=function(){},t.prototype.onLButtonDown=function(t,e){return!!this.onMouseDown(i.d.BLPointerButton.kBLPointerButtonLeft,t,e)||this._beginDragView(t)},t.prototype.onLButtonUp=function(t,e){return!!this.onMouseUp(i.d.BLPointerButton.kBLPointerButtonLeft,t,e)||!!this.dragging_&&this._endDragView(t)},t.prototype.onRButtonDown=function(t,e){return!!this.onMouseDown(i.d.BLPointerButton.kBLPointerButtonRight,t,e)},t.prototype.onRButtonUp=function(t,e){return!!this.onMouseUp(i.d.BLPointerButton.kBLPointerButtonRight,t,e)||(this._documentView.showContextMenu(i.d.ContextMenuType.Hand,t,0),!0)},t.prototype.onKeyUp=function(t,e){return t===i.d.kBLKey.kBLKey_TAB||!!this.focusObject_&&this.focusObject_.keyUp(t)},t.prototype.onKeyDown=function(t,e){return t===i.d.kBLKey.kBLKey_TAB?(0!=(e&i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?this.focusAnnotImpl().prev():this.focusAnnotImpl().next(),!0):!!this.focusObject_&&this.focusObject_.keyDown(t)},t.prototype.selectField=function(t,e,n){if(!e)return!0;var i=e.getCenter();return i?(this.focusObject_=this.hitTest(i,n),this.focusObject_&&(this.focusObject_.focus(),this.hoverObject_=this.focusObject_),!0):void 0},t.prototype.selectAnnot=function(t,e){if(e)return this.focusObject_=p.a.createInstance(this._documentView,t,e),this.focusObject_&&(this.focusObject_.focus(),this.hoverObject_=this.focusObject_),!0},t.prototype._beginDragView=function(t){return!this.dragging_&&(this._documentView.setCursor(i.d.bLCursorType.kBLCursorDragHand),this._documentView.pointerPressed(t),this.dragging_=!0,!0)},t.prototype._endDragView=function(t){return this.dragging_&&(this._documentView.setCursor(i.d.bLCursorType.kBLCursorHand),this._documentView.pointerReleased(t),this.dragging_=!1),!0},t.prototype._continueDragView=function(t){return!!this.dragging_&&(this._documentView.setCursor(i.d.bLCursorType.kBLCursorDragHand),this._documentView.pointerMoved(t),!0)},t.prototype._abortDragView=function(){var t=i.e.point(0,0);return this._endDragView(t),!1},t.prototype._selectAnnotByTab=function(t){p.a.isEqual(this.focusObject_,t)||(this.focusObject_&&this.focusObject_.blur(),this._documentView.resetSelection(!0),this.focusObject_=t,this.focusObject_&&this.focusObject_.focus())},t.prototype._hitTestAnnot=function(t,e){var n;if(-1!=(n=this._documentView.getPageAtPoint(t))){this._documentView.mapPointToPage(n,t);var i=this._documentView.document.getPage(n);if(!i)return null;var r=i.annotations;if(o.j(r))return null;this._documentView.getViewState();for(var s=0;s<r.length;s++){var a=r[s];a&&o.j(a.parentIndex)&&!o.j(a.rect)&&a.isVisible&&p.a.createInstance(this._documentView,n,a)}}return null},t.prototype._hitTestEsl=function(t){return null},t.prototype.hitTest=function(t,e){return this.focusObject_&&this.focusObject_.hitTest(t)?this.focusObject_:this._hitTestAnnot(t,e)||this._hitTestEsl(t)||null},t.prototype.onMouseUp=function(t,e,n){if(this.hoverMouseDown_){if(this.hoverObject_){p.a.isEqual(this.focusObject_,this.hoverObject_)||(this.focusObject_&&this.focusObject_.blur(),this.focusObject_=this.hoverObject_,this.focusObject_.focus());var i=this.hitTest(e);p.a.isEqual(i,this.hoverObject_)?this.hoverObject_.mouseUp(t,e,n):(this.hoverObject_.mouseExit(),this.hoverObject_=i,i&&i.mouseEnter())}return this.hoverMouseDown_=!1,this._documentView.invalidate(),!0}var o=!1;return this.shouldResetFocus_&&(this.shouldResetFocus_=!1,(i=this.hitTest(e))||(this.focusObject_&&this.focusObject_.blur(),this.focusObject_=null,o=!0)),o&&this._documentView.resetSelection(!1),!1},t.prototype.onMouseDown=function(t,e,n){return this.hoverObject_&&(p.a.isEqual(this.focusObject_,this.hoverObject_)||this._documentView.resetSelection(!0),this.hoverObject_.mouseDown(t,e,n))?(this.hoverMouseDown_=!0,!0):(this.shouldResetFocus_=!0,!1)},t.prototype.onMouseMove=function(t,e){if(this.hoverMouseDown_)return!0;if(this.shouldResetFocus_=!1,this.dragging_)return this._continueDragView(t);var n=this.hitTest(t);if(n)return this.hoverObject_?p.a.isEqual(n,this.hoverObject_)||(this.hoverObject_.mouseExit(),this.hoverObject_=n,n.mouseEnter()):(this.hoverObject_=n,n.mouseEnter()),this._documentView.invalidate(),!0;if(this.hoverObject_){var o=this.hoverObject_;this.hoverObject_=null,o.mouseExit()}return this._documentView.setCursor(i.d.bLCursorType.kBLCursorHand),this._documentView.pointerMoved(t),!0},t.prototype.focusAnnotImpl=function(){var t=this,e=this._documentView.getDocument();if(e){var n=e.pageSelectedIndex,i=e.getPage(n),o=0,r=null,s=i.annotations||[],a=function(){if(r){var e=p.a.createInstance(t._documentView,n,r);t._selectAnnotByTab(e),t._documentView.invalidate()}};return{next:function(){t.focusObject_&&p.a.isAnnotObject(t.focusObject_)?(o=t.focusObject_.getAnnotIndexOnPage(),++o>=s.length&&(o=0),r=s.length>0?s[o]:null):r=s.first(),a()},prev:function(){t.focusObject_&&p.a.isAnnotObject(t.focusObject_)?(o=t.focusObject_.getAnnotIndexOnPage(),--o<0&&(o=s.length-1),r=s.length>0?s[o]:null):r=s.last(),a()}}}},t}(),f={Started:0,PutSecondPoint:1,LeaderLineEdit:2,Finished:3},g={Disable:0,OptionEnable:1,ShiftPressed:2},m=function(t){function e(e){var n=t.call(this)||this;return n.documentView=e,n.m_blocked=!1,n.m_blocked_by_ctxmenu=!1,n.m_Finished=!1,n.m_Removed=!0,n.m_Pressed=!1,n.m_Selection=null,n.m_shape=null,n.m_transformedShape=[],n.m_shapeContext={},n.m_isReadOnly=!1,n.m_captionMargin=10,n.m_LeaderLineLength=0,n.m_LeaderLineExtension=0,n.m_LeaderLineOffset=0,n.m_State=f.Finished,n.m_LineNormalVector=i.e.point(-1,-1),n.m_UseOrthographicLine=g.Disable,n.m_caption="",n.m_minimumNumberOfVertices=2,n.m_polylineFinished=!0,n.m_MeasureDict=null,n.m_Type=i.d.measurementsEnum.perimeter,n.m_FillBrushMask="#FF0000",n}return s.__extends(e,t),Object.defineProperty(e.prototype,"m_points",{get:function(){return this.m_Selection?this.m_Selection.getPath():[]},enumerable:!0,configurable:!0}),e.prototype.initialize=function(t){if(t){var e=t.type;e&&(this.m_Type=e),t.fillBrush&&(this.m_FillBrushMask=t.fillBrush)}this.m_shapeContext=t,this.resetDistance(),this.m_State=f.Finished,this.m_minimumNumberOfVertices=this.m_Type===i.d.measurementsEnum.perimeter?2:3},e.prototype.onDraw=function(t,e){this.drawSelection(t,e)},e.prototype.terminate=function(){this.m_Selection=null,this.m_shape=null,this.documentView=null},e.prototype.getToolType=function(){return i.h.Polygon},e.prototype.isFinished=function(){return this.m_Finished},e.prototype.handleEvent=function(t){switch(t.type){case i.d.BLInputEventType.kBLInputEventKeyReleased:switch(t.keyArgs.keycode){case i.d.kBLKey.kBLKey_ESCAPE:case i.d.kBLKey.kBLKey_DELETE:this.cancelMeasurement()}break;case i.d.BLInputEventType.kBLInputEventPointerDoubleClicked:(this.m_Selection.isPolygon()||this.m_Selection.isPolyline())&&this.m_points.length>0&&this.m_points.splice(-1,1),this.completeMeasurement();break;case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onMouseDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onMouseUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return 0!=this.m_blocked||0!=this.m_blocked_by_ctxmenu||this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);default:return!1}return!0},e.prototype.removed=function(){return this.m_Removed},e.prototype.focusAnnot=function(t,e){return!1},e.prototype.restoreSelection=function(){},e.prototype.onMouseDown=function(t,e){if(0==this.m_blocked&&0==this.m_blocked_by_ctxmenu){var n=this.getPageIndex(t);n<0&&(n=0),this.m_Selection||(this.m_Selection=new c.c(this.m_Type,this.m_FillBrush)),this.setCurrentPageIndex(n)&&(this.beginSelection(t),this.m_Pressed=!0)}return!0},e.prototype.onMouseUp=function(t,e){if(0==this.m_blocked&&0==this.m_blocked_by_ctxmenu){var n=this.isActionFinished();!n&&(this.endSelection(t),this.documentView.invalidate(),n=this.isActionFinished())&&(this.m_blocked=!0,this.documentView.getCursor(),this.documentView.setCursor(i.d.BLCursorType.kBLCursorWait),this.documentView.invalidate())}return!0},e.prototype.onMouseMove=function(t,e){if(this.documentView)return this.documentView.setCursor(i.d.bLCursorType.kBLCursorArrow),i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?this.enableOrthographicLine():this.disableOrthographicLine(),!this.isActionFinished()&&this.moveSelection(t)&&this.documentView.invalidate(),!0},e.prototype.onRButtonUp=function(t,e){return!this.isActionFinished()&&(this.m_blocked_by_ctxmenu=!0,this.documentView.showContextMenu(i.d.ContextMenuType.Measurement,t,0),!0)},e.prototype.getDefaultLeaderLineLength=function(){return 15},e.prototype.getDefaultLeaderLineExtension=function(){return 5},e.prototype.getDefaultLeaderLineOffset=function(){return 0},e.prototype.getDefaultMeasurementUseOrthographicLines=function(){return!1},e.prototype.useOrthographicLine=function(){this.m_UseOrthographicLine|=g.OptionEnable},e.prototype.enableOrthographicLine=function(){this.m_UseOrthographicLine|=g.ShiftPressed},e.prototype.disableOrthographicLine=function(){0!=(this.m_UseOrthographicLine&g.ShiftPressed)&&(this.m_UseOrthographicLine^=g.ShiftPressed)},e.prototype.isOrthographicLineEnable=function(){return this.m_UseOrthographicLine!=g.Disable},e.prototype.setCurrentPageIndex=function(t){return t>=0&&(this.m_Selection.setPageIndex(t),!0)},e.prototype.mapPointToPage=function(t){return this.documentView.mapPointToPage(this.m_Selection.getPageIndex(),t)},e.prototype.getPageIndex=function(t){return this.documentView.getPageAtPoint(t)},e.prototype.beginSelection=function(t){var e=this.m_Selection.getType(),n=t.copy();switch(n=this.mapPointToPage(n),e){case i.d.measurementsEnum.distance:this.m_State==f.Finished&&(this.m_Selection.isLineFinished=!1,this.resetDistance(),this.m_Selection.endSelection0(i.e.point()),this.m_Selection.endSelection(i.e.point()),this.m_State=f.Started,this.m_Selection.beginSelection(this.mapPointToPage(t)),this.getDefaultMeasurementUseOrthographicLines()&&this.useOrthographicLine());break;case i.d.measurementsEnum.perimeter:case i.d.measurementsEnum.area:0==this.m_points.length?(this.m_polylineFinished=!1,this.m_Selection.endSelection0(i.e.point()),this.m_Selection.endSelection(i.e.point()),this.m_Selection.beginSelection(this.mapPointToPage(t)),this.getDefaultMeasurementUseOrthographicLines()&&this.useOrthographicLine()):n=this.makeLineOrthographic(this.m_points[this.m_points.length-1],n),this.m_points.push(n)}},e.prototype.endSelection=function(t){switch(this.m_Selection.getType()){case i.d.measurementsEnum.distance:if(t=this.mapPointToPage(t),this.m_State==f.Started)this.m_State=f.PutSecondPoint;else if(this.m_State==f.PutSecondPoint){var e=this.slDefaultPreferences.Measurement["Use as default"];this.endLineEdit(t),e&&!this.isAreaEmpty()&&this.endLeaderLineEdit(t)}else this.m_State==f.LeaderLineEdit&&this.endLeaderLineEdit(t);break;case i.d.measurementsEnum.perimeter:case i.d.measurementsEnum.area:t.x<0&&t.y<0&&this.m_points.length>=this.m_minimumNumberOfVertices&&(this.m_Selection.endSelection(this.m_points[this.m_points.length-1]),this.updateSelectionRect())}},e.prototype.moveSelection=function(t){if(!this.m_Selection)return!1;var e=this.m_Selection.getStartPoint(),n=this.m_Selection.getEndPoint(),o=this.mapPointToPage(t),r=this.m_Selection.getType(),s=this.getCurrentPageCropBox();switch(r){case i.d.measurementsEnum.distance:if(this.m_State==f.Started||this.m_State==f.PutSecondPoint)s&&(o=this.makeLineOrthographic(e,o),this.normalizePoint(o,s),this.m_Selection.moveSelection(o),this.m_LineNormalVector=this.getIdentityNormalToLine(e,n));else if(this.m_State==f.LeaderLineEdit){var a=i.e.vecDotProduct(i.e.point(o.x-e.x,o.y-e.y),this.m_LineNormalVector);this.exceedesMinimumLeaderLineLength(a)&&(this.m_LeaderLineLength=a)}break;case i.d.measurementsEnum.perimeter:case i.d.measurementsEnum.area:s&&0!=this.m_points.length&&(o=this.makeLineOrthographic(this.m_points[this.m_points.length-1],o),this.m_Selection.moveSelection(o))}return o},e.prototype.updateSelectionRect=function(){var t=this.m_points.reduce(function(t,e){return Math.min(t.x,e.x)}),e=this.m_points.reduce(function(t,e){return Math.max(t.x,e.x)}),n=this.m_points.reduce(function(t,e){return Math.min(t.y,e.y)}),i=this.m_points.reduce(function(t,e){return Math.max(t.y,e.y)});this.m_Selection.setRect(t,n,e,i)},e.prototype.endLineEdit=function(t){if(!this.isAreaEmpty()){var e=this.m_Selection.getStartPoint(),n=this.m_Selection.getEndPoint0();this.m_Selection.isLineFinished=!0,this.m_Selection.endSelection(t),this.m_State=f.LeaderLineEdit,e.x>n.x&&(this.m_Selection.swapStartAndEnd(),this.m_LineNormalVector=i.e.point(-1*this.m_LineNormalVector.x,-1*this.m_LineNormalVector.y),this.documentView.invalidate())}},e.prototype.endLeaderLineEdit=function(t){this.m_State=f.Finished,this.m_Selection.endSelection(t)},e.prototype.exceedesMinimumLeaderLineLength=function(t){return Math.abs(this.getDefaultLeaderLineLength())<Math.abs(t)},e.prototype.getCurrentPageCropBox=function(){var t=null;try{t=this.documentView.document.getPage(this.m_Selection.getPageIndex()).getCropBox()}catch(e){}return t},e.prototype.normalizePoint=function(t,e){t.x<0&&(t.x=0),t.x>e.right&&(t.x=e.right),t.y<0&&(t.y=0),t.y>e.top&&(t.y=e.top)},e.prototype.normalize=function(t,e,n){t<e&&(t=e),t>n&&(t=n)},e.prototype.makeLineOrthographic=function(t,e){return this.isOrthographicLineEnable()?Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?i.e.point(e.x,t.y):i.e.point(t.x,e.y):e},e.prototype.getIdentityNormalToLine=function(t,e){return i.e.point(e.x-t.x,e.y-t.y).vecNormal().vecNormalized()},e.prototype.endEmptySelection=function(t,e){this.m_Selection.endSelection(e)},e.prototype.isFigureValid=function(){return this.m_points.length>1},e.prototype.applyMatrix=function(t,e){var n=i.e.matrix(),o=i.e.shapeRect(e),r=this.m_Selection.getRect(),s=this.m_Selection.getStartPoint(),a=this.m_Selection.getEndPoint();n=i.e.scalingMatrix(r.getWidth()/o.getWidth(),r.getHeight()/o.getHeight(),r.getOrigin()).multiply(n),n=i.e.translationMatrix(r.min_x(),r.min_y()).multiply(n),s.x>a.x&&(n=i.e.matrix(-1,0,0,1,o.getWidth(),0).multiply(n)),s.y<a.y&&(n=i.e.matrix(1,0,0,-1,0,o.getHeight()).multiply(n)),n=i.e.translationMatrix(-o.min_x(),-o.min_y()).multiply(n);for(var c=0,u=this.m_shape.length;c<u;c++)e[c]=n.mapPoint(t[c]).copy()},e.prototype.getDistanceGeometry=function(t){var e=this.m_Selection.getStartPoint(),n=this.m_Selection.getEndPoint0(),o=this.m_Selection.getEndPoint(),r=(this.m_Selection.getRect(),new l.a);if(r){var s=r.getBound(null),a=i.e.rect(e.x,e.y,o.x,o.y),c=i.e.matrix();c=i.e.translationMatrix(a.min_x(),a.min_y()).multiply(c),c=i.e.scalingMatrix(a.getWidth()/s.getWidth(),a.getHeight()/s.getHeight()).multiply(c),c=i.e.translationMatrix(-s.min_x(),-s.min_y()).multiply(c);var u=r.transform(c);if(this.m_Selection.isLine()){e.x>n.x&&(n=[e,e=n][0]);var h=this.m_LeaderLineLength>=0?i.e.point(n.x-e.x,n.y-e.y):i.e.point(e.x-n.x,e.y-n.y),p=i.e.point(-h.y,h.x).vecNormalized(),d=i.e.point(e.x+p.x*this.m_LeaderLineOffset,e.y+p.y*this.m_LeaderLineOffset),f=i.e.point(n.x+p.x*this.m_LeaderLineOffset,n.y+p.y*this.m_LeaderLineOffset),g=Math.abs(this.m_LeaderLineLength),m=i.e.point(d.x+p.x*g,d.y+p.y*g),v=i.e.point(f.x+p.x*g,f.y+p.y*g),y=i.e.point(m.x+p.x*this.m_LeaderLineExtension,m.y+p.y*this.m_LeaderLineExtension),b=i.e.point(v.x+p.x*this.m_LeaderLineExtension,v.y+p.y*this.m_LeaderLineExtension);if(0==this.m_LeaderLineLength&&0==this.m_LeaderLineExtension||(this.drawLine(u,d,y),this.drawLine(u,f,b)),this.drawLine(u,m,v),u.endFigureClose(),this.m_Selection.options.isDistance){var P=this.getFiller(t);"function"==typeof P&&(P(u,m,v),P(u,v,m))}}return u}return null},e.prototype.getPerimeterGeometry=function(t){var e=this.m_Selection.getStartPoint(),n=(this.m_Selection.getEndPoint0(),this.m_Selection.getEndPoint()),o=(this.m_Selection.getRect(),new l.a);if(o){var r=o.getBound(null),s=i.e.rect(e.x,e.y,n.x,n.y),a=i.e.matrix();a=i.e.translationMatrix(s.min_x(),s.min_y()).multiply(a),a=i.e.scalingMatrix(s.getWidth()/r.getWidth(),s.getHeight()/r.getHeight()).multiply(a),a=i.e.translationMatrix(-r.min_x(),-r.min_y()).multiply(a);var c=o.transform(a);if(this.isFigureValid()){for(var u=0;u<this.m_points.length-1;++u)this.drawLine(c,i.e.point(this.m_points[u].x,this.m_points[u].y),i.e.point(this.m_points[u+1].x,this.m_points[u+1].y));t==i.d.measurementsEnum.area&&this.drawLine(c,n,e)}return 0!=this.m_points.length&&this.drawLine(c,i.e.point(this.m_points[this.m_points.length-1].x,this.m_points[this.m_points.length-1].y),n),c.endFigureClose(),c}return null},e.prototype.drawSelection=function(t,e){if(this.m_Selection){var n=this.m_Selection.getPageIndex();if(!(n<0)){var o=this.m_Selection.getType();if(this.m_Selection.options={isArea:o===i.d.measurementsEnum.area,isPerimeter:o===i.d.measurementsEnum.perimeter,isDistance:o===i.d.measurementsEnum.distance,drawAllEndings:o===i.d.measurementsEnum.distance},n==e){var r=null,s=this.getArrowheadsStyleAtom();switch(o){case i.d.measurementsEnum.distance:r=this.getDistanceGeometry(s);break;case i.d.measurementsEnum.perimeter:case i.d.measurementsEnum.area:r=this.getPerimeterGeometry(o)}if(r){if(t.strokeGeometry(r,this.m_FrameBrush,this.m_LineWidth),t.strokeGeometry(r,this.m_DashesBrush,this.m_LineWidth,{dashPattern:this.m_Dashes}),this.m_Selection.options.isDistance)switch(s){case i.d.kPDAtom.kPDAtom_OpenArrow:case i.d.kPDAtom.kPDAtom_ROpenArrow:case i.d.kPDAtom.kPDAtom_Slash:case i.d.kPDAtom.kPDAtom_Butt:break;case i.d.kPDAtom.kPDAtom_ClosedArrow:case i.d.kPDAtom.kPDAtom_RClosedArrow:case i.d.kPDAtom.kPDAtom_Circle:case i.d.kPDAtom.kPDAtom_Square:case i.d.kPDAtom.kPDAtom_Diamond:t.fillGeometry(r,this.m_FillBrush)}this.drawCaption(t,e)}}}}},e.prototype.drawLine=function(t,e,n){t.beginFigure(e),t.lineTo(n),t.endFigure()},e.prototype.drawCaption=function(t,e){if(this.isMeasureDictInitialized()){this.m_caption=this.getContents();var n=t.createFontFace("Segoe UI",i.d.GFontStyle.kGFontStyleRegular,11),o=i.a.createInstance("FF000000"),r=this.calculateTextBound(n,this.m_caption),s=this.getCaptionPosition(r);t.pushState(),t.concatCTM(i.e.reflectYMatrix()),t.translateCTM(s.x,s.y),t.fillText(n,this.m_caption,o),t.popState()}},e.prototype.getContents=function(){var t="";switch(this.m_Selection.getType()){case i.d.measurementsEnum.distance:t=this.makeDistanceFormatString(!0);break;case i.d.measurementsEnum.perimeter:var e=this.m_Selection.getEndPoint(),n=this.getMeasurementLineLength(i.e.point(this.m_points[this.m_points.length-1].x-e.x,this.m_points[this.m_points.length-1].y-e.y));if(this.isFigureValid())for(var o=0;o<this.m_points.length-1;++o)n+=this.getMeasurementLineLength(i.e.point(this.m_points[o].x-this.m_points[o+1].x,this.m_points[o].y-this.m_points[o+1].y));t=this.makeFormatString(n,this.m_MeasureDict.D);break;case i.d.measurementsEnum.area:var r=this.isFigureValid()?this.computeFigureArea():0;t=this.makeFormatString(r,this.m_MeasureDict.A)}return t},e.prototype.makeDistanceFormatString=function(t){var e,n,o=this.m_Selection.getStartPoint(),r=!0===t?this.m_Selection.getEndPoint0():this.m_Selection.getEndPoint(),s=i.e.point(r.x-o.x,r.y-o.y),a=[i.e.point(0,0),s],c=this.pdGetXYCHelper();e=c.pX,n=c.pY;for(var u=0,l=a[0],h=1;h<a.length;++h){var p=a[h],d=e*(p.x-l.x),f=n*(p.y-l.y);u+=Math.sqrt(d*d+f*f),l=p}return this.pdMeasureFormat(u,this.m_MeasureDict.D)},e.prototype.pdMeasureFormat=function(t,e){var n=e,i="",o=n.length;if(o>=1)for(var r=t,s=o-1,a=0;a<o;++a){var c=this.parseNumberFormat(n[a]),u=parseFloat((r*c.conversionFactor).toString()),l=parseInt(u.toString()),h=!1,p="",d=Math.abs(u-l);if(0==d)h=!0;else if(a==s){switch(c.fractionalFormat){case"D":var f=parseInt((d*c.fractionalDenominator).toString());if(0!=f){for(var g="",m=c.fractionalDenominator/10;f<m;)g+="0",m/=10;g+=f,c.fractionalKeepLowZeros||(g=g.replace(/0+$/,"")),0!=g.length&&(p=c.decimalSeparator+g)}break;case"F":var v=parseInt(c.fractionalDenominator),y=parseInt((d*c.fractionalDenominator).toString());if(!c.fractionalKeepLowZeros){var b=this.greatestCommonDivisor(y,v);y/=b,v/=b}p=" "+y+"/"+v;break;case"R":l=parseInt(Math.round(u).toString());break;case"T":l=parseInt(Math.trunc(u).toString())}h=!0}var P=this.printWithThousandsSeparator(l,c.thousandsSeparator)+p,_=c.prefix+c.units+c.suffix;if(i+="P"==c.unitsPosition?_+P:P+_,h)break;r=d}return i},e.prototype.pdMeasureFormatImpl=function(){},e.prototype.pad=function(t,e){for(var n=""+t;n.length<e;)n="0"+n;return n},e.prototype.printWithThousandsSeparator=function(t,e){return(t=parseInt(t))<0?"-"+this.printWithThousandsSeparator(-t,e):t<1e3?t:""+this.printWithThousandsSeparator(t/1e3,e)+e+this.pad(t%1e3,3)},e.prototype.greatestCommonDivisor=function(t,e){for(var n;0!=t;)n=t,t=e%t,e=n;return e},e.prototype.parseNumberFormat=function(t){var e={};return t?(e.conversionFactor=t.C,e.units=t.U,e.fractionalFormat="D",t.F&&(e.fractionalFormat=t.F),e.fractionalDenominator="D"==e.fractionalFormat?100:16,e.fractionalKeepLowZeros=!1,t.FD&&(e.fractionalKeepLowZeros=t.FD),e.thousandsSeparator=",",t.RT&&(e.thousandsSeparator=t.RT),e.decimalSeparator=",",t.RD&&(e.decimalSeparator=t.RD),e.prefix=" ",t.PS&&t.PS.length>0&&(e.prefix=t.PS),e.suffix=" ",t.SS&&t.SS.length>0&&(e.suffix=t.SS),e.unitsPosition="S",t.O&&t.O.length>0&&(e.unitsPosition=t.O),e):null},e.prototype.pdGetXYCHelper=function(){var t=1,e=1,n=1;return this.m_MeasureDict.CYX&&(t=this.m_MeasureDict.CYX),this.m_MeasureDict.X&&this.m_MeasureDict.X.length>0&&this.m_MeasureDict.X[0].C&&(e=this.m_MeasureDict.X[0].C),n=e,this.m_MeasureDict.Y&&this.m_MeasureDict.Y.length>0&&this.m_MeasureDict.Y[0].C&&(n=this.m_MeasureDict.Y[0].C),{pX:e,pY:n*t}},e.prototype.calculateTextBound=function(t,e){var n=document.createElement("canvas").getContext("2d");n.font=t;var o=n.measureText(e);return i.e.size(o.width,parseInt(t.match(/\d+/)[0]))},e.prototype.isMeasureDictInitialized=function(){return!!this.m_MeasureDict},e.prototype.getDefaultMeasurementLineColor=function(){var t=null;return t||(t=-1760713),i.a.createInstance("#FFE52237")},e.prototype.resetDistance=function(){this.m_LeaderLineLength=this.getDefaultLeaderLineLength(),this.m_LeaderLineOffset=this.getDefaultLeaderLineOffset(),this.m_LeaderLineExtension=this.getDefaultLeaderLineExtension(),this.m_LineNormalVector=i.e.point(-1,-1),this.m_UseOrthographicLine=g.Disable},e.prototype.mapToMeasuremetUnits=function(t){var e=this.getScaleFactorFromMeasureArray(this.m_MeasureDict.X),n=e,o=this.m_MeasureDict.Y;if(o&&o.length>0){var r=this.getScaleFactorFromMeasureArray(o);r&&(n=r)}if(!i.e.floatEq(e,n)&&this.m_MeasureDict.CYX){var s=this.m_MeasureDict.CYX;return i.e.point(t.x*e*s,t.y*n*s)}return i.e.point(t.x*e,t.y*n)},e.prototype.getMeasurementLineLength=function(t){return this.mapToMeasuremetUnits(t).vecMagnitude()},e.prototype.getScaleFactorFromMeasureArray=function(t){if(t&&t.length>0){var e=t[0];if(e)return e.C}return null},e.prototype.makeFormatString=function(t,e){return this.pdMeasureFormat(t,e)},e.prototype.getArrowheadsStyleAtom=function(){return i.d.kPDAtom.kPDAtom_None},e.prototype.computeFigureArea=function(){for(var t=0,e=0;e<this.m_points.length-1;++e){var n=this.mapToMeasuremetUnits(this.m_points[e]),i=this.mapToMeasuremetUnits(this.m_points[e+1]);t+=n.y*i.x}var o=this.m_Selection.getEndPoint(),r=this.mapToMeasuremetUnits(this.m_points[0]),s=this.mapToMeasuremetUnits(this.m_points[this.m_points.length-1]),a=this.mapToMeasuremetUnits(o);return t+=s.y*a.x,t+=a.y*r.x,.5*Math.abs(Number((0).toFixed(10))-Number(t.toFixed(10)))},e.prototype.createUserDefaultMeasureContext=function(){var t=i.g.getUnitsName(0,!0),e={scaleFactor:1,units:t,thousandsSeparator:"",decimalSeparator:".",textAndUnitsSeparator:""},n={scaleFactor:1,units:"sq "+t,thousandsSeparator:"",decimalSeparator:".",textAndUnitsSeparator:""};return{scaleRatio:"1 "+t+" = 1 "+t,xArray:{scaleFactor:i.g.convert.to(i.d.Units.unit,0,1),units:t,thousandsSeparator:"",decimalSeparator:".",textAndUnitsSeparator:""},dArray:e,aArray:n}},e.prototype.createDefaultMeasureDictionary=function(){var t=this.createUserDefaultMeasureContext();return this.createMeasureDictionary(t)},e.prototype.createMeasureDictionary=function(t){var e=this.convertMeasureArrayContextToPDNumberFormat(t.xArray),n=this.convertMeasureArrayContextToPDNumberFormat(t.dArray),i=this.convertMeasureArrayContextToPDNumberFormat(t.aArray),o={};return o.ratioString=t.scaleRatio,o.xFormat=e,o.xFormatSize=1,o.distanceFormat=n,o.distanceFormatSize=1,o.areaFormat=i,o.areaFormatSize=1,o.origin={x:0,y:0},this.pdMeasureRLCreate(o)},e.prototype.convertMeasureArrayContextToPDNumberFormat=function(t){var e={};return e.units=t.units,e.conversionFactor=t.scaleFactor,e.thousandsSeparator=t.thousandsSeparator[0]?t.thousandsSeparator[0]:"",e.decimalSeparator=t.decimalSeparator[0]?t.decimalSeparator[0]:"",e.suffix=t.textAndUnitsSeparator[0]?t.textAndUnitsSeparator[0]:"",e.fractionalFormat="D",e.fractionalDenominator=100,e.fractionalKeepLowZeros=!1,e},e.prototype.pdMeasureRLCreate=function(t){if(t&&t.ratioString&&t.xFormat&&t.xFormatSize>0){var e={};e.R=t.ratioString,e.X=this.newNumberFormatArray(t.xFormat,t.xFormatSize),t.yFormat&&t.yFormatSize>0&&(e.Y=this.newNumberFormatArray(t.yFormat,t.yFormatSize)),t.distanceFormat&&t.distanceFormatSize>0&&(e.D=this.newNumberFormatArray(t.distanceFormat,t.distanceFormatSize)),t.areaFormat&&t.areaFormatSize>0&&(e.A=this.newNumberFormatArray(t.areaFormat,t.areaFormatSize)),t.angleFormat&&t.angleFormatSize>0&&(e.T=this.newNumberFormatArray(t.angleFormat,t.angleFormatSize)),t.slopeFormat&&t.slopeFormatSize>0&&(e.S=this.newNumberFormatArray(t.slopeFormat,t.slopeFormatSize));var n=[];return n.push(t.origin.x),n.push(t.origin.y),e.O=n,t.yFormatSize>0&&(e.CYX=t.cyx),e}return null},e.prototype.newNumberFormatArray=function(t,e){var n=[];return n.push(this.newNumberFormat(t)),n},e.prototype.newNumberFormat=function(t){var e={};return e.U=t.units?t.units:"",e.C=t.conversionFactor,"D"!=t.fractionalFormat?(e.F=t.fractionalFormat,16!=t.fractionalDenominator&&(e.D=t.fractionalDenominator)):100!=t.fractionalDenominator&&(e.D=t.fractionalDenominator),t.fractionalKeepLowZeros&&(e.FD=!0),e.RT=t.thousandsSeparator,e.RD=t.decimalSeparator,e.PS=t.prefix?t.prefix:" ",e.SS=t.suffix?t.suffix:"","S"!=t.unitsPosition&&(e.O=t.unitsPosition?t.unitsPosition:""),e},e.prototype.isAreaEmpty=function(){if(this.m_Selection.isLine())return this.m_Selection.isAreaEmpty();if(this.m_Selection.isPolygon()){for(var t=!0,e=0;e<this.m_points.length;e++)if(0!=e&&this.m_points[e].x!=this.m_points[0].x&&this.m_points[e].y!=this.m_points[0].y){t=!1;break}return t}if(this.m_Selection.isPolyline()){for(t=!0,e=0;e<this.m_points.length;e++)if(0!=e&&this.m_points[e].x!=this.m_points[0].x&&this.m_points[e].y!=this.m_points[0].y){t=!1;break}return t}},e.prototype.completeMeasurement=function(){if(!this.isActionFinished()&&!this.isAreaEmpty()){this.endSelection(i.e.point(-1,-1)),this.m_polylineFinished=!0,this.m_blocked=!0;var t=this.documentView.document.getPage(this.m_Selection.getPageIndex());if(!t)return!1;var e=t.rect.copy();if(!e)return!1;this.closePath(this.m_points),this.crop(this.m_points,e);var n=this.m_points;this.validate(n)&&this.documentView&&this.documentView.document&&(this.drawOnMask(this.documentView.maskRenderTarget,n,this.documentView.document,this.m_FillBrushMask),this.documentView.updateMask()),this.m_Selection=null,this.resetAll()}return!0},e.prototype.cancelMeasurement=function(){this.resetAll()},e.prototype.resetAll=function(){this.m_State=f.Finished,this.resetDistance(),this.documentView.invalidate(),this.m_blocked=!1,this.m_blocked_by_ctxmenu=!1},e.prototype.isActionFinished=function(){if(!this.m_Selection)return!1;switch(this.m_Selection.getType()){case i.d.measurementsEnum.distance:return this.m_State==f.Finished;case i.d.measurementsEnum.perimeter:case i.d.measurementsEnum.area:return this.m_polylineFinished}},e.prototype.computeLineWidth=function(){var t=this.m_Selection.getWidth();return i.e.floatEq(t,0)&&(t=1),3*t/1.9},e.prototype.getFiller=function(t){var e=this.computeLineWidth();switch(t){case i.d.kPDAtom.kPDAtom_Diamond:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=i.e.point(-r.y,r.x).vecNormalized(),a=i.e.point(r.y,-r.x).vecNormalized(),c=e,u=i.e.point(s.x*c,s.y*c),l=i.e.point(a.x*c,a.y*c),h=i.e.point(o.x+u.x,o.y+u.y),p=i.e.point(o.x+l.x,o.y+l.y),d=i.e.point(r.x*c,r.y*c);t.beginFigure(i.e.point(o.x-d.x,o.y-d.y)),t.lineTo(p),t.lineTo(i.e.point(o.x+d.x,o.y+d.y)),t.lineTo(h),t.lineTo(i.e.point(o.x-d.x,o.y-d.y)),t.endFigure()};case i.d.kPDAtom.kPDAtom_ClosedArrow:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=i.e.point(-r.y,r.x).vecNormalized(),a=i.e.point(r.y,-r.x).vecNormalized(),c=2+e,u=i.e.point(s.x*c,s.y*c),l=i.e.point(a.x*c,a.y*c),h=i.e.point(o.x+u.x,o.y+u.y),p=i.e.point(o.x+l.x,o.y+l.y),d=i.e.point(r.x*c*2,r.y*c*2),f=i.e.point(h.x-d.x,h.y-d.y),g=i.e.point(p.x-d.x,p.y-d.y);t.beginFigure(f),t.lineTo(o),t.lineTo(g),t.endFigure()};case i.d.kPDAtom.kPDAtom_RClosedArrow:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=i.e.point(-r.y,r.x).vecNormalized(),a=i.e.point(r.y,-r.x).vecNormalized(),c=2+e,u=i.e.point(s.x*c,s.y*c),l=i.e.point(a.x*c,a.y*c),h=i.e.point(o.x+u.x,o.y+u.y),p=i.e.point(o.x+l.x,o.y+l.y),d=i.e.point(r.x*c*2,r.y*c*2);t.beginFigure(i.e.point(h.x+d.x,h.y+d.y)),t.lineTo(o),t.lineTo(i.e.point(p.x+d.x,p.y+d.y)),t.endFigure()};case i.d.kPDAtom.kPDAtom_Circle:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=(i.e.point(-r.y,r.x).vecNormalized(),i.e.point(r.y,-r.x).vecNormalized(),1+e),a=.551915024494*s,c=o.x,u=o.y,l=i.e.point(c,u-s),h=i.e.point(c+a,u-s),p=i.e.point(c+s,u-a),d=i.e.point(c+s,u),f=i.e.point(c+s,u+a),g=i.e.point(c+a,u+s),m=i.e.point(c,u+s),v=i.e.point(c-a,u+s),y=i.e.point(c-s,u+a),b=i.e.point(c-s,u),P=i.e.point(c-s,u-a),_=i.e.point(c-a,u-s);t.beginFigure(l),t.curveTo(h,p,d),t.curveTo(f,g,m),t.curveTo(v,y,b),t.curveTo(P,_,l),t.endFigure()};case i.d.kPDAtom.kPDAtom_Square:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=i.e.point(-r.y,r.x).vecNormalized(),a=i.e.point(r.y,-r.x).vecNormalized(),c=e,u=i.e.point(s.x*c,s.y*c),l=i.e.point(a.x*c,a.y*c),h=i.e.point(o.x+u.x,o.y+u.y),p=i.e.point(o.x+l.x,o.y+l.y),d=i.e.point(r.x*c,r.y*c),f=i.e.point(h.x-d.x,h.y-d.y),g=i.e.point(p.x-d.x,p.y-d.y),m=i.e.point(p.x+d.x,p.y+d.y),v=i.e.point(h.x+d.x,h.y+d.y);t.beginFigure(f),t.lineTo(g),t.lineTo(m),t.lineTo(v),t.endFigure()};case i.d.kPDAtom.kPDAtom_OpenArrow:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=i.e.point(-r.y,r.x).vecNormalized(),a=i.e.point(r.y,-r.x).vecNormalized(),c=e,u=i.e.point(s.x*c,s.y*c),l=i.e.point(a.x*c,a.y*c),h=i.e.point(o.x+u.x,o.y+u.y),p=i.e.point(o.x+l.x,o.y+l.y),d=i.e.point(r.x*c*2,r.y*c*2);t.beginFigure(i.e.point(h.x-d.x,h.y-d.y)),t.lineTo(o),t.lineTo(i.e.point(p.x-d.x,p.y-d.y)),t.endFigure()};case i.d.kPDAtom.kPDAtom_ROpenArrow:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=i.e.point(-r.y,r.x).vecNormalized(),a=i.e.point(r.y,-r.x).vecNormalized(),c=2+e,u=i.e.point(s.x*c,s.y*c),l=i.e.point(a.x*c,a.y*c),h=i.e.point(o.x+u.x,o.y+u.y),p=i.e.point(o.x+l.x,o.y+l.y),d=i.e.point(r.x*c*2,r.y*c*2);t.beginFigure(i.e.point(h.x+d.x,h.y+d.y)),t.lineTo(o),t.lineTo(i.e.point(p.x+d.x,p.y+d.y)),t.endFigure()};case i.d.kPDAtom.kPDAtom_Slash:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=i.e.point(-r.y,r.x).vecNormalized(),a=i.e.point(r.y,-r.x).vecNormalized(),c=2+e,u=i.e.point(.8775825619*c*r.x,.4794255386*c*r.y),l=i.e.point(s.x*c,s.y*c),h=i.e.point(a.x*c,a.y*c),p=i.e.point(o.x+l.x+u.x,o.y+l.y+u.y),d=i.e.point(o.x+h.x-u.x,o.y+h.y-u.y);t.beginFigure(p),t.lineTo(d),t.endFigure()};case i.d.kPDAtom.kPDAtom_Butt:return function(t,n,o){var r=i.e.point(o.x-n.x,o.y-n.y).vecNormalized(),s=i.e.point(-r.y,r.x).vecNormalized(),a=i.e.point(r.y,-r.x).vecNormalized(),c=2+e,u=i.e.point(s.x*c,s.y*c),l=i.e.point(a.x*c,a.y*c),h=i.e.point(o.x+u.x,o.y+u.y),p=i.e.point(o.x+l.x,o.y+l.y);t.beginFigure(h),t.lineTo(p),t.endFigure()}}},e.prototype.getCaptionPosition=function(t){var e=this.m_Selection.getStartPoint(),n=this.m_Selection.getEndPoint0(),o=this.m_LeaderLineLength>=0?i.e.point(n.x-e.x,n.y-e.y):i.e.point(e.x-n.x,e.y-n.y),r=i.e.point(-o.y,o.x).vecNormalized(),s=i.e.point(e.x+r.x*this.m_LeaderLineOffset,e.y+r.y*this.m_LeaderLineOffset),a=i.e.point(n.x+r.x*this.m_LeaderLineOffset,n.y+r.y*this.m_LeaderLineOffset),c=Math.abs(this.m_LeaderLineLength),u=i.e.point(s.x+r.x*c,s.y+r.y*c),l=i.e.point(a.x+r.x*c,a.y+r.y*c);return i.e.point(l.x-(l.x<u.x?t.width+this.m_captionMargin:-this.m_captionMargin),-l.y+(l.y<u.y?t.height+this.m_captionMargin:-this.m_captionMargin))},e.prototype.closePath=function(t){if(t){var e=t[0];e&&t.push(e)}},e.prototype.crop=function(t,e){if(t&&e)for(var n=0;n<t.length;n++){var i=t[n];i&&this.crop_(i,e)}},e.prototype.crop_=function(t,e){t&&e&&(t.x<0&&(t.x=0),t.x>e.right&&(t.x=e.right),t.y<0&&(t.y=0),t.y>e.top&&(t.y=e.top))},e.prototype.validate=function(t){var e=t[0];return!t.every(function(t){return t.x===e.x})&&!t.every(function(t){return t.y===e.y})},e.prototype.drawOnMask=function(t,e,n,i){if(t&&e&&n){e=this.mapPointsToMask(e,n);var o=this.m_Selection.createGeometry(e);o&&t.fillGeometry(o,this.m_FillBrushMask)}},e.prototype.mapPointsToMask=function(t,e){if(t&&e){for(var n=[],i=0;i<t.length;i++){var o=t[i];o&&n.push(this.mapPointToMask(e,0,o,e.zoom,this.documentView.getLayoutOffset()))}return n}},e}(r),v=n("5HBy"),y=n("CasB"),b=function(t){function e(e){var n=t.call(this)||this;return n._documentView=e,n.startPickOnNextMove_=!1,n.dragView_=!1,n.picker_=null,n._tracker=null,n}return s.__extends(e,t),e.prototype._getPageHitInfo=function(t){var e=null,n=this._documentView.getPageAtPoint(t);if(o.j(n)||n<0)return e;var i=this._documentView.mapPointToPage(n,t);return i&&(e={index:n,pos:i}),e},e.prototype._resetPicker=function(){this.picker_=null},e.prototype.selectObject=function(t,e){return y.a.selectObject(this._documentView,t,e)},e.prototype.addObjectToSelection=function(t){return y.a.addObjectToSelection(this._documentView,t)},e.prototype._selectAnnot=function(t,e,n){return!0},e.prototype._getAnnotAtPos=function(t,e){if(-1!=t){var n=this._documentView.document.getPage(t);if(!n)return null;var r=n.annotations;if(o.j(r))return null;for(var s=this._documentView.getViewState(),a=0;a<r.length;a++){var c=r[a];if(c&&o.j(c.parentIndex)&&c.type!==i.d.pdfAnnotationType.popup&&!o.j(c.rect)&&c.isVisible&&c.rect.containsPoint(e)){if((s&i.d.PDPageRenderFlags.kPDPageRenderSkipMarkupAnnots)==i.d.PDPageRenderFlags.kPDPageRenderSkipMarkupAnnots&&c.isMarkup())continue;return c}}}return null},e.prototype._canSelectObjectByMarketingReasons=function(t,e){var n=this._documentView.document;if(!n)return!1;var i=n.getPage(t);if(!i.isLoaded)return!1;var o={permitted:!0};return this._hitTestObjectByMarketingReasons(i.content,e,null,o),o.permitted},e.prototype._hitTestObjectByMarketingReasons=function(t,e,n,o){for(var r=t.length;r>0;--r){var s=t[r-1];if(s)switch(s.type){case i.d.PDEElementType.kPDEElementContainer:if(!y.c.shouldSkipContainer(s)&&s.isVisible&&this._hitTestObjectByMarketingReasons(s.content,e,n,o))return!0;break;case i.d.PDEElementType.kPDEElementText:if(s.getItemAtPoint(e))return o.permitted=this.BLFeatureRequest("Edit.Common",!0),!0;break;case i.d.PDEElementType.kPDEElementXObject:if(s.isVisible&&s.hitTest(e))return o.permitted=this.BLFeatureRequest("Insert.Common",!0),!0;break;case i.d.PDEElementType.kPDEElementPath:if(s.hitTest(e))return o.permitted=this.BLFeatureRequest("Insert.Common",!0),!0;break;case i.d.PDEElementType.kPDEElementInlineImage:case i.d.PDEElementType.kPDEElementShading:if(s.hitTest(e))return o.permitted=this.BLFeatureRequest("Insert.Common",!0),!0}}return!1},e.prototype.forwardLButtonDownEvent=function(t,e){var n={pointerArgs:{}};return n.type=i.d.BLInputEventType.kBLInputEventPointerPressed,n.pointerArgs.button=i.d.BLPointerButton.kBLPointerButtonLeft,n.pointerArgs.position=e,n.pointerArgs.flags=0,t.handleEvent(n)},e.prototype.forwardRButtonDownEvent=function(t,e){var n={pointerArgs:{}};return n.type=i.d.BLInputEventType.kBLInputEventPointerPressed,n.pointerArgs.button=i.d.BLPointerButton.kBLPointerButtonRight,n.pointerArgs.position=e,n.pointerArgs.flags=0,t.handleEvent(n)},e.prototype.getContentAtPos=function(t,e,n){var i=y.b.createEditObjectByPagePoint(t,e,n);if(i)return"TextEdit"!==i.getObjectType()?null:i},e.prototype.drawTrackerSelection=function(t,e){if(this._tracker&&this._tracker.getTracking()){var n=this._tracker.getRect();l.b.drawFrame(t,i.e.quadFromRect(n),null,"#FFFFFF",i.f.LookAndFeel.TransformerDashes,this.m_LineWidth)}},e.prototype.initTracker=function(t,e,n,o){this._tracker&&this._tracker.dispose();var r=i.e.size(0,0);return this._tracker=new c.a(r,t,n,o),!!this._tracker.onMouseDown(e)},e.prototype.handlerTracker=function(t,e){if(this._tracker){if(this._tracker.onMouseUp(e)){var n=this._tracker.getRect();v.a.setupTextEditTool(t,e,n)}this._tracker.dispose()}},e.prototype.initialize=function(){this._documentView.setCursor(i.d.BLCursorType.kBLCursorCross),this._resetPicker()},e.prototype.onDraw=function(t,e){this.picker_&&e==this.picker_.getPageIndex()&&this.picker_.draw(t,e),this.drawTrackerSelection(t,0)},e.prototype.terminate=function(){this._tracker&&this._tracker.dispose(),this._tracker=null,this._resetPicker(),this._documentView=null},e.prototype.getToolType=function(){return i.h.Edit},e.prototype.isFinished=function(){return!1},e.prototype.handleEvent=function(t){switch(t.type){case i.d.BLInputEventType.kBLInputEventPointerDoubleClicked:return this.onLDoubleClicked(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);default:return!1}return!0},e.prototype.onLDoubleClicked=function(t,e){return!1},e.prototype.removed=function(){return!1},e.prototype.focusAnnot=function(t,e){return!1},e.prototype.restoreSelection=function(){},e.prototype.onLButtonDown=function(t,e){var n=this._getPageHitInfo(t);if(n){this._documentView.setFocusPage(n.index);var o=null;try{var r=this._getAnnotAtPos(n.index,n.pos);if(o=this._selectAnnot(n.index,r,!1),r)return!o||this.forwardLButtonDownEvent(o,t)}catch(u){}if(!this._canSelectObjectByMarketingReasons(n.index,n.pos))return i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)||this._documentView.setSelection(null),!0;var s=this.getContentAtPos(this._documentView,n.index,n.pos);if(!s)return i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)||this._documentView.setSelection(null),this.startPickOnNextMove_=!0,this.initTracker(this._documentView,t,this.m_FrameBrush,this.m_FillBrush);var a,c=!1;if(i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?(o=(a=this.addObjectToSelection(s)).inputHandler,c=a.selected):(o=(a=this.selectObject(s,!1)).inputHandler,c=a.selected),c)return!o||this.forwardLButtonDownEvent(o,t)}return this.dragView_=!0,this._documentView.pointerPressed(t),!0},e.prototype.onLButtonUp=function(t,e){if(this.dragView_?(this._documentView.pointerReleased(t),this._documentView.resetSelection(!0),this.dragView_=!1):this.handlerTracker(this._documentView,t),this.startPickOnNextMove_&&(this.startPickOnNextMove_=!1),this.picker_){if(this.picker_.end()){var n=this.picker_.getSelectedObjects();if(n.getCount()>1){var i=this.picker_.getPageIndex();this._resetPicker();var o=new y.d(this._documentView.document,i,[],{});this._documentView.setSelectionAndTool("MultiSelect",o)}else{this._resetPicker();var r=n.get(0);this.selectObject(r,!1)}}else this._resetPicker(),this._documentView.invalidate();this._resetPicker()}return!1},e.prototype.onRButtonDown=function(t,e){var n=this._getPageHitInfo(t);if(n){this._documentView.setFocusPage(n.index);var i=null;try{var o=this._getAnnotAtPos(n.index,n.pos);if(i=this._selectAnnot(n.index,o,!1),o)return!i||this.forwardRButtonDownEvent(i,t)}catch(a){}if(!this._canSelectObjectByMarketingReasons(n.index,n.pos))return this._documentView.setSelection(null),!0;var r=this.getContentAtPos(this._documentView,n.index,n.pos);if(!r)return this._documentView.setSelection(null),!0;var s=this.selectObject(r,!1);if(i=s.inputHandler,s.selected)return!i||this.forwardRButtonDownEvent(i,t)}return!1},e.prototype.onRButtonUp=function(t,e){return!0},e.prototype.onMouseMove=function(t,e){if(this._tracker&&this._tracker.onMouseMove(t),this.startPickOnNextMove_){var n=this._getPageHitInfo(t);return n&&(this._resetPicker(),this.picker_&&this.picker_.begin(n.pos),this._documentView.invalidate()),this.startPickOnNextMove_=!1,!0}if(this.dragView_)return this._documentView.pointerMoved(t),!0;var o=this._getPageHitInfo(t);if(o){var r=this.getContentAtPos(this._documentView,o.index,o.pos),s=this.selectObject(r,!0);if(r&&s)return!0}return this._documentView.setCursor(i.d.BLCursorType.kBLCursorCross),this._documentView.setHighlight(null),this._documentView.pointerMoved(t),!0},e.prototype.BLFeatureRequest=function(t,e){return!0},e}(r),P=function(){function t(t){this.view_=t,this.transformer_=null,this.finished_=!1,this.activeAnchor_=i.d.AnchorPlace.ANCHOR_NONE,this.currentRotationAngle_=0,this.rotationOrigin_=i.e.point(),this.startPoint_=i.e.point()}return t.prototype.checkPointInCircle=function(t,e,n){var o=i.e.point(t.x-e.x,t.y-e.y);return n*n>=o.x*o.x+o.y*o.y},t.prototype.mapViewPointToPage=function(t,e,n){return t.mapPointToPage(e,n)},t.prototype.mapPagePointToView=function(t,e,n){return t.mapPointToDevice(e,n)},t.prototype.mapPageQuadToView=function(t,e,n){var o=this.mapPagePointToView(t,e,n.tl),r=this.mapPagePointToView(t,e,n.tr),s=this.mapPagePointToView(t,e,n.bl),a=this.mapPagePointToView(t,e,n.br);return i.e.quadFromPoints(o,r,s,a)},t.prototype._transformerHitTest=function(t){i.e.point();var e,n=this.transformer_.getPageIndex();if(!((e=this.view_.getVisibleRange()).startPage<=n&&n<=e.endPage))return!1;var o=i.f.LookAndFeel.TransformerScaleZoneRadius,r=this.mapPageQuadToView(this.view_,n,this.transformer_.getBounds());if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&this.checkPointInCircle(t,r.top_left(),o))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_TOP_LEFT,active:r.top_left()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&this.checkPointInCircle(t,r.top_right(),o))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_TOP_RIGHT,active:r.top_right()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Move)&&this.checkPointInCircle(t,r.top_right(),o))return{type:i.d.TransformType.TRANSFORM_MOVE,anchor:i.d.AnchorPlace.ANCHOR_TOP_RIGHT,active:r.top_right()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&this.checkPointInCircle(t,r.bottom_left(),o))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:r.bottom_left()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&this.checkPointInCircle(t,r.bottom_right(),o))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:r.bottom_right()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&i.e.pointsDistance(r.center_right(),r.center_left())>=3*o){if(this.checkPointInCircle(t,r.top_center(),o))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_TOP,active:r.top_center()};if(this.checkPointInCircle(t,r.bottom_center(),o))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM,active:r.bottom_center()}}if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Resize)&&i.e.pointsDistance(r.top_center(),r.bottom_center())>=3*o){if(this.checkPointInCircle(t,r.center_left(),o))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_LEFT,active:r.center_left()};if(this.checkPointInCircle(t,r.center_right(),o))return{type:i.d.TransformType.TRANSFORM_SCALE,anchor:i.d.AnchorPlace.ANCHOR_RIGHT,active:r.center_right()}}var s=i.f.LookAndFeel.TransformerRotateZoneRadius;if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Rotate)&&this.checkPointInCircle(t,r.top_left(),s))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_TOP_LEFT,active:r.top_left()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Rotate)&&this.checkPointInCircle(t,r.top_right(),s))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_TOP_RIGHT,active:r.top_right()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Rotate)&&this.checkPointInCircle(t,r.bottom_left(),s))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM_LEFT,active:r.bottom_left()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Rotate)&&this.checkPointInCircle(t,r.bottom_right(),s))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM_RIGHT,active:r.bottom_right()};if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Rotate)&&i.e.pointsDistance(r.center_right(),r.center_left())>=3*o){if(this.checkPointInCircle(t,r.top_center(),s))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_TOP,active:r.top_center()};if(this.checkPointInCircle(t,r.bottom_center(),s))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_BOTTOM,active:r.bottom_center()}}if(this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Rotate)&&i.e.pointsDistance(r.top_center(),r.bottom_center())>=3*o){if(this.checkPointInCircle(t,r.center_left(),s))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_LEFT,active:r.center_left()};if(this.checkPointInCircle(t,r.center_right(),s))return{type:i.d.TransformType.TRANSFORM_ROTATE,anchor:i.d.AnchorPlace.ANCHOR_RIGHT,active:r.center_right()}}var a=this.mapViewPointToPage(this.view_,n,t);return this.transformer_.hitTest(a)?this.transformer_.hasAnyCurrentEditMode(i.d.EditModes.Move)?{type:i.d.TransformType.TRANSFORM_MOVE,anchor:i.d.AnchorPlace.ANCHOR_NONE,active:t}:{type:i.d.TransformType.TRANSFORM_NONE,anchor:i.d.AnchorPlace.ANCHOR_NONE,active:t}:null},t.prototype.adjustCursor=function(t,e,n){var o=i.d.BLCursorType.kBLCursorArrow;switch(t){case i.d.TransformType.TRANSFORM_MOVE:o=i.d.BLCursorType.kBLCursorMove;break;case i.d.TransformType.TRANSFORM_ROTATE:o=i.d.BLCursorType.kBLCursorRotate;break;case i.d.TransformType.TRANSFORM_SCALE:for(var r=this.view_.getPagesRotation(),s=i.e.degreeToRadian(r)+this.transformer_.getRotation_PropertyTest();s>=Math.PI;)s-=Math.PI;var a,c=i.e.degreeToRadian(45);a=i.e.castFloatToInt(s>0?s/c+.5:s/c-.5);var u=this.view_.document,l=this.transformer_.getPageIndex(),h=[[6,0,2,4,7,1,5,3],[4,6,0,2,5,7,3,1],[2,4,6,0,3,5,1,7],[0,2,4,6,1,3,7,5]][u.getPage(l).rotate/90][e];(h=(h-a)%8)<0&&(h+=8),o=(i.d.BLFlagIsSet(n,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.d.BLCursorType.kBLCursorScaleProportional_N:i.d.BLCursorType.kBLCursorScale_N)+h}this.view_.setCursor(o)},t.prototype.handleMoveInternal=function(t,e){var n=this.transformer_.getTransform(),o=this.startPoint_.copy(),r=t.copy();if(!o.isEqual(r)){this.transformer_.setSnapInfo(null);var s=i.e.point(r.x-o.x,r.y-o.y);if(this.transformer_.setOperationTransform(n.multiply(i.e.translationMatrix(s.x,s.y))),e){var a=this.transformer_.getSnapData();if(a){var c;c=this.view_.getZoom();var u=this.transformer_.getOperationBounds().getBound(),l=null,h=i.e.point(),p=this.view_.isGridEnabled(),d=a.snapMove(u,r,{zoom:c,snapToGrid:p});if(d&&(l=d.snapInfo,h=d.snappedAnchor),this.transformer_.setSnapInfo(l),!h.isEqual(r)){var f=i.e.point(h.x-o.x,h.y-o.y);this.transformer_.setOperationTransform(n.multiply(i.e.translationMatrix(f.x,f.y)))}}}this.view_.invalidate()}},t.prototype.handleMove=function(t,e){this.handleMoveInternal(t,!i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)),this.adjustCursor(i.d.TransformType.TRANSFORM_MOVE,this.activeAnchor_,e)},t.prototype.handleRotate=function(t,e){var n=this.transformer_.getTransform(),o=this.rotationOrigin_.copy(),r=this.startPoint_.copy(),s=t.copy(),a=i.e.point(r.x-o.x,r.y-o.y),c=i.e.point(s.x-o.x,s.y-o.y),u=i.e.vecAngleBetween(a,c);if(i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)){var l=this.currentRotationAngle_+u,h=i.e.degreeToRadian(45);u=(l=i.e.castFloatToInt(l>0?l/h+.5:l/h-.5)*h)-this.currentRotationAngle_}this.transformer_.setOperationTransform(n.multiply(i.e.rotationMatrix(u,o))),this.view_.invalidate(),this.adjustCursor(i.d.TransformType.TRANSFORM_ROTATE,this.activeAnchor_,e)},t.prototype.handleScaleInternal=function(t,e){var n=this.transformer_.getTransform(),o=n.invert();if(o){var r=o.mapPoint(t),s=this.transformer_.getUserSpaceRect(),a=s.getWidth(),c=s.getHeight();if(!i.e.floatEq(a,0)&&!i.e.floatEq(c,0)){var u=s.getOrigin(),l=s.getCenter(),h=2*(r.x-u.x)/a,p=2*(r.y-u.y)/c;r.offset(-u.x,-u.y);var d=r.x/a,f=r.y/c,g=null;switch(this.activeAnchor_){case i.d.AnchorPlace.ANCHOR_CENTER:var m=Math.max(1-h,p-1,h-1,1-p);g=i.e.scalingMatrix(m,m,l);break;case i.d.AnchorPlace.ANCHOR_LEFT:g=i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.e.scalingMatrix(1-d,1-d,u).multiply(i.e.translationMatrix(r.x,d*c/2)):i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?i.e.scalingMatrix(1-h,1-h,l):i.e.scalingMatrix(1-d,1,u).multiply(i.e.translationMatrix(r.x,0));break;case i.d.AnchorPlace.ANCHOR_TOP:g=i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.e.scalingMatrix(f,f,u).multiply(i.e.translationMatrix((1-f)*a/2,0)):i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?i.e.scalingMatrix(p-1,p-1,l):i.e.scalingMatrix(1,f,u);break;case i.d.AnchorPlace.ANCHOR_RIGHT:g=i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.e.scalingMatrix(d,d,u).multiply(i.e.translationMatrix(0,(1-d)*c/2)):i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?i.e.scalingMatrix(h-1,h-1,l):i.e.scalingMatrix(d,1,u);break;case i.d.AnchorPlace.ANCHOR_BOTTOM:g=i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?i.e.scalingMatrix(1-f,1-f,u).multiply(i.e.translationMatrix(f*a/2,r.y)):i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?i.e.scalingMatrix(1-p,1-p,l):i.e.scalingMatrix(1,1-f,u).multiply(i.e.translationMatrix(0,r.y));break;case i.d.AnchorPlace.ANCHOR_TOP_LEFT:if(i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)){var v=Math.min(1-d,f);g=i.e.scalingMatrix(v,v,u).multiply(i.e.translationMatrix((1-v)*a,0))}else i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?(v=Math.min(1-h,p-1),g=i.e.scalingMatrix(v,v,l)):g=i.e.scalingMatrix(1-d,f,u).multiply(i.e.translationMatrix(r.x,0));break;case i.d.AnchorPlace.ANCHOR_TOP_RIGHT:i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?(v=Math.min(d,f),g=i.e.scalingMatrix(v,v,u)):i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?(v=Math.min(h-1,p-1),g=i.e.scalingMatrix(v,v,l)):g=i.e.scalingMatrix(d,f,u);break;case i.d.AnchorPlace.ANCHOR_BOTTOM_LEFT:i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?(v=Math.min(1-d,1-f),g=i.e.scalingMatrix(v,v,u).multiply(i.e.translationMatrix((1-v)*a,(1-v)*c))):i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?(v=Math.min(1-h,1-p),g=i.e.scalingMatrix(v,v,l)):g=i.e.scalingMatrix(1-d,1-f,u).multiply(i.e.translationMatrix(r.x,r.y));break;case i.d.AnchorPlace.ANCHOR_BOTTOM_RIGHT:i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagShiftPressed)?(v=Math.min(d,1-f),g=i.e.scalingMatrix(v,v,u).multiply(i.e.translationMatrix(0,(1-v)*c))):i.d.BLFlagIsSet(e,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)?(v=Math.min(h-1,1-p),g=i.e.scalingMatrix(v,v,l)):g=i.e.scalingMatrix(d,1-f,u).multiply(i.e.translationMatrix(0,r.y))}g&&(n=g.multiply(n),this.transformer_.setOperationTransform(n)),this.view_.invalidate()}}},t.prototype.handleScale=function(t,e){this.handleScaleInternal(t,e),this.adjustCursor(i.d.TransformType.TRANSFORM_SCALE,this.activeAnchor_,e)},t.prototype.onCommand=function(t){return"Delete"==t&&(this.view_.requestPermissions(i.d.BLPermReqObj.kBLPermReqObjContent,i.d.BLPermReqOp.kBLPermReqOpDelete,!0)&&(this.view_.setSelection(null),this.transformer_.deleteElement(),this.finished_=!0),!0)},t.prototype.initialize=function(t){this.transformer_=t},t.prototype.terminate=function(){},t.prototype.getToolType=function(){return i.h.Edit},t.prototype.isFinished=function(){return this.finished_},t.prototype.handleEvent=function(t){if(this.finished_)return!1;switch(t.type){case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventKeyReleased:return this.onKeyUp(t.keyArgs.keycode,t.keyArgs.flags)}return!1},t.prototype.removed=function(){return!1},t.prototype.focusAnnot=function(t,e){return!1},t.prototype.restoreSelection=function(){this.finished_||this.view_.setSelectionNamed(i.h.Transform,this.transformer_)},t.prototype.onLButtonDown=function(t,e){var n=this._transformerHitTest(t);if(!n)return this.finished_=!0,!1;if(this.view_.requestPermissions(i.d.BLPermReqObj.kBLPermReqObjContent,i.d.BLPermReqOp.kBLPermReqOpModify,!0)){this.activeAnchor_=n.anchor,this.rotationOrigin_=this.transformer_.getRotationOrigin(),this.currentRotationAngle_=this.transformer_.getRotation_PropertyTest(),this.transformer_.startOperation(n.type);var o=i.e.point(i.e.castFloatToInt(n.active.x),i.e.castFloatToInt(n.active.y));this.startPoint_=this.mapViewPointToPage(this.view_,this.transformer_.getPageIndex(),o)}return!0},t.prototype.onLButtonUp=function(t,e){this.transformer_.isPerformingOperation()&&(this.transformer_.endOperation(),this.view_.invalidate());var n=this._transformerHitTest(t);return!!n&&(this.adjustCursor(n.type,n.anchor,e),this.view_.invalidate(),!0)},t.prototype.onRButtonUp=function(t,e){if(this._transformerHitTest(t)){var n=i.d.BLSelectionOperations.kBLSelectionAllowClipboardOperations|i.d.BLSelectionOperations.kBLSelectionAllowRollCmdOperations,o=this.transformer_.getElement(),r=o&&o.isImage()?i.d.ContextMenuType.Image:i.d.ContextMenuType.Transform;return this.view_.showContextMenu(r,t,n),!0}return!1},t.prototype.onMouseMove=function(t,e){var n=this.mapViewPointToPage(this.view_,this.transformer_.getPageIndex(),t);switch(this.transformer_.getOperationType()){case i.d.TransformType.TRANSFORM_NONE:var o=this._transformerHitTest(t);return!!o&&(this.view_.setHighlight(null),this.adjustCursor(o.type,o.anchor,e),!0);case i.d.TransformType.TRANSFORM_MOVE:this.handleMove(n,e);break;case i.d.TransformType.TRANSFORM_SCALE:this.handleScale(n,e);break;case i.d.TransformType.TRANSFORM_ROTATE:this.handleRotate(n,e)}return!0},t.prototype.onKeyUp=function(t,e){return t==i.d.kBLKey.kBLKey_DELETE&&this.onCommand("Delete")},t}(),_=n("osi3"),w=n("+R3h"),x={},T=function(t,e,n,o){for(var r=n.length,s=0;s<r;++s){var a=n[s];switch(a.type){case i.d.PDEElementType.kPDEElementContainer:_.a.shouldSkipContainer(a)||a.isVisible&&T(t,e,a.content,o);break;case i.d.PDEElementType.kPDEElementXObject:o.push(w.a.createGraphicsEditObject(t,e,a));break;case i.d.PDEElementType.kPDEElementPath:case i.d.PDEElementType.kPDEElementInlineImage:case i.d.PDEElementType.kPDEElementShading:o.push(w.a.createGraphicsEditObject(t,e,a))}}};x.createCompositeEditObjectForPage=function(t,e,n){if(!t||-1==e)return null;var i=t.getPage(e).content;return i&&T(t,e,i,n),n},x.getSelectedObjectsOnPage=function(t,e){return null};var S=function(){return{createCompositeEditObjectForPage:function(t,e,n){},getSelectedObjectsOnPage:function(t,e){return null}}}(),C={Transform:x,TextEdit:function(){return{createCompositeEditObjectForPage:function(t,e,n){if(!t||-1==e)return null;var i=t.getPage(e).textBlocks;if(i)for(var o=0;o<i.length;++o){var r=v.c.createTextEditObject(t,e,i[o]);r&&n.push(r)}return n},getSelectedObjectsOnPage:function(t,e){return null}}}(),MultiSelect:S},k=function(t){var e=[];o.j(t)||(e=t),this.getCount=function(){return e.length},this.get=function(t){return t>=0&&e.length>t?e[t]:null},this.push=function(t){e.push(t)}},E=function(t,e){var n=[];for(var i in C){var o=C[i],r=B.newCompositeEditObject();o.createCompositeEditObjectForPage(t,e,r),r&&B.copyFromCompositeToEditObjectStore(r,n)}return n},B=function(){var t={createCompositeEditObjectForPage:function(e,n){return t.createCompositeEditObjectByData(function(t,e){return E(t,e)}(e,n))},createCompositeEditObjectByData:function(t){return new k(t)},createCompositeEditObject:function(){return new k},newCompositeEditObject:function(){return t.createCompositeEditObject()},getSelectedObjectsOnPage:function(t,e){var n=t.getSelection();if(!n)return null;var i=n.getType(),o=C[i];return o?o.getSelectedObjectsOnPage(t,e):null},copyFromCompositeToEditObjectStore:function(t,e){var n=t.getCount();if(!(n<0))for(var i=0;i<n;++i){var o=t.get(i);e.push(o)}}};return t}(),L={},M=function(t){var e=t,n=!1,r=null,s=!1,a=function(t){return s&&(e.setCursor(i.d.BLCursorType.kBLCursorHand),e.pointerReleased(t),s=!1),!0},c=function(t){var n=null,i=e.getPageAtPoint(t);if(o.j(i)||i<0)return n;var r=e.mapPointToPage(i,t);return r&&(n={index:i,pos:r}),n},u=function(){r=null},l=function(t,n){var i=e.document;if(!i)return!1;var o=i.getPage(t);if(!o.isLoaded)return!1;var r={permitted:!0};return h(o.content,n,null,r),r.permitted},h=function(t,e,n,o){for(var r=t.length;r>0;--r){var s=t[r-1];if(s)switch(s.type){case i.d.PDEElementType.kPDEElementContainer:if(!_.a.shouldSkipContainer(s)&&s.isVisible&&h(s.content,e,n,o))return!0;break;case i.d.PDEElementType.kPDEElementText:if(s.getItemAtPoint(e))return o.permitted=!0,!0;break;case i.d.PDEElementType.kPDEElementXObject:if(s.isVisible&&s.hitTest(e))return o.permitted=!0,!0;break;case i.d.PDEElementType.kPDEElementPath:if(s.hitTest(e))return o.permitted=!0,!0;break;case i.d.PDEElementType.kPDEElementInlineImage:case i.d.PDEElementType.kPDEElementShading:if(s.hitTest(e))return o.permitted=!0,!0}}return!1},p=function(t,e){var n={pointerArgs:{}};return n.type=i.d.BLInputEventType.kBLInputEventPointerPressed,n.pointerArgs.button=i.d.BLPointerButton.kBLPointerButtonLeft,n.pointerArgs.position=e,n.pointerArgs.flags=0,t.handleEvent(n)};this.initialize=function(){u(),this.onDraw=function(t,e){r&&e==r.getPageIndex()&&r.draw(t,e)}},this.terminate=function(){var t;s&&(t=i.e.point(0,0),a(t)),u(),e=null},this.getToolType=function(){return i.h.Edit},this.isFinished=function(){return!1},this.handleEvent=function(t){switch(t.type){case i.d.BLInputEventType.kBLInputEventPointerDoubleClicked:return this.onLDoubleClicked(t.pointerArgs.position,t.pointerArgs.flags);case i.d.BLInputEventType.kBLInputEventPointerPressed:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonDown(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonDown(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerReleased:if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonLeft)return this.onLButtonUp(t.pointerArgs.position,t.pointerArgs.flags);if(t.pointerArgs.button===i.d.BLPointerButton.kBLPointerButtonRight)return this.onRButtonUp(t.pointerArgs.position,t.pointerArgs.flags);break;case i.d.BLInputEventType.kBLInputEventPointerMoved:return this.onMouseMove(t.pointerArgs.position,t.pointerArgs.flags);default:return!1}return!0},this.onLDoubleClicked=function(t,e){return!1},this.removed=function(){return!1},this.focusAnnot=function(t,e){return!1},this.restoreSelection=function(){},this.onLButtonDown=function(t,o){var r=c(t);if(r){e.setFocusPage(r.index);var s=null;try{if(s=null)return p(s,t)}catch(a){}try{s=null}catch(a){}if(!l(r.index,r.pos))return i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)||e.setSelection(null),!0;i.d.BLFlagIsSet(o,i.d.BLInputEventFlags.kBLInputEventFlagCtrlPressed)||e.setSelection(null),n=!0}return v.a.setupTextEditTool(e,t).then(function(e){e&&p(e,t)}),!0},this.onLButtonUp=function(t,i){if(n&&(n=!1),r){if(r.end()){var o=r.getSelectedObjects();o.getCount()>1?(r.getPageIndex(),B.copyFromCompositeToEditObjectStore(o,[]),u()):(u(),o.get(0))}else u(),e.invalidate();u()}return!!s&&a(t)},this.onRButtonDown=function(t,n){var o=c(t);if(o){e.setFocusPage(o.index);var r=null;try{if(r=null)return function(t,e){var n={pointerArgs:{}};return n.type=i.d.BLInputEventType.kBLInputEventPointerPressed,n.pointerArgs.button=i.d.BLPointerButton.kBLPointerButtonRight,n.pointerArgs.position=e,n.pointerArgs.flags=0,t.handleEvent(n)}(r,t)}catch(s){}try{r=null}catch(s){}return l(o.index,o.pos),e.setSelection(null),!0}return!1},this.onRButtonUp=function(t,n){return e.showContextMenu(i.d.ContextMenuType.Edit,t,i.d.BLSelectionOperations.kBLSelectionAllowPaste),!0},this.onMouseMove=function(t,o){if(s)return function(t){return!!s&&(e.setCursor(i.d.BLCursorType.kBLCursorDragHand),e.pointerMoved(t),!0)}(t);if(n){var a=c(t);return a&&(u(),r&&r.begin(a.pos),e.invalidate()),n=!1,!0}if(r){var l=r.getPageIndex();if(-1!=l){var h=e.mapPointToPage(l,t);r.continue(h);var p=B.getSelectedObjectsOnPage(e,l);p&&r.selectEqual(p),e.invalidate()}return!0}return e.setCursor(i.d.BLCursorType.kBLCursorArrow),c(t),e.setCursor(i.d.BLCursorType.kBLCursorHand),e.setHighlight(null),e.pointerMoved(t),!0}};L.createInstance=function(t){return new M(t)},n.d(e,"a",function(){return a}),n.d(e,"d",function(){return u}),n.d(e,"f",function(){return h}),n.d(e,"h",function(){return d}),n.d(e,"e",function(){return m}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return P}),n.d(e,"g",function(){return L})},PCNd:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},QRXY:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("exf4"),o=function(){return function(t,e){this.type=t,this.data=e}}(),r=function(){function t(){this.mBound=i.e.rect(),this.mEmpty=!0}return t.prototype.beginFigure=function(t){this.updateWithPoint(t)},t.prototype.endFigure=function(t){},t.prototype.endFigureClose=function(t){},t.prototype.lineTo=function(t){this.updateWithPoint(t)},t.prototype.curveTo=function(t,e,n){this.updateWithPoint(t),this.updateWithPoint(e),this.updateWithPoint(n)},t.prototype.getRectangle=function(){return this.mBound.copy()},t.prototype.updateWithPoint=function(t){this.mEmpty?(this.mBound=i.e.rect(t.x,t.y,t.x,t.y),this.mEmpty=!1):this.mBound.extend(t)},t}(),s=function(){function t(t,e){this.type=t,this.data=e,this.paths=[],this.fillRule=i.d.pdfClipRule.nonzero,this.mBoundCalculator=new r}return t.prototype.beginFigure=function(t){this.paths.push(new o(i.d.pdfClipPath.moveTo,t?t.copy():i.e.point())),this.mBoundCalculator.beginFigure(t)},t.prototype.lineTo=function(t){this.paths.push(new o(i.d.pdfClipPath.lineTo,t?t.copy():i.e.point())),this.mBoundCalculator.lineTo(t)},t.prototype.curveTo=function(t,e,n){if(n)this.paths.push(new o(i.d.pdfClipPath.curve,[t?t.copy():i.e.point(),e?e.copy():i.e.point(),n?n.copy():i.e.point()])),this.mBoundCalculator.curveTo(t,e,n);else{var r=this.getLastPoint();this.curveTo(r,t,e)}},t.prototype.conicCurveTo=function(t,e){t&&e&&this.curveTo(t,e)},t.prototype.rectangle=function(t){if(t){var e=t.copy();this.beginFigure(e.getOrigin()),this.lineTo(i.e.point(e.right,e.top)),this.lineTo(i.e.point(e.right,e.bottom)),this.lineTo(i.e.point(e.left,e.bottom)),this.endFigureClose()}},t.prototype.ellipse=function(t){if(t&&!t.isAreaEmpty()){var e=t.getOrigin(),n=.5*t.getWidth(),o=.5*t.getHeight(),r=e.x+n,s=e.y+o,a=.5522847498*n,c=.5522847498*o,u=r-a,l=s-c,h=r+a,p=s+c,d=r-n,f=s-o,g=r+n,m=s+o;this.beginFigure(i.e.point(r,m)),this.curveTo(i.e.point(u,m),i.e.point(d,p),i.e.point(d,s)),this.curveTo(i.e.point(d,l),i.e.point(u,f),i.e.point(r,f)),this.curveTo(i.e.point(h,f),i.e.point(g,l),i.e.point(g,s)),this.curveTo(i.e.point(g,p),i.e.point(h,m),i.e.point(r,m)),this.endFigureClose()}},t.prototype.endFigureClose=function(){this.paths.push(new o(i.d.pdfClipPath.close,null)),this.mBoundCalculator.endFigureClose()},t.prototype.endFigure=function(){this.mBoundCalculator.endFigure()},t.prototype.getPaths=function(){return this.paths},t.prototype.setFillRule=function(t){this.fillRule=t},t.prototype.getFillRule=function(){return this.fillRule},t.prototype.isEmpty=function(){return 0===this.paths.length},t.prototype.getBound=function(t){var e=t||i.e.identityMatrix(),n=i.e.rect();return this.isEmpty()||(n=this.mBoundCalculator.getRectangle()),e.mapRect(n)},t.prototype.transform=function(e){var n=function(t){var e=i.e.point(parseInt(t.x),parseInt(t.y));return e.offset(.5,.5),e};e=e||i.e.identityMatrix();for(var o=new t,r=0,s=this.paths.length;r<s;++r){var a=this.paths[r];if(a)switch(a.type){case i.d.pdfClipPath.moveTo:var c=a.data.copy();e&&(c=n(c=e.mapPoint(c))),o.beginFigure(c);break;case i.d.pdfClipPath.lineTo:c=a.data.copy(),e&&(c=n(c=e.mapPoint(c))),o.lineTo(c);break;case i.d.pdfClipPath.curve:var u=a.data[0].copy();e&&(u=n(u=e.mapPoint(u)));var l=a.data[1].copy();e&&(l=n(l=e.mapPoint(l)));var h=a.data[2].copy();e&&(h=n(h=e.mapPoint(h))),o.curveTo(u,l,h);break;case i.d.pdfClipPath.close:o.endFigureClose()}}return o},t.prototype.getLastPoint=function(){var t=null;if(this.paths.length>0){var e=this.paths[this.paths.length-1];e&&e.data&&(t=e.data instanceof Array&&e.data.length>0?e.data[e.data.length-1]:e.data)}return t?t.copy():i.e.point()},t}()},R0Qz:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("RdDz"),o=n.n(i),r=n("6okS"),s=n("YTF9"),a=n("exf4"),c=n("5Rvh"),u=function(){function t(){}return Object.defineProperty(t.prototype,"mask",{get:function(){return this.mask_},set:function(t){this.mask_=t},enumerable:!0,configurable:!0}),t.prototype.update=function(t,e,n,i,o,r){var s=this;e&&this.mask&&this.getData(t,e,n,i,o,r).then(function(t){t&&(s.mask.img=t.img,s.mask.blob=t.blob,e.invalidate())})},t.prototype.draw=function(t,e,n,i){if(t&&e&&n&&this.mask){var o=this.mask.img;if(o){var r=e.width,s=e.height;i/90&1&&(r=e.height,s=e.width);var c=new a.c(0,0,r,s),u=new a.c(0,0,e.width,e.height),l=c.getCenter();n=this.setOffsetByMargin(n.x,n.y),t.pushState(),this.transform(t,u,n.x,n.y,l.x,l.y,i),t.fillBitmap(u,o),t.popState()}}},t.prototype.clear=function(){this.mask&&(this.mask.img=null,this.mask.blob=null)},t.prototype.getData=function(t,e,n,i,r,a){var u=this,l=new s.a;if(t&&e){var h=e.document;if(h){var p=h.getPage(a);if(p){var d=p.getDevSpacePageBox(h.zoom);if(d){var f=new Image;f.onload=function(){var t,e=window.document.createElement("CANVAS"),s=new c.a(e),a=p.rotate;a/90&1?(e.width=f.height,e.height=f.width,u.rotateTempImg(s,f,a),t=s.toDataURL(),s.clear(),f.onload=function(){e=window.document.createElement("CANVAS"),s=new c.a(e),e.width=i,e.height=r,u.drawTempImg(s,n,f,d,i,r,a,!0),t=s.toDataURL(),s.clear(),f.onload=function(){l.resolve({img:f,blob:o()(t.split(",")[1],"image/png")}),t=null},f.src=t},f.src=t,t=null):(e.width=i,e.height=r,u.drawTempImg(s,n,f,d,i,r,a),t=s.toDataURL(),s.clear(),f.onload=function(){l.resolve({img:f,blob:o()(t.split(",")[1],"image/png")}),t=null},f.src=t)},f.src=t.toDataURL()}else l.resolve()}else l.resolve()}else l.resolve()}else l.resolve();return l.promise},t.prototype.rotateTempImg=function(t,e,n){var i=new a.c(0,0,e.height,e.width).getCenter(),o=new a.c(0,0,e.width,e.height);t.translateCTM(i.x,i.y),t.rotateCTM(a.e.degreeToRadian(-n)),o.offset(-a.e.castFloatToInt(o.width/2),-a.e.castFloatToInt(o.height/2)),t.fillBitmap(o,e)},t.prototype.drawTempImg=function(t,e,n,i,o,r,s,c){void 0===c&&(c=!1);var u=new a.c(0,0,n.width,n.height),l=Math.min(r/i.bottom,o/i.right),h=new a.c(0,0,o,r),p=h.getCenter();e=this.setOffsetByMargin(e.x,e.y),this.mask.img&&t.fillBitmap(h,this.mask.img),t.pushState(),c?this.transform90Or270(t,u,i,h,-e.x,-e.y,l,s):this.transform(t,u,-e.x,-e.y,p.x,p.y,-s,l);var d=t.getCompositeOperation();t.setCompositeOperation("destination-out"),t.fillRect(u,"#FFFFFF"),t.setCompositeOperation(d),t.fillBitmap(u,n),t.popState()},t.prototype.transform90Or270=function(t,e,n,i,o,r,s,a){if(t){t.scaleCTM(s,s);var c=n.right-e.right;90===a?t.translateCTM(r,o=n.bottom-e.bottom-o):270===a&&t.translateCTM(r=c-r,o)}},t.prototype.transform=function(t,e,n,i,o,s,c,u){if(t){t.translateCTM(o,s),t.rotateCTM(a.e.degreeToRadian(c)),c/90&1?e&&e.offset(-a.e.castFloatToInt(e.width/2),-a.e.castFloatToInt(e.height/2)):t.translateCTM(-o,-s),r.j(u)||t.scaleCTM(u,u);var l=this.transformOffsetByRotate(n,i,c);l&&t.translateCTM(l.x,l.y)}},t.prototype.transformOffsetByRotate=function(t,e,n){var i={x:t,y:e};switch(n){case 90:i.x=e,i.y=-t;break;case 180:i.x=-t,i.y=-e;break;case 270:i.x=-e,i.y=t}return i},t.prototype.setOffsetByMargin=function(t,e){var n={x:t,y:e};return 0!==t&&(n.x=n.x+6),0!==e&&(n.y=n.y+15),n},t}()},SdWe:function(t,e,n){"use strict";!function(e){var n=/^(b|B)$/,i={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},o={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function r(t){var e,r,s,a,c,u,l,h,p,d,f,g,m,v,y,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},P=[],_=0,w=void 0,x=void 0;if(isNaN(t))throw new TypeError("Invalid number");return r=!0===b.bits,f=!0===b.unix,d=void 0!==b.round?b.round:f?1:2,u=void 0!==b.locale?b.locale:"",l=b.localeOptions||{},g=void 0!==b.separator?b.separator:"",m=void 0!==b.spacer?b.spacer:f?"":" ",y=b.symbols||{},v=2===(e=b.base||2)&&b.standard||"jedec",p=b.output||"string",a=!0===b.fullform,c=b.fullforms instanceof Array?b.fullforms:[],w=void 0!==b.exponent?b.exponent:-1,s=e>2?1e3:1024,(h=(x=Number(t))<0)&&(x=-x),(-1===w||isNaN(w))&&(w=Math.floor(Math.log(x)/Math.log(s)))<0&&(w=0),w>8&&(w=8),"exponent"===p?w:(0===x?(P[0]=0,P[1]=f?"":i[v][r?"bits":"bytes"][w]):(_=x/(2===e?Math.pow(2,10*w):Math.pow(1e3,w)),r&&(_*=8)>=s&&w<8&&(_/=s,w++),P[0]=Number(_.toFixed(w>0?d:0)),P[1]=10===e&&1===w?r?"kb":"kB":i[v][r?"bits":"bytes"][w],f&&(P[1]="jedec"===v?P[1].charAt(0):w>0?P[1].replace(/B$/,""):P[1],n.test(P[1])&&(P[0]=Math.floor(P[0]),P[1]=""))),h&&(P[0]=-P[0]),P[1]=y[P[1]]||P[1],!0===u?P[0]=P[0].toLocaleString():u.length>0?P[0]=P[0].toLocaleString(u,l):g.length>0&&(P[0]=P[0].toString().replace(".",g)),"array"===p?P:(a&&(P[1]=c[w]?c[w]:o[v][w]+(r?"bit":"byte")+(1===P[0]?"":"s")),"object"===p?{value:P[0],symbol:P[1]}:P.join(m)))}r.partial=function(t){return function(e){return r(e,t)}},t.exports=r}("undefined"!=typeof window?window:global)},TIxM:function(t,e,n){"use strict";var i=n("CcnG"),o=n("Ip0R"),r=function(){function t(t,e){this.renderer=t,this.element=e,this.filesDropped=new i.EventEmitter,this.filesHovered=new i.EventEmitter,this.class="hover"}return t.prototype.onDrop=function(t){t.preventDefault(),this.filesDropped.emit(t.dataTransfer.files),this.filesHovered.emit(!1),this.renderer.removeClass(this.element.nativeElement,this.class)},t.prototype.onDragOver=function(t){event.preventDefault(),this.filesHovered.emit(!0),this.renderer.addClass(this.element.nativeElement,this.class)},t.prototype.onDragLeave=function(t){this.filesHovered.emit(!1),this.renderer.removeClass(this.element.nativeElement,this.class)},t}(),s=n("A7o+");n("sMba"),n("ZYCi"),n("7lH9"),n.d(e,"a",function(){return a}),n.d(e,"b",function(){return l});var a=i["ɵcrt"]({encapsulation:0,styles:[["input[_ngcontent-%COMP%]{display:none}.c-upload[_ngcontent-%COMP%]{max-width:970px;margin:0 auto}.c-upload__local[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:center;align-items:center;margin-bottom:50px}.c-upload__choose[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .c-upload__drag[_ngcontent-%COMP%]{padding:50px 30px;text-transform:uppercase;border-radius:10px;font-weight:700;font-size:18px;min-width:400px;text-align:center}@media (max-width:960px){.c-upload__local[_ngcontent-%COMP%]{-ms-flex-pack:distribute;justify-content:space-around}.c-upload__choose[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .c-upload__drag[_ngcontent-%COMP%]{min-width:270px;padding:25px 10px}}.c-upload__drag[_ngcontent-%COMP%]{color:#a2a2a2;border:4px dashed}.c-upload__drag.hover[_ngcontent-%COMP%]{border-style:solid}.c-upload__choose[_ngcontent-%COMP%]{color:#fff;background-color:#76bd00;cursor:pointer;border-radius:10px}.c-upload__choose[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.button){display:block;cursor:pointer}.c-upload__separator[_ngcontent-%COMP%]{font-size:18px;color:#a2a2a2;font-weight:700}@media (max-width:767px){.c-upload__local[_ngcontent-%COMP%]{-ms-flex-pack:center;justify-content:center}.c-upload__drag[_ngcontent-%COMP%], .c-upload__separator[_ngcontent-%COMP%]{display:none}}.upload[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;margin-bottom:20px;-ms-flex-pack:center;justify-content:center}"]],data:{}});function c(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,21,"div",[["class","c-upload"]],null,null,null,null,null)),(t()(),i["ɵeld"](1,0,null,null,20,"div",[["class","c-upload__local"]],null,null,null,null,null)),(t()(),i["ɵeld"](2,0,null,null,7,"p",[["class","c-upload__drag"],["fileDrop",""]],null,[[null,"filesDropped"],[null,"filesHovered"],[null,"drop"],[null,"dragover"],[null,"dragleave"]],function(t,e,n){var o=!0,r=t.component;return"drop"===e&&(o=!1!==i["ɵnov"](t,6).onDrop(n)&&o),"dragover"===e&&(o=!1!==i["ɵnov"](t,6).onDragOver(n)&&o),"dragleave"===e&&(o=!1!==i["ɵnov"](t,6).onDragLeave(n)&&o),"filesDropped"===e&&(o=!1!==r.onUploaded.emit(n)&&o),"filesHovered"===e&&(o=!1!==r.dropzoneState(n)&&o),o},null,null)),i["ɵprd"](512,null,o.u,o.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](4,278528,null,0,o.i,[o.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](5,{active:0}),i["ɵdid"](6,16384,null,0,r,[i.Renderer2,i.ElementRef],null,{filesDropped:"filesDropped",filesHovered:"filesHovered"}),(t()(),i["ɵeld"](7,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i["ɵted"](8,null,["",""])),i["ɵpid"](131072,s.h,[s.i,i.ChangeDetectorRef]),(t()(),i["ɵeld"](10,0,null,null,2,"span",[["class","c-upload__separator"]],null,null,null,null,null)),(t()(),i["ɵted"](11,null,["",""])),i["ɵpid"](131072,s.h,[s.i,i.ChangeDetectorRef]),(t()(),i["ɵeld"](13,0,null,null,8,"div",[["class","c-upload__choose"]],null,null,null,null,null)),(t()(),i["ɵeld"](14,0,null,null,7,"label",[["class","upload__button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.upload(n)&&i),i},null,null)),i["ɵprd"](512,null,o.u,o.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](16,278528,null,0,o.i,[o.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](17,{disabled:0}),(t()(),i["ɵeld"](18,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i["ɵted"](19,null,["",""])),i["ɵpid"](131072,s.h,[s.i,i.ChangeDetectorRef]),(t()(),i["ɵeld"](21,0,[[1,0],["input",1]],null,0,"input",[["multiple",""],["type","file"]],[[8,"accept",0]],[[null,"change"]],function(t,e,n){var o=!0,r=t.component;return"change"===e&&(o=!1!==(!r.isDisabled&&r.onUploaded.emit(i["ɵnov"](t,21).files))&&o),o},null,null))],function(t,e){var n=e.component,i=t(e,5,0,n.dropzoneActive);t(e,4,0,"c-upload__drag",i);var o=t(e,17,0,n.isDisabled);t(e,16,0,"upload__button",o)},function(t,e){var n=e.component;t(e,8,0,i["ɵunv"](e,8,0,i["ɵnov"](e,9).transform("DRAG IMAGE HERE"))),t(e,11,0,i["ɵunv"](e,11,0,i["ɵnov"](e,12).transform("or"))),t(e,19,0,i["ɵunv"](e,19,0,i["ɵnov"](e,20).transform(n.buttonCaption))),t(e,21,0,n.supportedExtensions)})}function u(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,8,"div",[["class","upload"]],null,null,null,null,null)),(t()(),i["ɵeld"](1,0,null,null,7,"label",[],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.upload(n)&&i),i},null,null)),i["ɵprd"](512,null,o.u,o.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](3,278528,null,0,o.i,[o.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](4,{disabled:0}),(t()(),i["ɵeld"](5,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),i["ɵted"](6,null,["",""])),i["ɵpid"](131072,s.h,[s.i,i.ChangeDetectorRef]),(t()(),i["ɵeld"](8,0,[[1,0],["input",1]],null,0,"input",[["multiple",""],["type","file"]],[[8,"accept",0]],[[null,"change"]],function(t,e,n){var o=!0,r=t.component;return"change"===e&&(o=!1!==(!r.isDisabled&&r.onUploaded.emit(i["ɵnov"](t,8).files))&&o),o},null,null))],function(t,e){var n=e.component,o=i["ɵinlineInterpolate"](1,"button ",n.classes,""),r=t(e,4,0,n.isDisabled);t(e,3,0,o,r)},function(t,e){var n=e.component;t(e,6,0,i["ɵunv"](e,6,0,i["ɵnov"](e,7).transform(n.buttonCaption))),t(e,8,0,n.supportedExtensions)})}function l(t){return i["ɵvid"](0,[i["ɵqud"](671088640,1,{inputElementRef:0}),(t()(),i["ɵand"](16777216,null,null,1,null,c)),i["ɵdid"](2,16384,null,0,o.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["ɵand"](16777216,null,null,1,null,u)),i["ɵdid"](4,16384,null,0,o.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,!n.isOnlyChoose),t(e,4,0,n.isOnlyChoose)},null)}},TQCd:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("6okS"),o=n("exf4"),r=n("QRXY"),s=function(){function t(){}return t.drawLine=function(t,e,n,i,r){var s=t.getCTM();t.setCTM(null);var a=s.mapPoint(e).floor(),c=o.e.point(a.x+.5,a.y+.5),u=s.mapPoint(n).floor(),l=o.e.point(u.x+.5,u.y+.5),h={};h.lineCap=o.d.GLineCap.kGLineCapFlat,h.lineJoin=o.d.GLineJoin.kGLineJoinMiter,r&&(h.dashPattern=r),t.strokeLine(c,l,i,0,h),t.setCTM(s)},t.drawMetricLine=function(t,e,n,i){var s=t.getCTM();t.setCTM(null);var a=s.mapPoint(e).floor(),c=o.e.point(a.x+.5,a.y+.5),u=s.mapPoint(n).floor(),l=o.e.point(u.x+.5,u.y+.5),h=o.e.point(l.x-c.x,l.y-c.y).vecNormalized();c.copy().offset(-h.x,-h.y),l.copy().offset(h.x,h.y);var p=o.e.point(h.y,-h.x),d=c.copy();d.offset(4*(h.x+p.x),4*(h.y+p.y));var f=c.copy();f.offset(4*(h.x-p.x),4*(h.y-p.y));var g=new r.a;g.beginFigure(c),g.lineTo(d),g.lineTo(f),g.endFigureClose(),i&&t.fillGeometry(g,i);var m=l.copy();m.offset(-4*(h.x-p.x),-4*(h.y-p.y));var v=l.copy();v.offset(-4*(h.x+p.x),-4*(h.y+p.y));var y=new r.a;y.beginFigure(l),y.lineTo(m),y.lineTo(v),y.endFigureClose(),i&&t.fillGeometry(y,i);var b={};b.lineCap=o.d.GLineCap.kGLineCapFlat,b.lineJoin=o.d.GLineJoin.kGLineJoinMiter,b.miterLimit=10;var P=c.copy();P.offset(5*p.x,5*p.y);var _=c.copy();_.offset(-5*p.x,-5*p.y),t.strokeLine(P,_,i,0,b);var w=l.copy();w.offset(5*p.x,5*p.y);var x=l.copy();x.offset(-5*p.x,-5*p.y),t.strokeLine(w,x,i,0,b),t.strokeLine(c,l,i,0,b),t.setCTM(s)},t.drawFrame=function(t,e,n,i,s,a){var c=t.getCTM();t.setCTM(null);var u=!a||a%2?.5:0,l=c.mapPoint(e.tl).floor(),h=o.e.point(l.x+u,l.y+u),p=c.mapPoint(e.tr).floor(),d=o.e.point(p.x+u,p.y+u),f=c.mapPoint(e.bl).floor(),g=o.e.point(f.x+u,f.y+u),m=c.mapPoint(e.br).floor(),v=o.e.point(m.x+u,m.y+u),y=new r.a;if(y.beginFigure(g),y.lineTo(v),y.lineTo(d),y.lineTo(h),y.endFigureClose(),n&&t.fillGeometry(y,n),i){var b={};b.lineCap=o.d.GLineCap.kGLineCapFlat,b.lineJoin=o.d.GLineJoin.kGLineJoinBevel,s&&(b.dashPattern=s),a||(a=0),t.strokeGeometry(y,i,a,b)}t.setCTM(c)},t.drawMarker=function(t,e,n,i,r,s,a){var c=t.getCTM();t.setCTM(null);var u=c.mapPoint(i).floor(),l=o.e.point(u.x+0,u.y+0),h=1==a?c.mapSize(o.e.size(r,r)).width:r;o.e.rect(l.x-h,l.y-h,l.x+h,l.y+h),t.drawMarker(l,h,n,e,s),t.setCTM(c)},t.drawOrigin=function(t,e,n,i,r,s){var a=t.getCTM();t.setCTM(null);var c=a.mapPoint(i).floor(),u=o.e.point(c.x+.5,c.y+.5),l=o.e.rect(u.x-s,u.y-s,u.x+s,u.y+s);if(e&&t.fillEllipse(l,e),n){t.strokeEllipse(l,n,0,null);var h=o.e.rect(u.x-r,u.y-r,u.x+r,u.y+r);t.fillEllipse(h,n)}t.setCTM(a)},t.drawSnapInfo=function(t,e,n){if(!i.j(e)){var o=e.guides;if(o.length>0)for(var r=[4],s=0;s<o.length;++s)this.drawLine(t,o[s].pointA,o[s].pointB,n,r);var a=e.distances;if(a.length>0)for(s=0;s<a.length;++s)this.drawMetricLine(t,a[s].pointA,a[s].pointB,n);var c=e.scales;if(c.length>0)for(s=0;s<c.length;++s)this.drawMetricLine(t,c[s].pointA,c[s].pointB,n)}},t}()},Tzdt:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("5HBy"),o=n("exf4"),r=n("NthO"),s=function(){function t(){}return t.prototype.createInstance=function(t,e){switch(t){case o.h.View:return new r.h(e);case o.h.Brush:return new r.a(e);case o.h.Rect:return new r.f(e);case o.h.Lasso:return new r.d(e);case o.h.Polygon:return new r.e(e);case o.h.Edit:return new r.b(e);case o.h.Transform:return new r.c(e);case o.h.TypeText:return new i.e(e);case o.h.TextEdit:return new i.b.createInstance(e);case o.h.ViewEdit:return new r.g.createInstance(e);default:return null}},t}()},"Ui+l":function(t,e,n){"use strict";n.d(e,"a",function(){return l});var i=n("CcnG"),o=n("6okS"),r=n("ukOs"),s=n("exf4"),a=n("EHI3"),c=n("CasB"),u=n("LDQ/"),l=function(){function t(t,e,n,r){var a=this;this.document=t,this.layoutCallbacks=e,this.pageRenderService=n,this.inputhandlersFactoryService=r,this.onChangeTool=new i.EventEmitter,this.layoutRect=s.e.rect(),this.inputHandlers=[],this.renderTargetCallbacks=[],this.onDrawPageViewSubscribers=[],this.selection=null,this.size=s.e.size(),this.abandonCurrentEvent=!1,this.viewState=0,this.currentCursor=s.d.bLCursorType.kBLCursorArrow,this.layout=null,this.textCaretPos={pageIndex:-1,top:s.e.point(),bottom:s.e.point()},this.prevRect=null,this.getSelection=function(){return this.selection},this.mapQuadToDevice=function(t,e){var n=a.mapPointToDevice(t,e.tl),i=a.mapPointToDevice(t,e.tr),o=a.mapPointToDevice(t,e.bl),r=a.mapPointToDevice(t,e.br);return s.e.quadFromPoints(n,i,o,r)},this.mapRectToDevice=function(t,e){var n=s.e.rect();if(!o.j(a.layout)){n=a.layout.mapRectToDevice(t,e);var i=a.layoutRect.getOrigin();n.offset(i.x,i.y)}return n}}return Object.defineProperty(t.prototype,"documentId",{get:function(){return this.document?this.document.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderTargetCallback",{get:function(){return this.renderTargetCallback},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return u.b.mask},enumerable:!0,configurable:!0}),t.prototype.setMask=function(t){u.b.setMask(t),this.invalidate()},t.prototype.updateMask=function(){var t=this.getCurrentPage();if(t){var e=t.topLayer;e&&u.b.update(this.maskRenderTarget,this,this.getLayoutOffset(),e.img,0)}},t.prototype.getDataMask=function(){var t=this.getCurrentPage();if(t){var e=t.topLayer;if(e)return u.b.getData(this.maskRenderTarget,this,this.getLayoutOffset(),e.img,0)}},t.prototype.getLayers=function(){var t=this.getCurrentPage();return new Promise(function(e,n){e({layers:t.layers})})},t.prototype.getCurrentPage=function(){var t=this.getFocusPage()||0,e=this.getDocument();if(e)return e.getPage(t)},t.prototype.setPageContent=function(t){var e=this.getCurrentPage();e&&e.setPageContent(t)},t.prototype.update=function(t){if(t){var e=this.getCurrentPage();e&&e.updateTopLayer({img:t.img})}},t.prototype.invalidate=function(){this.fireEventOnDrawUpdated()},t.prototype.getDocumentId=function(){return this.document.id},t.prototype.setActiveTool=function(t,e,n){if(void 0===n&&(n=!1),this.setCursor(s.d.bLCursorType.kBLCursorArrow),t!==s.h.Edit&&t===this.getActiveTool())return t===s.h.Brush?void this.changeHandlerParams(t,e):void 0;var i=this.inputhandlersFactoryService.createInstance(t,this);if(i){if(t===s.h.View||t===s.h.Edit){for(this.setHighlight(null),this.setSelection(null);this.inputHandlers.length>0;){var o=this.inputHandlers.shift().second;o&&o.terminate()}this.invalidate()}i.initialize(e),this.pushInputHandler(t,i),this.onChangeTool.emit({type:t,params:e})}},t.prototype.changeHandlerParams=function(t,e){if(!(this.inputHandlers.length<1)){var n=this.inputHandlers[0];n&&n.first===t&&n.second&&n.second.initialize(e)}},t.prototype.setSelectionAndTool=function(t,e){var n=c.e.createSelection(t);if(!n)return null;n.init(this,e);var i=this.inputhandlersFactoryService.createInstance(t,this);return i&&(i.initialize(e),this.pushInputHandler(t,i)),this.setSelection(n),i},t.prototype.getActiveTool=function(){return this.inputHandlers&&this.inputHandlers.length>0?this.inputHandlers[0].second.getToolType():null},t.prototype.setHighlight=function(t){this.highlight!==t&&(this.highlight=t,this.invalidate())},t.prototype.setSelection=function(t){return this.selection!==t&&(this.textCaretPos.pageIndex=-1,this.updateCaret(),this.selection=t,this.invalidate(),this.fireEventOnSelectionChanged(this.selection)),this.selection},t.prototype.pushInputHandler=function(t,e){if(this.inputHandlers.length>0){var n=this.inputHandlers[0].second;if(n&&t!==this.inputHandlers[0].first){var i=!1;n.removed&&(i=n.removed()),i&&(n.terminate(),this.inputHandlers.shift())}}this.inputHandlers.unshift({first:t,second:e})},t.prototype.setActive=function(t){var e=t,n=this.getFocusPage();if(e)this.prevRect=null;else if(!this.prevRect){this.resetSelection(!0);var i=this.layoutRect.getSize();this.layout&&!o.j(n)&&n>=0&&(this.prevRect=this.layout.mapRectToPage(n,s.e.rect(0,0,i.width,i.height)))}},t.prototype.setCursor=function(t){this.currentCursor!==t&&(this.currentCursor=t)},t.prototype.isLoadedChanged=function(){this.document.isLoaded&&this.setLayout(this.document.documentView)},t.prototype.getViewState=function(){return this.viewState},t.prototype.getVisibleRange=function(){return this.layout?this.layout.getVisibleRange():{startPage:-1,endPage:-1}},t.prototype.pointerWheel=function(t,e){var n=this.layoutRect.getOrigin(),i=s.e.point(t.x-n.x,t.y-n.y);this.layout&&this.layout.pointerWheel&&this.layout.pointerWheel(i,e)},t.prototype.getPageAtPoint=function(t){var e=-1;return o.j(this.layout)||(e=this.layout.getPageAtPoint(t)),e},t.prototype.pointerMoved=function(t){this.handleUnhandledTap(t,s.d.bLInputEventType.kBLInputEventPointerMoved),this.layout&&this.layout.pointerMoved&&this.layout.pointerMoved(t)},t.prototype.mapPointToPage=function(t,e){var n=s.e.point();if(!o.j(this.layout)){var i=this.layoutRect.getOrigin(),r=s.e.point(e.x-i.x,e.y-i.y);n=this.layout.mapPointToPage(t,r)}return n},t.prototype.showContextMenu=function(t,e,n,i){this.fireEventOnShowContextMenu(t,e,n,i)},t.prototype.fireEventOnShowContextMenu=function(t,e,n,i){this.renderTargetCallbacks.forEach(function(o){o&&o.onShowContextMenu&&o.onShowContextMenu(t,e,n,i)})},t.prototype.draw=function(t){if(t){if(t.clear(),this.layout){var e=t.getCTM();t.pushState(),this.drawLayout(t,e),t.popState(),t.setCTM(e)}this.updateCaret()}},t.prototype.defaultDraw=function(t,e){var n=this,i=this.getVisiblePages();if(i){for(var o=0,r=i.length;o<r;o++)this.drawPage(t,i[o].index,i[o]);if(t.popState(),t.setCTM(e),t.pushState(),this.onDrawPageViewSubscribers){if(this.onDrawPageViewSubscribers.length>0)for(var s=function(e,o){var r=e;a.renderWrapper(t,i[e].index,function(){n.onDrawPageViewSubscribers.forEach(function(e){e(t,i[r].index)})})},a=this,c=0,u=i.length;c<u;c++)s(c);for(var l=function(o,r){h.renderWrapper(t,i[o].index,function(){n.drawSelection(t,i[o].index,e)})},h=this,p=(o=0,i.length);o<p;o++)l(o);t.popState()}}},t.prototype.resizeView=function(t){o.j(t)&&(t=s.e.size());var e=t.copy();this.size.isEqual(e)||(this.size=e,this.updateLayoutRect()),this.invalidate()},t.prototype.getCursor=function(){return this.currentCursor},t.prototype.getVisiblePages=function(){return this.layout?this.layout.getVisiblePages():[]},t.prototype.getFocusPage=function(){var t=-1;return o.j(this.layout)||(t=this.layout.getFocusPage()),t},t.prototype.goToPageRect=function(t,e,n){this.layout&&this.layout.goToPageRect(t,e,n)},t.prototype.mapFieldRectToPage=function(t,e){var n=this.getDocument().getPage(t);if(!n)return null;var i=n.getPageToDevSpaceMatrix(1,0).invert(),o=s.e.rect(e.left,e.top,e.left+e.width,e.top+e.height);return i.mapRect(o)},t.prototype.selectField=function(t){if(t){var e=t.pageIndex,n=this.mapFieldRectToPage(e,t);n&&(this.goToPageRect(e,n),n=this.mapRectToDevice(e,n),this.focusField(e,n,t.id))}},t.prototype.getActiveToolType=function(){return this.inputHandlers&&this.inputHandlers.length>0?this.inputHandlers[0].second.getToolType():null},t.prototype.getDocument=function(){return this.document},t.prototype.onCaretPositionChanged=function(t){o.j(t)&&(t={pageIndex:0,top:s.e.point(),bottom:s.e.point()}),this.textCaretPos=t,this.updateCaret()},t.prototype.fireEventOnSelectionChanged=function(t){this.fireEventOnShowContextMenu("",null,null)},t.prototype.fireEventOnScrollVisibilityChanged=function(t,e){this.renderTargetCallbacks.forEach(function(n){n&&n.onScrollVisibilityChanged&&n.onScrollVisibilityChanged(t,e)})},t.prototype.fireEventOnScrollChanged=function(t,e){this.renderTargetCallbacks.forEach(function(n){n&&n.onScrollChanged&&n.onScrollChanged(t,e)})},t.prototype.fireEventOnScrollRangeChanged=function(t,e){this.renderTargetCallbacks.forEach(function(n){n&&n.onScrollRangeChanged&&n.onScrollRangeChanged(t,e)})},t.prototype.fireEventOnScrollSizeChanged=function(t,e){this.renderTargetCallbacks.forEach(function(n){n&&n.onScrollSizeChanged&&n.onScrollSizeChanged(t,e)})},t.prototype.fireEventOnScrollPositionChanged=function(t,e){this.renderTargetCallbacks.forEach(function(n){n&&n.onScrollPositionChanged&&n.onScrollPositionChanged(t,e)})},t.prototype.fireEventOnDrawUpdated=function(){this.renderTargetCallbacks.forEach(function(t){t&&t.onDrawUpdated&&t.onDrawUpdated()})},t.prototype.handleUnhandledEvent=function(t){switch(t.type){case s.d.bLInputEventType.kBLInputEventPointerPressed:return t.pointerArgs.button===s.d.bLPointerButton.kBLPointerButtonLeft&&this.pointerPressed(t.pointerArgs.position),!0;case s.d.bLInputEventType.kBLInputEventPointerReleased:return t.pointerArgs.button===s.d.bLPointerButton.kBLPointerButtonLeft&&this.pointerReleased(t.pointerArgs.position),!0;case s.d.bLInputEventType.kBLInputEventPointerMoved:return this.pointerMoved(t.pointerArgs.position),!0;case s.d.bLInputEventType.kBLInputEventWheelChanged:if(s.d.bLFlagIsSet(t.wheelArgs.flags,s.d.bLInputEventFlags.kBLInputEventFlagCtrlPressed)){var e=this.getZoom()*(1+1.5*t.wheelArgs.delta/10);e=+e.toFixed(2),this.layout.zoomTo(s.d.pdfPageView.none,s.g.floorZoom(e),t.wheelArgs.position)}else{var n=t.wheelArgs.delta;0!==n&&this.pointerWheel(t.wheelArgs.position,1*n)}return!0;case s.d.bLInputEventType.kBLInputEventKeyPressed:var i=t.keyArgs.keycode;if(i===s.d.kBLKey.kBLKey_Z&&s.d.bLFlagIsSet(t.keyArgs.flags,s.d.bLInputEventFlags.kBLInputEventFlagCtrlPressed))return!0;if(i===s.d.kBLKey.kBLKey_Y&&s.d.bLFlagIsSet(t.keyArgs.flags,s.d.bLInputEventFlags.kBLInputEventFlagCtrlPressed))return!0}return!1},t.prototype.pointerPressed=function(t){this.handleUnhandledTap(t,s.d.bLInputEventType.kBLInputEventPointerPressed),this.layout&&this.layout.pointerPressed&&this.layout.pointerPressed(t)},t.prototype.fireEventOnActiveToolChanged=function(t){for(var e=0;e<this.inputHandlers.length;e++){var n=this.inputHandlers[e].second;n&&n.onActiveToolChanged&&n.onActiveToolChanged(t)}},t.prototype.pointerReleased=function(t){this.handleUnhandledTap(t,s.d.bLInputEventType.kBLInputEventPointerReleased),this.layout&&this.layout.pointerReleased&&this.layout.pointerReleased(t)},t.prototype.resetSelection=function(t){for(this.abandonCurrentEvent=!0;this.inputHandlers.length>1;)this.inputHandlers[0].second.terminate(),this.inputHandlers.shift();if(this.setSelection(null),this.inputHandlers.length>0){var e=this.inputHandlers[0].second.getToolType();t&&this.fireEventOnActiveToolChanged(e)}this.invalidate()},t.prototype.unselect=function(){if(this.inputHandlers){var t=this.inputHandlers[1]&&this.inputHandlers[1].second;t&&(this.resetSelection(),t.unselect())}},t.prototype.dispatchEvent=function(t,e){var n=!1;if(!n){this.abandonCurrentEvent=!1;for(var i=0;i!==this.inputHandlers.length;){var o=this.inputHandlers[i].second;if(o){if(n=o.handleEvent(t),this.abandonCurrentEvent)return!0;if(o.isFinished()){o.terminate(),this.inputHandlers.shift();var r=this.inputHandlers[i];if(r){var s=r.second;if(s){var a=s.getToolType();this.fireEventOnActiveToolChanged(a),s.restoreSelection()}}}else++i;if(n)return n}}n||(n=this.handleUnhandledEvent(t))}return n},t.prototype.setLayout=function(t){var e=this.getDocument();if(e.isLoaded&&this.layoutName!==t){this.layoutName=t;var n=a.a.createInstance(t);if(n){var i=e.pageSelectedIndex,r=null,c=this.layoutRect.getSize();try{if(this.layout&&(i=this.getFocusPage(),!o.j(i)&&i>=0)){var u=s.e.rect(0,0,c.width,c.height);r=this.layout.mapRectToPage(i,u)}}catch(l){}this.layout&&this.layout.dispose&&this.layout.dispose(),this.layout=n,this.layout.initialize(this,{hasCoverPage:e.documentView===s.d.pdfDocumentView.facingConverPage||e.documentView===s.d.pdfDocumentView.facingContinuousConverPage}),this.layout.resizeView(c),this.layout.zoomTo(e.pageView,e.zoom),this.layout.setPagesRotation(e.rotate),!o.j(i)&&i>=0&&this.goToPageRect(i,r,0),e.documentView=t}}},t.prototype.getViewSize=function(){return this.size},t.prototype.getLayoutRect=function(){return this.layoutRect.copy()},t.prototype.initialize=function(t,e,n,i){this.resizeView(t),e&&e.clear(),n&&(n.clear(),this.maskRenderTarget=n),i&&(i.clear(),this.cursorRenderTarget=i)},t.prototype.setPageView=function(t){this.setZoom(null,t)},t.prototype.setZoom=function(t,e){o.j(e)&&(e=s.d.pdfPageView.none),(e||t)&&e!==s.d.pdfPageView.actualSize||(e=s.d.pdfPageView.none,t=1),this.layout.zoomTo(e,s.g.floorZoom(t))},t.prototype.zoomIn=function(){for(var t=0,e=s.f.availableZoomValues.length;t<e;++t){var n=s.f.availableZoomValues[t];if(this.document.zoom<n){this.setZoom(n);break}}},t.prototype.zoomOut=function(){for(var t=o.m(s.f.availableZoomValues).reverse(),e=0,n=t.length;e<n;++e){var i=t[e];if(this.document.zoom>i){this.setZoom(i);break}}},t.prototype.getZoom=function(){return this.document.zoom},t.prototype.processScrollEvent=function(t,e,n){this.layout&&this.layout.processScrollEvent(t,e,n)},t.prototype.subscribeEventOnDrawPageView=function(t){~this.onDrawPageViewSubscribers.indexOf(t)||this.onDrawPageViewSubscribers.push(t)},t.prototype.unSubscribeEventOnDrawPageView=function(t){~this.onDrawPageViewSubscribers.indexOf(t)&&this.onDrawPageViewSubscribers.splice(t,1)},t.prototype.drawSelection=function(t,e,n){this.drawContent(t,e),this.drawTextFileds(t,r.a.views,e),o.j(this.selection)||this.selection.draw(t,e),o.j(this.highlight)||this.highlight.drawHighlight(t,e);for(var i=0;i<this.inputHandlers.length;i++){var s=this.inputHandlers[i].second;s&&s.onDraw&&s.onDraw(t,e)}u.b.draw(this.maskRenderTarget,this.document,this.getLayoutOffset(),0)},t.prototype.fillContent=function(t){this.drawTextFileds(t,r.a.views,0)},t.prototype.drawTextFileds=function(t,e,n){if(o.d(e))for(var i=0;i<e.length;i++){var r=e[i];r&&r.draw(n,t)}},t.prototype.drawContent=function(t,e){if(t){var n=this.getDocument();if(n){var i=n.getPage(e);if(i){var r=i.content,a=i.pageRect;if(o.d(r)&&a)for(var c=0;c<r.length;c++){var u=r[c];if(u){var l=u.img,h=this._matrixDecompose(u.matrix.copy());if(l&&h){var p=u.getQuad().copy();if(p){var d=p.getBound(),f=d.getCenter(),g=h.rotation,m=h.scaling;t.pushState();var v=t.getCTM();if(t.setCTM(s.e.matrix()),t.clipRect(a),t.setCTM(v),t.translateCTM(f.x,f.y),t.concatCTM(s.e.reflectYMatrix()),t.translateCTM(-f.x,-f.y),0===g)t.fillBitmap(d,l);else{var y=t.getCTM();t.setCTM(s.e.matrix()),t.concatCTM(y),t.translateCTM(f.x,f.y),t.rotateCTM(-g);var b=s.e.rect(0,0,m.width,m.height);b.offset(-s.e.castFloatToInt(m.width/2),-s.e.castFloatToInt(m.height/2)),t.fillBitmap(b,l),t.setCTM(y)}t.popState()}}}}}}}},t.prototype.destroy=function(){this.pageRenderService.removeAllCache(),this.onDrawPageViewSubscribers=null},t.prototype.refreshPages=function(){this.document&&this.document.refreshPages()},t.prototype.setHighlightNamed=function(t,e){var n=c.e.createSelection(t);n&&(n.init(this,e),this.setHighlight(n))},t.prototype.setSelectionNamed=function(t,e){var n=c.e.createSelection(t);return n?(n.init(this,e),this.setSelection(n)):null},t.prototype.setFocusPage=function(t){o.j(this.layout)||(this.layout.setFocusPage(t),this.invalidate())},t.prototype.requestPermissions=function(t,e,n){return!0},t.prototype.updateCaret=function(){var t=s.e.point(),e=s.e.point();-1!==this.textCaretPos.pageIndex&&(t=this.mapPointToDevice(this.textCaretPos.pageIndex,this.textCaretPos.top),e=this.mapPointToDevice(this.textCaretPos.pageIndex,this.textCaretPos.bottom)),this.fireEventOnCaretPositionChanged(t,e)},t.prototype.fireEventOnCaretPositionChanged=function(t,e){this.renderTargetCallbacks.forEach(function(n){n&&n.onCaretPositionChanged&&n.onCaretPositionChanged(t,e)})},t.prototype.mapPointToDevice=function(t,e){var n=s.e.point();if(!o.j(this.layout)){n=this.layout.mapPointToDevice(t,e);var i=this.layoutRect.getOrigin();n.offset(i.x,i.y)}return n},t.prototype.dispatchEventHelper=function(){for(var t,e=0;e!==this.inputHandlers.length;){var n=this.inputHandlers[e].second;if(n){if(t=n.handleEvent(event),this.abandonCurrentEvent)return!0;if(n.isFinished()){n.terminate(),this.inputHandlers.shift();var i=this.inputHandlers[e].second.getToolType();this.fireEventOnActiveToolChanged(i),this.inputHandlers[e].second.restoreSelection()}else++e;if(t)return t}}return!1},t.prototype.drawPage=function(t,e,n){if(n){var i=this.getDocument();if(i){var o=n.pageRect;if(o){var r=n.getRotate(i.rotate);this.pageRenderService.draw(t,this,e,o,r,0===r)}}}},t.prototype.updateLayoutRect=function(){if(this.layoutRect=s.e.rect(0,0,this.size.width,this.size.height),this.layout){var t=this.layoutRect.getSize();this.layout.resizeView(t)}},t.prototype.drawLayout=function(t,e){this.layout&&this.layout.draw&&this.layout.draw(t,this.viewState,e)},t.prototype.renderWrapper=function(t,e,n){t.pushState();var i=this.document.getPage(e),o=s.e.point(i.virtualLeft,i.virtualTop);t.translateCTM(o.x,o.y);var r=this.getLayoutOffset();t.translateCTM(r.x,r.y);var a=i.getPageToDevSpaceMatrix(this.getZoom(),this.getPagesRotation());t.concatCTM(a),n(),t.popState()},t.prototype.getLayoutOffset=function(){var t=s.e.point();if(this.layout.getOffset){var e=this.layout.getOffset();t.offset(-e.x,-e.y)}return t},t.prototype.getPagesRotation=function(){return this.document.rotate},t.prototype.handleUnhandledTap=function(t,e){},t.prototype.focusField=function(t,e,n){for(var i=0;i<this.inputHandlers.length;i++){var o=this.inputHandlers[i].second;if(o&&o.focusField&&o.focusField(t,e,n))break}return!0},t.prototype._matrixDecompose=function(t){var e={scaling:s.e.size(),rotation:0,shear:0,position:s.e.point()};e.scaling.width=Math.sqrt(t.a*t.a+t.b*t.b);var n=t.b/e.scaling.width,i=t.a/e.scaling.width;return e.rotation=Math.atan2(n,i),e.scaling.height=t.d*i-t.c*n,e.shear=(t.c+t.d-e.scaling.height*(i-n))/e.scaling.height*(i+n),e.position.x=t.e,e.position.y=t.f,e},t}()},"Vz+2":function(t,e,n){"use strict";var i=n("21MZ"),o=n("exf4"),r=function(){function t(t,e,n,i){this.defaultSize=t,this.documentView=e,this.frameBrush=n,this.fillBrush=i,this.tracking_=!1,this.pageIndex_=-1,this.startPoint_={x:0,y:0},this.currentPoint_={x:0,y:0},this.forceUpdatethis=!1}return t.prototype.reset=function(){this.tracking_=!1,this.pageIndex_=-1,this.startPoint_={x:0,y:0},this.currentPoint_={x:0,y:0},this.forceUpdatethis=!1},t.prototype.getTracking=function(){return this.tracking_},t.prototype.getRect=function(){var t=[];t[0]=Math.min(this.startPoint_.x,this.currentPoint_.x),t[1]=Math.max(this.startPoint_.y,this.currentPoint_.y),t[2]=Math.max(this.startPoint_.x,this.currentPoint_.x),t[3]=Math.min(this.startPoint_.y,this.currentPoint_.y);var e=o.e.rect(t[0],t[1],t[2],t[3]),n=this.documentView.mapRectToDevice(this.pageIndex_,e),i=e.leftBottom(),r=e.getSize(),s=o.e.rect(0,r.height,r.width,0);if(n.getWidth()<5||n.getHeight()<5){var a=this.documentView.document,c=a.getPage(this.pageIndex_),u=o.e.rect(-this.defaultSize.width,this.defaultSize.height,0,0),l=c.getRotate(a.rotate);u=o.e.rotationMatrix(o.e.degreeToRadian(l)).mapRect(u),(s=o.e.unionRects(s,u)).offset(i.x,i.y)}else s.offset(i.x,i.y);return s},t.prototype.getPageIndex=function(){return this.pageIndex_},t.prototype.onMouseDown=function(t){var e=this.documentView.getPageAtPoint(t);if(e<0&&(e=0),-1!=e){var n=this.documentView.mapPointToPage(e,t);return this.pageIndex_=e,this.startPoint_=n,this.currentPoint_=n,this.tracking_=!0,!0}return!1},t.prototype.onMouseUp=function(t){if(this.tracking_){var e=this.documentView.mapPointToPage(this.pageIndex_,t);this.currentPoint_=e,this.tracking_=!1,this.forceUpdatethis=!0;var n=this.documentView.document.getPage(this.getPageIndex());if(!n)return!1;var i=n.rect.copy();return!!i&&(this.crop(this.currentPoint_,i),this.crop(this.startPoint_,i),this.validate(this.startPoint_,this.currentPoint_))}return!1},t.prototype.onMouseMove=function(t){if(this.tracking_){var e=this.documentView.mapPointToPage(this.pageIndex_,t);this.currentPoint_=e,this.getRect().isAreaEmpty()||this.documentView.invalidate()}else{var n=this.documentView.getPageAtPoint(t);if(-1==n)return this.pageIndex_=-1,this.documentView.invalidate(),!1;e=this.documentView.mapPointToPage(n,t),this.pageIndex_!=n&&(this.pageIndex_=n,this.forceUpdatethis=!0),this.forceUpdatethis&&(this.forceUpdatethis=!1),this.startPoint_=e,this.currentPoint_=e,this.documentView.invalidate()}return!0},t.prototype.draw=function(t,e){if(!this.tracking_&&e===this.pageIndex_){var n=this.getRect();i.b.drawFrame(t,o.e.quadFromRect(n),this.fillBrush,this.fillBrush)}},t.prototype.dispose=function(){this.reset()},t.prototype.validate=function(t,e){return!(!t||!e)&&t.x!==e.x&&t.y!==e.y},t.prototype.crop=function(t,e){t&&e&&(t.x<0&&(t.x=0),t.x>e.right&&(t.x=e.right),t.y<0&&(t.y=0),t.y>e.top&&(t.y=e.top))},t}(),s=function(){function t(t,e){this.documentView=t,this.brush=e,this.m_Path=[],this.m_PageIndex=-1,this.drawing_=!1}return t.prototype.draw=function(t,e){if(!this.drawing_&&t&&e===this.m_PageIndex){var n=this.createGeometry(this.getPath());if(!n)return;t.fillGeometry(n,this.brush)}},t.prototype.addPointToPath=function(t){this.m_Path.push(t)},t.prototype.clearPath=function(){this.m_Path=[]},t.prototype.getPath=function(){return this.m_Path},t.prototype.getPageIndex=function(){return this.m_PageIndex},t.prototype.getDrawing=function(){return this.drawing_},t.prototype.setPageIndex=function(t){this.m_PageIndex=t},t.prototype.onMouseDown=function(t){return this.drawing_=!0,!0},t.prototype.onMouseUp=function(t){this.drawing_=!1;var e=this.documentView.document.getPage(this.getPageIndex());if(!e)return!1;var n=e.rect.copy();if(!n)return!1;var i=this.getPath();return!(!i||i.length<1||(this.closePath(i),this.crop(i,n),!this.validate(i)))},t.prototype.validate=function(t){var e=t[0];return!t.every(function(t){return t.x===e.x})&&!t.every(function(t){return t.y===e.y})},t.prototype.createGeometry=function(t){if(t){var e;if(t.length>0&&(e=new i.a)){for(var n=0;n<t.length;n++){var o=t[n];0!=n?e.lineTo(o):e.beginFigure(o)}e.endFigure()}return e}},t.prototype.crop=function(t,e){if(t&&e)for(var n=0;n<t.length;n++){var i=t[n];i&&this.crop_(i,e)}},t.prototype.crop_=function(t,e){t&&e&&(t.x<0&&(t.x=0),t.x>e.right&&(t.x=e.right),t.y<0&&(t.y=0),t.y>e.top&&(t.y=e.top))},t.prototype.closePath=function(t){if(t){var e=t[0];e&&t.push(e)}},t}(),a=function(){function t(){}return t.prototype.mouseDown=function(t){return!1},t.prototype.mouseUp=function(t){return!1},t.prototype.mouseMove=function(t){return!1},t.prototype.getPageRange=function(){return{startPage:-1,endPage:-1}},t.prototype.getQuads=function(t){return[]},t.prototype.reset=function(){return[]},t.hitTestChar=function(t,e){return!1},t}(),c=function(){function t(t,e){this.type=t,this.brush=e,this.m_Finished=!0,this.m_isLineFinished=!1,this.m_PageIndex=null,this.m_BeginSelection=o.e.point(),this.m_EndSelection0=o.e.point(),this.m_EndSelection=o.e.point(),this.m_SelectionRect=o.e.rect(),this.m_LineWidth=0,this.m_points=[],this.m_Type=this.type}return Object.defineProperty(t.prototype,"isLineFinished",{get:function(){return this.m_isLineFinished},set:function(t){this.m_isLineFinished=t},enumerable:!0,configurable:!0}),t.prototype.getPath=function(){return this.m_points},t.prototype.addPointToPath=function(t){this.m_points.push(t)},t.prototype.draw=function(t,e){if(t&&e===this.m_PageIndex){var n=this.createGeometry(this.getPath());if(!n)return;t.fillGeometry(n,this.brush)}},t.prototype.onMouseUp=function(t){},t.prototype.isFinished=function(){return this.m_Finished},t.prototype.beginSelection=function(t){this.m_BeginSelection=t.copy(),this.m_EndSelection=t.copy(),this.m_EndSelection0=t.copy(),this.m_Finished=!1},t.prototype.endSelection0=function(t,e){this.m_EndSelection0=t.copy()},t.prototype.endSelection=function(t){this.moveSelection(t),this.m_Finished=!0,this.m_SelectionRect.isAreaEmpty()&&this.m_SelectionRect.inflate(.001,.001)},t.prototype.moveSelection=function(t){var e=t.copy();this.m_EndSelection=e,this.m_isLineFinished||(this.m_EndSelection0=e),this.m_SelectionRect=o.e.rect(Math.min(this.m_BeginSelection.x,this.m_EndSelection.x),Math.min(this.m_BeginSelection.y,this.m_EndSelection.y),Math.max(this.m_EndSelection.x,this.m_BeginSelection.x),Math.max(this.m_EndSelection.y,this.m_BeginSelection.y))},t.prototype.getRect=function(){return this.m_SelectionRect.copy()},t.prototype.setRect=function(t,e,n,i){this.m_SelectionRect=o.e.rect(t,e,n,i)},t.prototype.isAreaEmpty=function(){return this.m_BeginSelection.isEqual(this.m_EndSelection0)},t.prototype.getStartPoint=function(){return this.m_BeginSelection.copy()},t.prototype.getEndPoint0=function(){return this.m_EndSelection0.copy()},t.prototype.getEndPoint=function(){return this.m_EndSelection.copy()},t.prototype.getWidth=function(){return this.m_LineWidth},t.prototype.getPageIndex=function(){return this.m_PageIndex},t.prototype.setPageIndex=function(t){this.m_PageIndex=t},t.prototype.getType=function(){return this.m_Type},t.prototype.isCircleOrSquare=function(){return this.m_Type===o.d.shapesEnum.rectangle||this.m_Type===o.d.shapesEnum.oval},t.prototype.isLine=function(){return this.m_Type===o.d.measurementsEnum.distance},t.prototype.isPolygon=function(){return this.m_Type===o.d.measurementsEnum.area},t.prototype.isPolyline=function(){return this.m_Type===o.d.measurementsEnum.perimeter},t.prototype.reset=function(){this.m_PageIndex=null,this.m_BeginSelection=o.e.point(),this.m_EndSelection=o.e.point(),this.m_SelectionRect=o.e.rect(),this.m_EndSelection0=o.e.point()},t.prototype.swapStartAndEnd=function(){this.m_EndSelection0=[this.m_BeginSelection.copy(),this.m_BeginSelection=this.m_EndSelection0.copy()][0],this.m_EndSelection=this.m_EndSelection0.copy()},t.prototype.createGeometry=function(t){var e;if(t.length>0&&(e=new i.a)){for(var n=0;n<t.length;n++){var o=t[n];0!=n?e.lineTo(o):e.beginFigure(o)}e.endFigure()}return e},t}();n.d(e,"a",function(){return r}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"c",function(){return c})},Y8xn:function(t,e,n){"use strict";var i=n("exf4"),o=function(){function t(){}return t.createInstance=function(t,e,n){return{}},t.isEqual=function(t,e){return t&&e&&t.getType()===e.getType()&&(t===e||t.isEqual&&t.isEqual(e))},t.isAnnotObject=function(t){return t&&t.getType()===i.d.AnnotObjType.Annot},t}();n.d(e,"a",function(){return o})},YTF9:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}()},c5EE:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("exf4"),o=function(){return function(t,e){this.type=t,this.data=e}}(),r=function(){function t(){this.mBound=i.e.rect(),this.mEmpty=!0}return t.prototype.beginFigure=function(t){this.updateWithPoint(t)},t.prototype.endFigure=function(t){},t.prototype.endFigureClose=function(t){},t.prototype.lineTo=function(t){this.updateWithPoint(t)},t.prototype.curveTo=function(t,e,n){this.updateWithPoint(t),this.updateWithPoint(e),this.updateWithPoint(n)},t.prototype.getRectangle=function(){return this.mBound.copy()},t.prototype.updateWithPoint=function(t){this.mEmpty?(this.mBound=i.e.rect(t.x,t.y,t.x,t.y),this.mEmpty=!1):this.mBound.extend(t)},t}(),s=function(){function t(t,e){this.type=t,this.data=e,this.paths=[],this.fillRule=i.d.pdfClipRule.nonzero,this.mBoundCalculator=new r}return t.prototype.beginFigure=function(t){this.paths.push(new o(i.d.pdfClipPath.moveTo,t?t.copy():i.e.point())),this.mBoundCalculator.beginFigure(t)},t.prototype.lineTo=function(t){this.paths.push(new o(i.d.pdfClipPath.lineTo,t?t.copy():i.e.point())),this.mBoundCalculator.lineTo(t)},t.prototype.curveTo=function(t,e,n){if(n)this.paths.push(new o(i.d.pdfClipPath.curve,[t?t.copy():i.e.point(),e?e.copy():i.e.point(),n?n.copy():i.e.point()])),this.mBoundCalculator.curveTo(t,e,n);else{var r=this.getLastPoint();this.curveTo(r,t,e)}},t.prototype.conicCurveTo=function(t,e){t&&e&&this.curveTo(t,e)},t.prototype.rectangle=function(t){if(t){var e=t.copy();this.beginFigure(e.getOrigin()),this.lineTo(i.e.point(e.right,e.top)),this.lineTo(i.e.point(e.right,e.bottom)),this.lineTo(i.e.point(e.left,e.bottom)),this.endFigureClose()}},t.prototype.ellipse=function(t){if(t&&!t.isAreaEmpty()){var e=t.getOrigin(),n=.5*t.getWidth(),o=.5*t.getHeight(),r=e.x+n,s=e.y+o,a=.5522847498*n,c=.5522847498*o,u=r-a,l=s-c,h=r+a,p=s+c,d=r-n,f=s-o,g=r+n,m=s+o;this.beginFigure(i.e.point(r,m)),this.curveTo(i.e.point(u,m),i.e.point(d,p),i.e.point(d,s)),this.curveTo(i.e.point(d,l),i.e.point(u,f),i.e.point(r,f)),this.curveTo(i.e.point(h,f),i.e.point(g,l),i.e.point(g,s)),this.curveTo(i.e.point(g,p),i.e.point(h,m),i.e.point(r,m)),this.endFigureClose()}},t.prototype.endFigureClose=function(){this.paths.push(new o(i.d.pdfClipPath.close,null)),this.mBoundCalculator.endFigureClose()},t.prototype.endFigure=function(){this.mBoundCalculator.endFigure()},t.prototype.getPaths=function(){return this.paths},t.prototype.setFillRule=function(t){this.fillRule=t},t.prototype.getFillRule=function(){return this.fillRule},t.prototype.isEmpty=function(){return 0===this.paths.length},t.prototype.getBound=function(t){var e=t||i.e.identityMatrix(),n=i.e.rect();return this.isEmpty()||(n=this.mBoundCalculator.getRectangle()),e.mapRect(n)},t.prototype.transform=function(e){var n=function(t){var e=i.e.point(parseInt(t.x),parseInt(t.y));return e.offset(.5,.5),e};e=e||i.e.identityMatrix();for(var o=new t,r=0,s=this.paths.length;r<s;++r){var a=this.paths[r];if(a)switch(a.type){case i.d.pdfClipPath.moveTo:var c=a.data.copy();e&&(c=n(c=e.mapPoint(c))),o.beginFigure(c);break;case i.d.pdfClipPath.lineTo:c=a.data.copy(),e&&(c=n(c=e.mapPoint(c))),o.lineTo(c);break;case i.d.pdfClipPath.curve:var u=a.data[0].copy();e&&(u=n(u=e.mapPoint(u)));var l=a.data[1].copy();e&&(l=n(l=e.mapPoint(l)));var h=a.data[2].copy();e&&(h=n(h=e.mapPoint(h))),o.curveTo(u,l,h);break;case i.d.pdfClipPath.close:o.endFigureClose()}}return o},t.prototype.getLastPoint=function(){var t=null;if(this.paths.length>0){var e=this.paths[this.paths.length-1];e&&e.data&&(t=e.data instanceof Array&&e.data.length>0?e.data[e.data.length-1]:e.data)}return t?t.copy():i.e.point()},t}()},dwNZ:function(t,e,n){"use strict";var i=n("exf4"),o=n("TQCd"),r=n("CZDQ"),s=function(){var t=null,e=i.f.LookAndFeel.TextTransformerHighlightColor;this.init=function(e,n){t=n},this.getType=function(){return i.h.TextEditHighlight},this.getSelectionData=function(){return t},this.drawHighlight=function(n,i){var s=t.getPosition();s&&i==s.getPageIndex()&&function(n){var i=t.getPosition(),s=i.getTextBlock(),a=i.getPageIndex(),c=t.getDoc(),u=r.a.createInstance(c,a,s).getBounds();o.a.drawFrame(n,u,null,e)}(n)},this.draw=function(t,e){},this.hitTest=function(t,e){return!1},this.getDestination=function(){var e={},n=t.getPosition();e.pPageIndex=n.getPageIndex();var i=n.getQuad();return e.pRect=i.getBound(),e}},a=function(){var t=null,e=null,n=i.f.LookAndFeel.SnapLinesColor;this.init=function(n,i){t=n,(e=i)&&e.getTextBlockTransformer().getBounds()},this.getType=function(){return i.h.TextEdit},this.getSelectionData=function(){return e},this.draw=function(r,s){if(e){var a=e.getSelectedRange();a&&(a.begin.getPageIndex(),a.end.getPageIndex(),e.draw(r,s),function(r,s){var a=e.getTextBlockTransformer(),c=a.getAllActionButtons();if(s==a.getPageIndex()){var u=void 0;if(a.isPerformingOperation()){var l=a.getBounds();o.a.drawFrame(r,l,null,"#FFFFFF",[10]),u=a.getOperationBounds();var h=i.e.quadFromRect(a.getSnapOperationBounds().getBound());o.a.drawFrame(r,h,null,n);var p=a.getSnapInfo();p&&o.a.drawSnapInfo(r,p,n)}else u=a.getBounds();o.a.drawFrame(r,u,null,"#FFFFFF",a.isPerformingOperation()?null:i.f.LookAndFeel.TransformerDashes);var d=i.f.LookAndFeel.TransformerAnchorRadius;if(a.isPerformingOperation()){var f=u.getCenter(),g=i.f.LookAndFeel.TransformerOriginRadius;switch(a.getOperationType()){case i.d.TransformType.TRANSFORM_MOVE:break;default:o.a.drawOrigin(r,"#bedafa","#FFFFFF",f,d,g)}}else{if(a.hasAnyCurrentEditMode(i.d.EditModes.Resize|i.d.EditModes.Rotate)&&o.a.drawMarker(r,"#bedafa","#FFFFFF",u.top_left(),d),a.hasAnyCurrentEditMode(i.d.EditModes.Move|i.d.EditModes.Resize|i.d.EditModes.Rotate)&&o.a.drawMarker(r,"#bedafa","#FFFFFF",u.top_right(),d),a.hasAnyCurrentEditMode(i.d.EditModes.Resize|i.d.EditModes.Rotate)&&(o.a.drawMarker(r,"#bedafa","#FFFFFF",u.bottom_right(),d),o.a.drawMarker(r,"#bedafa","#FFFFFF",u.bottom_left(),d)),a.hasAnyCurrentEditMode(i.d.EditModes.Rotate)&&(o.a.drawLine(r,a.getRotateAnchor(t),u.top_center(),"#FFFFFF",i.f.LookAndFeel.TransformerDashes),o.a.drawMarker(r,"#bedafa","#FFFFFF",a.getRotateAnchor(t),d)),c)for(var m in c)if(c.hasOwnProperty(m)){var v=c[m];v&&o.a.drawMarker(r,v.fillColor,"#FFFFFF",v.getPosition(),v.anchorRadius,v)}var y=t.mapRectToDevice(s,u.getBound()),b=i.e.quadFromRect(y),P=i.f.LookAndFeel.TransformerScaleZoneRadius;a.hasAnyCurrentEditMode(i.d.EditModes.Resize|i.d.EditModes.Rotate)&&i.e.pointsDistance(b.center_right(),b.center_left())>=3*P&&(o.a.drawMarker(r,"#bedafa","#FFFFFF",u.top_center(),d),o.a.drawMarker(r,"#bedafa","#FFFFFF",u.bottom_center(),d)),a.hasAnyCurrentEditMode(i.d.EditModes.Resize|i.d.EditModes.Rotate)&&i.e.pointsDistance(b.top_center(),b.bottom_center())>=3*P&&(o.a.drawMarker(r,"#bedafa","#FFFFFF",u.center_right(),d),o.a.drawMarker(r,"#bedafa","#FFFFFF",u.center_left(),d));var _=2*i.f.LookAndFeel.TransformerDeleteZoneRadius/t.getZoom()/(96/72),w=r.createFontFace("icomoon",i.d.GFontStyle.kGFontStyleRegular,_);f=a.getDeleteAnchor(t,-i.f.LookAndFeel.TransformerDeleteZoneRadius/2-2,-i.f.LookAndFeel.TransformerDeleteZoneRadius/2-4),r.pushState(),r.translateCTM(f.x,f.y);var x=a.getRotation_PropertyTest();x&&r.rotateCTM(x),r.multiplyTransform(i.e.reflectYMatrix()),r.fillText(w,"","#FFFFFF"),r.popState()}}}(r,s))}},this.getProperties=function(){},this.hitTest=function(t,e){return!1},this.getDestination=function(){var t={},n=e.getPosition();t.pPageIndex=n.getPageIndex();var i=n.getQuad();return t.pRect=i.getBound(),t}};e.a={createTextEditSelection:function(){return new a},createTextEditHighlightSelection:function(){return new s}}},eNWM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},iF9q:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i={kPDR_Empty:0,kPDR_WheelHandlingEnabled:1,kPDR_IsDrawingNow:2,kPDR_IsInitiallyUpdated:4,kPDR_IsVisible:8,kPDR_IsCaretVisible:16,kPDR_IsTooltipVisible:32,kPDR_IsTooltipPending:64,kPDR_LeftButtonPressed:128}},jBVA:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},jbAs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){}}()},jkSe:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("6okS"),o=n("exf4"),r=(n("In1z"),n("LDQ/")),s=function(){function t(t,e){this.cache=t,this.progressringService=e,this.MAX_CACHE_CAPACITY=50,this.MAX_CATCHES_COUNT=10,this.PROGRESS_RING_COLOR="#0072C6",this.PROGRESS_RING_MIN_WIDTH=80,this.PROGRESS_RING_MIN_HEIGHT=80,this.catches=0,this.queue={},this.cacheKeys=[],this.salt=i.k(),this.removeAllCache()}return t.prototype.draw=function(t,e,n,o,r,s){if(e){var a=this.getCachedData(e,n);if(a){var c=a.img;if(i.d(c))for(var u=0;u<c.length;u++){var l=c[u];l&&(l.img?this.drawImage(l.img,t,a.size,a.drawProgressRing,e,o,r,s):l.color&&this.drawLayer(e,l.color+(l.opacity||""),t,o))}}else{if(this.catches>this.MAX_CATCHES_COUNT)return;this.drawProgressRing(t,o),e.invalidate()}}},t.prototype.drawChess=function(t,e,n){var i=this;if(!this.chessPattern){var o=new Image;return o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAIAAADYhlU4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAxRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUFDNTFFQzE3NzE5MTFFOTg2NjNBMUEyNUVCNjEwNDIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUFDNTFFQzA3NzE5MTFFOTg2NjNBMUEyNUVCNjEwNDIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJBNzQ2Q0ZDOUVCNzRGOTVCNjk0REQzQzYyRjU1OEZCQSIgc3RSZWY6ZG9jdW1lbnRJRD0iQTc0NkNGQzlFQjc0Rjk1QjY5NEREM0M2MkY1NThGQkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5goTo9AAABFElEQVR42uxWMQ6FMAhV7KSzp/D+N/AWLk4ewJi4qP18+eETq4gmDiZlIEKABzV9NG3bdp7ndBXvfXImGLwsS2IQKoja5XleliVVR1tPw7C+7+u6pmSlNMejCRwqc/wq0mRt6UMCoHbSK3sJTenUkag6nxVQgpJj+UlHLQJ864M94YZQf5A8LxEjYrwPg+7WsxjE0ECssiEM9hxp6wQrl7hpmhDNyKmEkWWZnUswOG2aZhxHNBBT75HZlPaNneTdMAxd122qU74cjpdBURRVVSlDc9YfY/eIpQdPksrhB52vPkG49C5wu3Hhh+0+fgd/ezByScR4JcaNa3UZw05ttx+P17hk9wF+Cm/F4FV2OkEI/xFgAKcFyDe+aVvzAAAAAElFTkSuQmCC",void(o.onload=function(){i.chessPattern=t.getContext().createPattern(o,"repeat"),e.invalidate()})}t.getContext().fillStyle=this.chessPattern,t.getContext().fillRect(n.left,n.top,n.width,n.height)},t.prototype.drawImage=function(t,e,n,r,s,a,c,u){if(t){e.pushState(),e.clipRect(a),i.j(u)||e.setImageSmoothingEnabled(u);var l=n,h=a.copy();if(0===c)e.fillBitmap(o.e.rect(h.left,h.top,h.left+l.width,h.top+l.height),t);else{var p=e.getCTM(),d=h.getCenter();e.translateCTM(d.x,d.y),e.rotateCTM(o.e.degreeToRadian(c));var f=o.e.rect(0,0,l.width,l.height);f.offset(-o.e.castFloatToInt(l.width/2),-o.e.castFloatToInt(l.height/2)),e.fillBitmap(f,t),e.setCTM(p)}e.popState(),!0===r&&(this.drawProgressRing(e,a),s.invalidate())}},t.prototype.drawLayer=function(t,e,n,i){if(e){"transparent"===e?this.drawChess(n,t,i):n.fillRect(i,e);var o=i.copy();o.inflate(.5,.5),n.strokeRect(o,"#686868",.5)}},t.prototype.getCachedData=function(t,e){var n=t.getDocument(),r=n.getPage(e);if(!r)return null;var s,a=n.zoom,c={documentId:n.id,index:e,salt:this.salt},u=this.generateCacheId(c),l=a*(s=r.getPageToDevSpaceMatrix(1,0,0).mapRect(r.getPageBox())).min_x(),h=a*s.min_y();s=o.e.rect(l,h,l+a*s.getWidth(),l+a*s.getHeight()),s=o.e.adjustRect(s),c.pageSalt=r.salt,c.viewState=t.getViewState()&~o.d.pDPageRenderFlags.kPDPageRenderHighlightAnnots,c.zoom=a;var p=this.generateCacheOptions(c),d=this.getFromCache(u);if(d&&d.image&&i.f(p,d.cacheOptions,["zoom"])){var f=o.e.size(s.width,s.height);if(1===p.zoom){var g=d.image.find(function(t){return t.img});if(g){var m=g.img;m&&(f=o.e.size(m.width,m.height))}}return{img:d.image,size:f}}return this.putPageForRender(c,t),d&&d.image?{img:d.image,size:o.e.size(s.width,s.height),drawProgressRing:d.cacheOptions.pageSalt===c.pageSalt}:null},t.prototype.drawProgressRing=function(t,e){e.getWidth()<=this.PROGRESS_RING_MIN_WIDTH||e.getHeight()<=this.PROGRESS_RING_MIN_HEIGHT||this.progressringService.draw(t,e.getCenter(),this.PROGRESS_RING_COLOR)},t.prototype.updatePartOfImage=function(t,e,n,s){var a=this,c=t.getPage(e),u=new r.a;if(!c||!n)return u.reject(),u.promise;var l={documentId:t.id,index:e,salt:this.salt};l.rect=n.join(";"),l.pageSalt=c.salt,l.viewState=t.viewState&~o.d.pDPageRenderFlags.kPDPageRenderHighlightAnnots,l.zoom=t.zoom;var h=this.generateCacheOptions(l),p=this.generateCacheId(l),d=this.getFromCache(p);if(!d)return u.reject(),u.promise;if(d&&d.cacheOptions){if(d.cacheOptions.pageSalt!==s)return u.reject(),u.promise;d.cacheOptions.pageSalt=h.pageSalt}return this.download(l).then(function(t){return t.img&&d&&d.image&&d.cacheOptions&&i.f(d.cacheOptions,h,["zoom"])?a.combineImages(d.image,t.img,t.position):(u.reject(),u.promise)}).then(function(t){return t?(a.addToCache(p,{image:t,cacheOptions:h},l.documentId,l.index),u.resolve(!0),u.promise):(u.reject(),u.promise)}).catch(function(){d&&d.cacheOptions&&(d.cacheOptions.pageSalt=s)})},t.prototype.removeNotVisiblePagesFromCache=function(t){var e=t.getVisibleRange(),n=t.getDocument().id,i=e.startPage-0,o=e.endPage+0;this.removeOutdatedKeys(function(t){return t.docId===n&&(t.pageIndex<i||t.pageIndex>o)})},t.prototype.removeAllCache=function(){this.removeOutdatedKeys(function(t){return!0})},t.prototype.download=function(t,e){return t&&e?e.getLayers():new Promise(function(t,e){e("Bad Params")})},t.prototype.renderLoop=function(t,e){var n=this,r=this;setTimeout(function(){var s=n.queue[t.index.toString()];if(s&&i.f(s,t,["zoom"])){var a=e.getDocument().documentView===o.d.pdfDocumentView.flipper?4:0,c=e.getVisibleRange();if(t.index<c.startPage-a||t.index>c.endPage+a)delete n.queue[t.index.toString()];else{var u=n.generateCacheId(t),l=n.generateCacheOptions(t),h=n.getFromCache(u);h&&h.image&&i.f(l,h.cacheOptions,["zoom"])?delete n.queue[t.index.toString()]:n.download(t,e).then(function(n){r.updateRenderedPageCache(n.layers,t);var i=e.getDocument();i&&i.getPage(t.index),e&&e.invalidate(),r.catches=0}).catch(function(){delete n.queue[t.index.toString()],++n.catches<=n.MAX_CATCHES_COUNT&&e&&e.invalidate()})}}},100)},t.prototype.putPageForRender=function(t,e){if(t){var n=this.queue[t.index.toString()];n&&i.f(n,t,["zoom"])||(this.queue[t.index.toString()]=t,this.renderLoop(t,e))}},t.prototype.removeOutdatedKeys=function(t){var e=this.cacheKeys.filter(t);if(i.d(e))for(var n=0,o=e.length;n<o;n++){var r=e[n];r&&this.removeFromCache(r)}},t.prototype.combineImages=function(t,e,n){var i=new r.a;if(t&&e){n||(n=o.e.point());var s=document.createElement("canvas");s.width=t.width,s.height=t.height;var a=s.getContext("2d");a.drawImage(t,0,0),a.drawImage(e,n.x,n.y);var c=new Image;c.onload=function(){i.resolve(c)},c.src=s.toDataURL()}else i.reject();return i.promise},t.prototype.generateCacheId=function(t){return i.b({documentId:t.documentId,index:t.index,salt:t.salt})},t.prototype.generateCacheOptions=function(t){return{pageSalt:t.pageSalt,viewState:t.viewState,zoom:t.zoom}},t.prototype.getFromCache=function(t){var e=this.cacheKeys.filter(function(e){return e.key===t});if(i.d(e)&&e.length>0){var n=e[0],o=this.cacheKeys.indexOf(n);o>0&&(this.cacheKeys.splice(o,1),this.cacheKeys.splice(0,0,n))}return this.cache.get(t)},t.prototype.updateRenderedPageCache=function(t,e){if(e&&t){var n=this.queue[e.index.toString()];if(n&&i.f(e,n,["zoom"])){var o=this.generateCacheId(e),r=this.generateCacheOptions(e);delete this.queue[e.index.toString()],this.addToCache(o,{image:t,cacheOptions:r},e.documentId,e.index)}}},t.prototype.addToCache=function(t,e,n,i){for(void 0===this.cache.get(t)&&this.cacheKeys.splice(0,0,{key:t,docId:n,pageIndex:i}),this.cache.set(t,void 0===e?null:e);this.cacheKeys.length>this.MAX_CACHE_CAPACITY&&this.cacheKeys.length>0;)this.removeFromCache(this.cacheKeys[this.cacheKeys.length-1])},t.prototype.removeFromCache=function(t){this.cache.remove(t.key);var e=this.cacheKeys.indexOf(t);e>-1&&this.cacheKeys.splice(e,1)},t}()},jrl3:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("CcnG"),o=n("6okS"),r=function(){function t(){this.max=5,this.onSelect=new i.EventEmitter,this.onRemove=new i.EventEmitter,this.onEmpty=new i.EventEmitter}return Object.defineProperty(t.prototype,"images",{set:function(t){o.d(t)&&(t.length<1?this.onEmpty.emit():this.items=t.reverse().slice(0,this.max))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t}()},kzdD:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("6okS"),o=n("exf4"),r=function(){function t(){this.visiblePages=[],this.viewPos=o.e.point(),this.viewSize=o.e.size(),this.bandSize=o.e.size(),this.zoomType=o.d.pdfPageView.none,this.zoom=1,this.rotate=0,this.currentPage=0,this.visibleRange={startPage:-1,endPage:-1},this.callbacks=null,this.doc=null,this.view=null,this.dragPoint=o.e.point(),this.dragging=!1}return t.prototype.getOffset=function(){return this.viewPos.copy()},t.prototype.initialize=function(t){this.callbacks=t.layoutCallbacks,this.doc=t.document,this.view=t,this.zoomType=this.doc.pageView,this.zoom=1,this.rotate=0,this.currentPage=this.doc.pageSelectedIndex,this.onChanged()},t.prototype.zoomTo=function(t,e,n){var i=n?n.copy():o.e.rect(0,0,this.viewSize.width,this.viewSize.height).getCenter();return this.zoomType!==t&&(this.zoomType=t,this.updateState(i)),this.zoomType===o.d.pdfPageView.none&&(e<.1&&(e=.1),e>2&&(e=2),this.setZoomValue(e,i)),!0},t.prototype.setPagesRotation=function(t){if(this.rotate!==t){var e=this.currentPage;this.rotate=t,this.onChanged(!1),this.goToPageRect(e),this.callbacks&&this.callbacks.onRotateChanged&&this.callbacks.onRotateChanged(this.rotate)}},t.prototype.updatePages=function(){this.clearPageNodes(),this.updateLayout()},t.prototype.mapPointToPage=function(t,e){var n=o.e.point(0,0),r=this.doc.getPage(t);if(i.j(r))return n;var s=r.getPageToDevSpaceMatrix(this.zoom,this.rotate).invert();if(!i.j(s)){var a=o.e.point(e.x+this.viewPos.x,e.y+this.viewPos.y);r.position&&a.offset(-r.position.x,-r.position.y),n=s.mapPoint(a)}return n},t.prototype.mapRectToPage=function(t,e){var n=o.e.rect(),r=this.doc.getPage(t);if(i.j(r))return n;var s=r.getPageToDevSpaceMatrix(this.zoom,this.rotate).invert();if(!i.j(s)){var a=o.e.rect(e.left+this.viewPos.x-r.position.x,e.top+this.viewPos.y-r.position.y,e.right+this.viewPos.x-r.position.x,e.bottom+this.viewPos.y-r.position.y);n=s.mapRect(a)}return n},t.prototype.mapPointToDevice=function(t,e){var n=o.e.point(),i=this.doc.getPage(t);return i?((n=i.getPageToDevSpaceMatrix(this.zoom,this.rotate).mapPoint(e).floor()).offset(-this.viewPos.x,-this.viewPos.y),n.offset(i.position.x,i.position.y),n):n},t.prototype.mapRectToDevice=function(t,e){var n=o.e.rect(),r=this.doc.getPage(t);return i.j(r)?n:((n=r.getPageToDevSpaceMatrix(this.zoom,this.rotate).mapRect(e).round()).offset(-this.viewPos.x,-this.viewPos.y),n.offset(r.position.x,r.position.y),n)},t.prototype.goToPageRect=function(t,e,n){var r,s=this.doc.pages;if(t>=s.length||t<0)return null;if(i.j(n)&&(n=0),this.currentPage=t,this.callbacks&&this.callbacks.onFocusPageChanged(t),e?(r=this.mapRectToDevice(t,e)).offset(this.viewPos.x,this.viewPos.y):(r=s[t].pageRect.copy()).inflate(6,6),n&o.d.bLRectFlags.kBLRectDontScrollVisible&&o.e.rect(this.viewPos.x,this.viewPos.y,this.viewPos.x+this.viewSize.width,this.viewPos.y+this.viewSize.height).containsRect(r))return null;var a=r.left+(r.getWidth()-this.viewSize.width)/2,c=r.top+(r.getHeight()-this.viewSize.height)/2;return r.getWidth()>this.viewSize.width&&(a=n&o.d.bLRectFlags.kBLRectPreferRightOverLeft?r.right-this.viewSize.width:r.left),r.getHeight()>this.viewSize.height&&(c=n&o.d.bLRectFlags.kBLRectPreferBottomOverTop?r.bottom-this.viewSize.height:r.top),this.viewPos.x=o.e.castFloatToInt(a),this.viewPos.y=o.e.castFloatToInt(c),this.updatePagesVisibility(),this.updateScrolls(),o.e.point(a,c)},t.prototype.goToNextPage=function(){this.currentPage<this.doc.getPagesCount()-1&&this.goToPageRect(this.currentPage+1,null,0)},t.prototype.goToPrevPage=function(){this.currentPage>0&&this.goToPageRect(this.currentPage-1,null,0)},t.prototype.getPageAtPoint=function(t){for(var e=-1,n=this.doc.pages,i=o.e.point(this.viewPos.x+t.x,this.viewPos.y+t.y),r=0,s=n.length;r<s;++r)if(n[r].pageRect.containsPoint(i)){e=r;break}return e},t.prototype.resizeView=function(t){if(t&&!t.isEmpty()&&!t.isEqual(this.viewSize)&&(this.viewSize=t,this.doc)){var e=this.doc.getPage(this.currentPage).position.copy();e.offset(-this.viewPos.x,-this.viewPos.y),this.updateState(e),this.onChanged()}},t.prototype.getVisibleRange=function(){return{startPage:this.visibleRange.startPage,endPage:this.visibleRange.endPage}},t.prototype.getFocusPage=function(){return this.currentPage},t.prototype.setFocusPage=function(t){t<this.doc.getPagesCount()&&t>=0&&(this.currentPage=t,this.callbacks&&this.callbacks.onFocusPageChanged(t))},t.prototype.processScrollEvent=function(t,e,n){switch(e){case o.d.bLScrollEvent.kBLScrollHome:this.setScrollPos(t,this.getMinScrollPos(t));break;case o.d.bLScrollEvent.kBLScrollEnd:this.setScrollPos(t,this.getMaxScrollPos(t));break;case o.d.bLScrollEvent.kBLScrollStepPlus:this.setScrollPos(t,this.getScrollPos(t)+o.e.castFloatToInt(this.getScrollSize(t)/10))||this.callbacks&&this.callbacks.onNavigateToNextPage();break;case o.d.bLScrollEvent.kBLScrollStepMinus:this.setScrollPos(t,this.getScrollPos(t)-o.e.castFloatToInt(this.getScrollSize(t)/10))||this.callbacks&&this.callbacks.onNavigateToPrevPage();break;case o.d.bLScrollEvent.kBLScrollPagePlus:this.setScrollPos(t,this.getScrollPos(t)+this.getScrollSize(t));break;case o.d.bLScrollEvent.kBLScrollPageMinus:this.setScrollPos(t,this.getScrollPos(t)-this.getScrollSize(t));break;case o.d.bLScrollEvent.kBLScrollPos:case o.d.bLScrollEvent.kBLScrollSliderReleased:this.setScrollPos(t,n)}},t.prototype.pointerPressed=function(t){this.dragging||(this.dragPoint=o.e.point(this.viewPos.x+t.x,this.viewPos.y+t.y),this.dragging=!0)},t.prototype.pointerReleased=function(t){this.dragging=!1},t.prototype.pointerMoved=function(t){this.dragging&&(this.setScrollPos(o.d.bLScrollBarType.kBLScrollBarHorz,this.dragPoint.x-t.x),this.setScrollPos(o.d.bLScrollBarType.kBLScrollBarVert,this.dragPoint.y-t.y),this.dragPoint=o.e.point(this.viewPos.x+t.x,this.viewPos.y+t.y))},t.prototype.pointerWheel=function(t,e){for(var n=o.e.castFloatToInt(e);n>0;)this.processScrollEvent(o.d.bLScrollBarType.kBLScrollBarVert,o.d.bLScrollEvent.kBLScrollStepMinus,0),--n;for(;n<0;)this.processScrollEvent(o.d.bLScrollBarType.kBLScrollBarVert,o.d.bLScrollEvent.kBLScrollStepPlus,0),++n},t.prototype.draw=function(t,e,n){if(this.view){var i=this.viewPos.copy();t.translateCTM(-i.x,-i.y),this.view.defaultDraw(t,n)}},t.prototype.oCConfigChanged=function(){this.onChanged()},t.prototype.getVisiblePages=function(){return this.visiblePages},t.prototype.isUsingVisibleRangeNavigation=function(){return!1},t.prototype.dispose=function(){this.callbacks=null,this.doc=null,this.view=null},t.prototype.onChanged=function(t){i.j(t)&&(t=!0),this.updateLayout(),this.updatePagesVisibility(),t&&this.updateFocusPage(),this.updateScrolls()},t.prototype.updateLayout=function(){if(this.doc){for(var t=0,e=15,n=this.doc.pages,i=0,r=n.length;i<r;++i){var s=(h=n[i]).getPageToDevSpaceMatrix(this.zoom,this.rotate).mapRect(h.getPageBox()).floor().getSize(),a=s.width,c=s.height;h.position=o.e.point(0,e).floor(),h.pageRect=o.e.rect(h.position.x,h.position.y,h.position.x+a,h.position.y+c).floor(),t=Math.max(t,a+12),e+=c+15}t=Math.max(t,this.viewSize.width);var u=0;e<this.viewSize.height&&(u=(this.viewSize.height-e)/2);var l=0;for(r=n.length;l<r;++l){var h;(h=n[l]).position.x=(t-(a=h.pageRect.width))/2,h.position.y+=u,h.position=h.position.floor(),h.pageRect.offset(h.position.x,u),h.pageRect=h.pageRect.floor(),h.virtualLeft=o.e.castFloatToInt(h.pageRect.left),h.virtualTop=o.e.castFloatToInt(h.pageRect.top)}this.bandSize=o.e.size(Math.max(this.viewSize.width,t),Math.max(this.viewSize.height,e)).floor()}},t.prototype.updatePagesVisibility=function(){if(this.doc){if(this.bandSize.width<this.viewSize.width)this.viewPos.x=o.e.castFloatToInt((this.bandSize.width-this.viewSize.width)/2);else{var t=this.getMinScrollPos(o.d.bLScrollBarType.kBLScrollBarHorz),e=this.getMaxScrollPos(o.d.bLScrollBarType.kBLScrollBarHorz);this.viewPos.x=Math.min(Math.max(this.viewPos.x,t),e)}this.bandSize.height<this.viewSize.height?this.viewPos.y=(this.bandSize.height-this.viewSize.height)/2:(t=this.getMinScrollPos(o.d.bLScrollBarType.kBLScrollBarVert),e=this.getMaxScrollPos(o.d.bLScrollBarType.kBLScrollBarVert),this.viewPos.y=o.e.castFloatToInt(Math.min(Math.max(this.viewPos.y,t),e)));for(var n=o.e.rect(this.viewPos.x,this.viewPos.y,this.viewPos.x+this.viewSize.width,this.viewPos.y+this.viewSize.height),r=this.doc.pages,s={startPage:Number.MAX_VALUE,endPage:0},a=0,c=r.length;a<c;++a)n.hasIntersection(r[a].pageRect)&&(s.startPage=Math.min(s.startPage,a),s.endPage=Math.max(s.endPage,a));this.visiblePages=i.m(r,s.startPage,s.endPage+1),s.startPage===this.visibleRange.startPage&&s.endPage===this.visibleRange.endPage||(this.visibleRange=s,this.visibleRange.startPage!==Number.MAX_VALUE&&this.callbacks&&this.callbacks.onVisibleRangeChanged(this.visibleRange.startPage,this.visibleRange.endPage)),this.callbacks&&this.callbacks.onDrawUpdated()}},t.prototype.updateFocusPage=function(){for(var t=o.e.rect(this.viewPos.x,this.viewPos.y,this.viewPos.x+this.viewSize.width,this.viewPos.y+this.viewSize.height),e=0,n=0,i=this.visiblePages,r=0,s=this.visiblePages.length;r<s;++r){var a=i[r].pageRect;if(t.hasIntersection(a)){var c=o.e.intersectRects(t,a).getArea();c>n&&(n=c,e=i[r].index)}}e!==this.currentPage&&(this.currentPage=e,this.callbacks&&this.callbacks.onFocusPageChanged(this.currentPage))},t.prototype.clearPageNodes=function(){},t.prototype.setZoomValue=function(t,e){if(this.zoom!==t){var n=this.currentPage,i=this.mapPointToPage(n,e);this.zoom=o.g.floorZoom(Math.min(Math.max(t,.1),2)),this.updateLayout();var r=this.mapPointToDevice(n,i);this.viewPos.offset(r.x,r.y),this.viewPos.offset(-e.x,-e.y),this.updatePagesVisibility(),this.updateFocusPage(),this.updateScrolls()}this.callbacks&&this.callbacks.onChangeState(this.zoomType,this.zoom,this.getOffset(),this.bandSize,this.viewSize)},t.prototype.updateState=function(t){if(this.zoomType!==o.d.pdfPageView.none&&!this.viewSize.isAreaEmpty()&&this.doc){for(var e=0,n=0,i=this.doc.pages,r=0,s=i.length;r<s;r++){var a=i[r].getDevSpacePageBox(1,this.rotate).getSize(),c=a.width;e<c&&(e=c);var u=a.height;n<u&&(n=u)}var l=(this.viewSize.width-12-2)/e,h=(this.viewSize.height-30-2)/n;switch(this.zoomType){case o.d.pdfPageView.fitPage:this.setZoomValue(Math.min(l,h),t);break;case o.d.pdfPageView.fitWidth:this.setZoomValue(l,t);break;case o.d.pdfPageView.kBLZoomFitHeight:this.setZoomValue(h,t)}}},t.prototype.updateScrolls=function(){this.callbacks&&(this.bandSize.width>this.viewSize.width?(this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarHorz,!0),this.callbacks.onScrollRangeChanged(o.d.bLScrollBarType.kBLScrollBarHorz,this.bandSize.width),this.callbacks.onScrollSizeChanged(o.d.bLScrollBarType.kBLScrollBarHorz,this.viewSize.width),this.callbacks.onScrollPositionChanged(o.d.bLScrollBarType.kBLScrollBarHorz,this.viewPos.x),this.callbacks.onScrollChanged(o.d.bLScrollBarType.kBLScrollBarHorz,{pos:this.viewPos.x,size:this.viewSize.width,range:this.bandSize.width})):this.zoomType===o.d.bLZoomType.kBLZoomFitHeight?(this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarHorz,!0),this.callbacks.onScrollRangeChanged(o.d.bLScrollBarType.kBLScrollBarHorz,1),this.callbacks.onScrollSizeChanged(o.d.bLScrollBarType.kBLScrollBarHorz,1),this.callbacks.onScrollPositionChanged(o.d.bLScrollBarType.kBLScrollBarHorz,0)):this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarHorz,!1),this.bandSize.height>this.viewSize.height?(this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarVert,!0),this.callbacks.onScrollRangeChanged(o.d.bLScrollBarType.kBLScrollBarVert,this.bandSize.height),this.callbacks.onScrollSizeChanged(o.d.bLScrollBarType.kBLScrollBarVert,this.viewSize.height),this.callbacks.onScrollPositionChanged(o.d.bLScrollBarType.kBLScrollBarVert,this.viewPos.y),this.callbacks.onScrollChanged(o.d.bLScrollBarType.kBLScrollBarVert,{pos:this.viewPos.y,size:this.viewSize.height,range:this.bandSize.height})):this.zoomType===o.d.bLZoomType.kBLZoomFitWidth?(this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarVert,!0),this.callbacks.onScrollRangeChanged(o.d.bLScrollBarType.kBLScrollBarVert,1),this.callbacks.onScrollSizeChanged(o.d.bLScrollBarType.kBLScrollBarVert,1),this.callbacks.onScrollPositionChanged(o.d.bLScrollBarType.kBLScrollBarVert,0)):this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarVert,!1))},t.prototype.getMinScrollPos=function(t){return 0},t.prototype.getMaxScrollPos=function(t){return t===o.d.bLScrollBarType.kBLScrollBarHorz?this.bandSize.width<this.viewSize.width?0:this.bandSize.width-this.viewSize.width:this.bandSize.height<this.viewSize.height?0:this.bandSize.height-this.viewSize.height},t.prototype.getScrollSize=function(t){return t===o.d.bLScrollBarType.kBLScrollBarHorz?this.viewSize.width:this.viewSize.height},t.prototype.getScrollPos=function(t){return t===o.d.bLScrollBarType.kBLScrollBarHorz?this.viewPos.x:this.viewPos.y},t.prototype.forceSetScrollPos=function(t,e){t===o.d.bLScrollBarType.kBLScrollBarHorz?this.viewPos.x=e:this.viewPos.y=e},t.prototype.setScrollPos=function(t,e){var n=this.getMinScrollPos(t),i=this.getMaxScrollPos(t),o=Math.min(Math.max(e,n),i);return o!==this.getScrollPos(t)&&(this.forceSetScrollPos(t,o),this.updatePagesVisibility(),this.updateFocusPage(),this.callbacks&&this.callbacks.onScrollPositionChanged(t,o),!0)},t}()},llPn:function(t,e,n){"use strict";n("SdWe"),n.d(e,"a",function(){return i});var i=function(){return function(){}}()},mzcx:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n("6okS"),o=n("exf4"),r=n("ukOs"),s=n("J9nD"),a=n("K+iD"),c=function(t){return t.type==o.d.pdfAnnotationType.link},u=function(t){return t.type!=o.d.pdfAnnotationType.link&&t.type!=o.d.pdfAnnotationType.widget&&t.type!=o.d.pdfAnnotationType.unknown},l=function(t){return t.type==o.d.pdfAnnotationType.widget&&!i.j(t.acroform)},h=function(t){return t.type==o.d.pdfAnnotationType.widget&&!i.j(t.acroform)&&"Sig"===t.acroform.type},p=function(t,e){if(t&&(t=t.filter(function(t){return e(t)})).length>0)return t},d=function(t,e){if(t)for(var n=0;n<t.length;n++)if(!0===e(t[n]))return!0;return!1},f=function(){function t(t){this.options=t,this.rect=null,this.rotate=this.options.rotate?this.options.rotate:0,this.isLoaded=!1,this.thumbnail={widthPx:0,heightPx:0,zoom:0},this.userUnit=this.options.unit?this.options.unit:1,this.layers_=null,this._id=null,this._salt=null,this._annotations=this.options.annotations,this._signatures=this.options.signatures}return t.createInstanceCollection=function(e){for(var n=new Array(e.n),i=0;i<e.p.length;++i)for(var o=e.p[i],r=0;r<o.R.length;++r)for(var c=new s.a(o.R[r]),u=c.index;u<=c.length;++u){var l=new t({rotate:o.r,unit:o.u});l.setPageRect(new a.a(o.B)),l.setLayers(o.layers),l.isLoaded=!0,n[u]=l}return n},Object.defineProperty(t.prototype,"id",{get:function(){return null==this._id&&(this._id=i.k()),this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"salt",{get:function(){return this._salt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"annotations",{get:function(){return null!=this._annotations?i.m(this._annotations):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"signatures",{get:function(){return null!=this._signatures?i.m(this._signatures):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textBlocks",{get:function(){var t=r.a.blocks;return null!=t?i.m(t):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){var t=r.a.contents;return null!=t?i.m(t):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unsafecontent",{get:function(){var t=r.a.contents;return null!=t?i.m(t):[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasLinkAnnotations",{get:function(){return d(this._annotations,c)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCommentAnnotations",{get:function(){return d(this._annotations,u)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasWidgetAnnotations",{get:function(){return d(this._annotations,l)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasSignatureAnnotations",{get:function(){return d(this._annotations,h)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkAnnotations",{get:function(){return p(this.annotations,c)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commentAnnotations",{get:function(){return p(this.annotations,u)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widgetAnnotations",{get:function(){return p(this.annotations,l)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"signatureAnnotations",{get:function(){return p(this.annotations,h)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layers",{get:function(){return this.layers_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLayer",{get:function(){return i.d(this.layers)?this.layers[this.layers.length-1]:null},enumerable:!0,configurable:!0}),t.prototype.setTextBlocks=function(t){},t.prototype.addTextBlock=function(t){},t.prototype.setContent=function(t){},t.prototype.setAnnotations=function(t,e){if(this._annotations=null,i.d(t.annotations))for(var n=0;n<t.annotations.length;++n)this.addAnnotation(t.annotations[n],e)},t.prototype.refresh=function(){this._salt=i.k()},t.prototype.addAnnotation=function(t,e){},t.prototype.refreshContent=function(){this.isLoaded=!1},t.prototype.setPageContent=function(t,e){this.setAnnotations(t,e),this.setTextBlocks(t),this.setContent(t)},t.prototype.getRotate=function(t){return i.j(t)&&(t=0),(t+this.rotate)%360},t.prototype.getPageToDevSpaceMatrix=function(t,e,n){var r=((i.j(n)?this.rotate:n)+e)%360,s=this.getPageBox(),a=this.userUnit*t*1;switch(r){case 90:return o.e.matrix(0,a,a,0,a*-s.bottom,a*-s.left);case 180:return o.e.matrix(-a,0,0,a,a*s.right,a*-s.bottom);case 270:return o.e.matrix(0,-a,-a,0,a*s.top,a*s.right);default:return o.e.matrix(a,0,0,-a,a*-s.left,a*s.top)}},t.prototype.setPageRect=function(t){this.rect=t;var e=this.scale(165,165,0,0);this.thumbnail.width=e.width,this.thumbnail.height=e.height,this.thumbnail.zoom=e.zoom},t.prototype.scale=function(t,e,n,i){var o=this.getPageToDevSpaceMatrix(1,n).mapRect(this.rect),r=t/o.width,s=e/o.height,a=r<s?r:s,c=this.getPageToDevSpaceMatrix(a,n).mapRect(this.rect);return c.zoom=a,c},t.prototype.getDevSpacePageBox=function(t,e){return this.getPageToDevSpaceMatrix(t,e).mapRect(this.rect)},t.prototype.getUserUnitSize=function(){return this.userUnit},t.prototype.getCropBox=function(){return this.rect?this.rect.copy():o.e.rect()},t.prototype.getPageBox=function(){return this.rect?this.rect.copy():o.e.rect()},t.prototype.clone=function(){var e=new t({rotate:this.rotate});return e.setPageRect(this.rect.copy()),e.refresh(),e},t.prototype.setLayers=function(t){this.layers_=t},t.prototype.updateTopLayer=function(t){t&&i.d(this.layers)&&(this.layers[this.layers.length-1]=t)},t}()},osi3:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("6okS"),o=n("exf4"),r=function(){function t(){}return t.correctCTMToRespectPageBox=function(t,e,n){var i=n.mapQuad(o.e.quadFromRect(e));if(i.hasIntersectionRect(t))return n;var r=i.getBound();if(r.bottom>r.top){var s=r.bottom;r.bottom=r.top,r.top=s}var a=o.e.point(),c=r.getSize();return t.right>r.right&&r.left>t.left||(t.left>r.right?a.x=t.left-r.right+c.width:t.right<r.left&&(a.x=t.right-r.left-c.width)),t.top>r.top&&r.bottom>t.bottom||(t.bottom>r.top?a.y=t.bottom-r.top+c.height:t.top<r.bottom&&(a.y=t.top-r.bottom-c.height)),0==a.x&&0==a.y&&(t.left>r.left?a.x=t.left-r.left:t.right<r.right&&(a.x=t.right-r.right),t.top<r.top?a.y=t.top-r.top:t.bottom>r.bottom&&(a.y=t.bottom-r.bottom)),n.multiply(o.e.translationMatrix(a.x,a.y))},t.correctRectToRespectPageBox=function(t,e){if(e.hasIntersection(t))return e;var n=e.copy();if(n.bottom>n.top){var i=n.bottom;n.bottom=n.top,n.top=i}var r=o.e.point(),s=n.getSize();return t.right>n.right&&n.left>t.left||(t.left>n.right?r.x=t.left-n.right+s.width:t.right<n.left&&(r.x=t.right-n.left-s.width)),t.top>n.top&&n.bottom>t.bottom||(t.bottom>n.top?r.y=t.bottom-n.top+s.height:t.top<n.bottom&&(r.y=t.top-n.bottom-s.height)),0==r.x&&0==r.y&&(t.left>n.left?r.x=t.left-n.left:t.right<n.right&&(r.x=t.right-n.right),t.top<n.top?r.y=t.top-n.top:t.bottom>n.bottom&&(r.y=t.bottom-n.bottom)),n.offset(r.x,r.y),n},t.shouldSkipContainer=function(t){var e=!1;if(!i.j(t.artifact)){var n=t.artifact;"Background"!==n&&"PageNumber"!==n&&"Watermark"!==n&&"BatesN"!==n&&"Header"!==n||(e=!0)}return e},t}()},p9KE:function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n("6okS"),o=n("exf4"),r=n("mzcx"),s=n("TIOM"),a=o.d.pdfDocumentView,c=o.d.pdfPageMode,u=function(){function t(t,e,n){this._id=t,this._name=e,this._size=n,this.rotate=0,this.zoom=1,this.viewState=0,this.pageSelectedIndex=0,this.documentView=o.d.pdfDocumentView.continuous,this.pageView=o.d.pdfPageView.fitPage,this.id=this._id,this.name=this._name,this.size=this._size,this.security={value:{isNeedOwnerPassword:!1,hasUserPassword:!1,permissions:null,getPermissions:function(){return!1===this.isNeedOwnerPassword?4294967295:this.permissions}}},this.defaultPageMode=null,this.defaultPageLayout=null,this._isLoaded=!1,this._isLocked=!1,this._isModified=!1,this._pages=[],this._fonts=null,this._bookmarks=[],this._layers=[],this._acroforms=[],this._attachments=[],this._isSigned=!1}return Object.defineProperty(t.prototype,"pages",{get:function(){return i.m(this._pages)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fonts",{get:function(){return this._fonts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookmarks",{get:function(){return i.m(this._bookmarks)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bookmarksCount",{get:function(){return this._bookmarks.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attachments",{get:function(){return i.m(this._attachments)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layers",{get:function(){return i.m(this._layers)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"acroforms",{get:function(){return i.m(this._acroforms)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"signatures",{get:function(){return this._acroforms.filter(function(t){return"Sig"===t.type})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSigned",{get:function(){return this._isSigned},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLocked",{get:function(){return this._isLocked},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isModified",{get:function(){return this._isModified},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e){switch(this.setPages(t),this.setFonts(s.a.createInstance(t.fonts)),i.j(t.name)||(this.name=t.name),i.j(t.size)||(this.size=t.size),this.author=i.l(t,"A"),this.creator=i.l(t,"C"),this.producer=i.l(t,"P"),this.title=i.l(t,"T"),this.subject=i.l(t,"S"),this.keywords=i.l(t,"K"),this.createDate=new Date(t.CD),this.modifyDate=new Date(t.MD),this.pageDirection=t.R2L?t.R2L:o.d.pDPageDirection.kPDPageDirectionL2R,this._isModified=!0===t.mod,t.PM){case 1:this.defaultPageMode=c.CloseAllPanels;break;case 2:this.defaultPageMode=c.OpenOutlinesPanel;break;case 3:this.defaultPageMode=c.OpenPagePreviewPanel;break;case 4:this.defaultPageMode=c.FullscreenMode;break;case 5:this.defaultPageMode=c.OpenLayersPanel;break;case 6:this.defaultPageMode=c.OpenAttachmentsPanel}switch(t.PL){case 1:this.defaultPageLayout=a.single;break;case 2:this.defaultPageLayout=a.continuous;break;case 3:this.defaultPageLayout=a.facingContinuous;break;case 4:this.defaultPageLayout=a.facingContinuousConverPage;break;case 5:this.defaultPageLayout=a.facing;break;case 6:this.defaultPageLayout=a.facingConverPage}this._isLoaded=!0},t.prototype.getPage=function(t){return this._pages[t]},t.prototype.getPageIndex=function(t){return this._pages.indexOf(t)},t.prototype.getPages=function(t,e){return t&&e?i.m(this._pages,t,e):i.m(this._pages)},t.prototype.getNumPages=function(){return this._pages.length},t.prototype.getPagesCount=function(){return this._pages.length},t.prototype.setLock=function(t){this._isLocked=t},t.prototype.setIsModified=function(t){this._isModified=t},t.prototype.addAcroforms=function(t){if(i.d(t))for(var e=0;e<t.length;e++){for(var n=!1,o=0;o<this._acroforms.length;o++)if(this._acroforms[o].fieldName===t[e]){n=!0;break}n||this._acroforms.push(t[e])}},t.prototype.setPages=function(t){for(var e=r.a.createInstanceCollection(t),n=0,i=e.length;n<i;n++){var o=e[n];o.index=n,o.refresh()}this._pages=e},t.prototype.refreshPages=function(){for(var t=0,e=this._pages.length;t<e;t++)this._pages[t].refresh()},t.prototype.updateLayerStates=function(t){if(t&&this._layers&&!(this._layers.length<=0))for(var e=function(n){if(n&&(n.id&&t[n.id]&&(n.state=t[n.id].S),n.items&&!(n.items.length<=0)))for(var i=0;i<n.items.length;i++)n.items[i]&&e(n.items[i])},n=0;n<this._layers.length;n++)this._layers[n]&&e(this._layers[n])},t.prototype.setFonts=function(t){this._fonts=t},t.prototype.setBookmarks=function(t){this._bookmarks=t},t.prototype.setAttachments=function(t){this._attachments=t},t.prototype.setAcroforms=function(t){this._acroforms=t;var e=this.signatures;if(e)for(var n=0;n<e.length;n++){var i=e[n];if(i&&i.certificate){this._isSigned=!0;break}}},t.prototype.updateAcroforms=function(t){if(i.d(t)&&i.d(this._acroforms)&&0!==this._acroforms.length)for(var e=0,n=t.length;e<n;e++){var o=t[e];if(o){var r=o.fieldName,s=this._acroforms.map(function(t){return t.fieldName}).indexOf(r);if(s>=0){var a=this._acroforms[s];a&&a.setContent(o.json)}}}},t.prototype.isTempFile=function(){return!1},t}()},pz3r:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){return function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}}()},rxHE:function(t,e,n){"use strict";var i=n("6okS"),o=n("xq7P"),r=n("SU9I"),s=function(t,e,n,o,r,s){var a=n;Object.defineProperties(this,{iw:{value:o||0,writable:!0},rotate:{value:t||0,writable:!0},rect:{value:e,writable:!0},reflect:{value:!1,writable:!0},BI:{value:r||0,writable:!0},effect:{value:s||{},writable:!0},lines:{get:function(){return i.m(a)},set:function(t){return a=t}}}),this.isEqual=function(t){return t&&t==this}},a=function(t,e,n){e=(e=e.replace(/\u0000/g," "))||"",Object.defineProperties(this,{rect:{value:t},text:{value:e},font:{value:n}})};e.a={createInstanceCollection:function(t,e){for(var n=new Array(e.length),c=0,u=n.length;c<u;++c){var l=e[c],h=null;if(l.L&&i.d(l.L)){var p=null;h=new Array;for(var d=0;d<l.L.length;++d){var f=l.L[d];p=i.d(t)&&!i.j(f.F)&&t[f.F]?r.a.createInstance(t[f.F]):null,h.push(new a(o.a.createInstance(f.B),f.T,p))}}n[c]=new s(l.r,o.a.createInstance(l.B),h,l.iw,l.BI,l.effect)}return n}}},yLV6:function(t,e,n){var i;!function(o,r,s,a){"use strict";var c,u=["","webkit","Moz","MS","ms","o"],l=r.createElement("div"),h="function",p=Math.round,d=Math.abs,f=Date.now;function g(t,e,n){return setTimeout(w(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(v(t,n[e],n),!0)}function v(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function y(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=o.console&&(o.console.warn||o.console.log);return r&&r.call(o.console,i,n),t.apply(this,arguments)}}c="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var b=y(function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===a)&&(t[i[o]]=e[i[o]]),o++;return t},"extend","Use `assign`."),P=y(function(t,e){return b(t,e,!0)},"merge","Use `assign`.");function _(t,e,n){var i,o=e.prototype;(i=t.prototype=Object.create(o)).constructor=t,i._super=o,n&&c(i,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function x(t,e){return typeof t==h?t.apply(e&&e[0]||a,e):t}function T(t,e){return t===a?e:t}function S(t,e,n){v(B(e),function(e){t.addEventListener(e,n,!1)})}function C(t,e,n){v(B(e),function(e){t.removeEventListener(e,n,!1)})}function k(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function E(t,e){return t.indexOf(e)>-1}function B(t){return t.trim().split(/\s+/g)}function L(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function M(t){return Array.prototype.slice.call(t,0)}function R(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];L(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function O(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),r=0;r<u.length;){if((i=(n=u[r])?n+o:e)in t)return i;r++}return a}var F=1;function I(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||o}var A="ontouchstart"in o,D=O(o,"PointerEvent")!==a,z=A&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),V=25,N=1,j=4,H=8,U=1,G=2,W=4,q=8,Y=16,K=G|W,Z=q|Y,X=K|Z,Q=["x","y"],J=["clientX","clientY"];function $(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){x(t.options.enable,[t])&&n.handler(e)},this.init()}function tt(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&N&&i-o==0,s=e&(j|H)&&i-o==0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=et(e)),o>1&&!n.firstMultiple?n.firstMultiple=et(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,c=s?s.center:r.center,u=e.center=nt(i);e.timeStamp=f(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=st(c,u),e.distance=rt(c,u),function(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==N&&r.eventType!==j||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}(n,e),e.offsetDirection=ot(e.deltaX,e.deltaY);var l,h,p=it(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=d(p.x)>d(p.y)?p.x:p.y,e.scale=s?(l=s.pointers,rt((h=i)[0],h[1],J)/rt(l[0],l[1],J)):1,e.rotation=s?function(t,e){return st(i[1],i[0],J)+st(t[1],t[0],J)}(s.pointers):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,o,r,s=t.lastInterval||e,c=e.timeStamp-s.timeStamp;if(e.eventType!=H&&(c>V||s.velocity===a)){var u=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,h=it(c,u,l);i=h.x,o=h.y,n=d(h.x)>d(h.y)?h.x:h.y,r=ot(u,l),t.lastInterval=e}else n=s.velocity,i=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=r}(n,e);var g=t.element;k(e.srcEvent.target,g)&&(g=e.srcEvent.target),e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function et(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:p(t.pointers[n].clientX),clientY:p(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:nt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function nt(t){var e=t.length;if(1===e)return{x:p(t[0].clientX),y:p(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:p(n/e),y:p(i/e)}}function it(t,e,n){return{x:e/t||0,y:n/t||0}}function ot(t,e){return t===e?U:d(t)>=d(e)?t<0?G:W:e<0?q:Y}function rt(t,e,n){n||(n=Q);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function st(t,e,n){return n||(n=Q),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}$.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(I(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(I(this.element),this.evWin,this.domHandler)}};var at={mousedown:N,mousemove:2,mouseup:j},ct="mousedown",ut="mousemove mouseup";function lt(){this.evEl=ct,this.evWin=ut,this.pressed=!1,$.apply(this,arguments)}_(lt,$,{handler:function(t){var e=at[t.type];e&N&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=j),this.pressed&&(e&j&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ht={pointerdown:N,pointermove:2,pointerup:j,pointercancel:H,pointerout:H},pt={2:"touch",3:"pen",4:"mouse",5:"kinect"},dt="pointerdown",ft="pointermove pointerup pointercancel";function gt(){this.evEl=dt,this.evWin=ft,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(dt="MSPointerDown",ft="MSPointerMove MSPointerUp MSPointerCancel"),_(gt,$,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=ht[i],r=pt[t.pointerType]||t.pointerType,s="touch"==r,a=L(e,t.pointerId,"pointerId");o&N&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(j|H)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var mt={touchstart:N,touchmove:2,touchend:j,touchcancel:H},vt="touchstart",yt="touchstart touchmove touchend touchcancel";function bt(){this.evTarget=vt,this.evWin=yt,this.started=!1,$.apply(this,arguments)}_(bt,$,{handler:function(t){var e=mt[t.type];if(e===N&&(this.started=!0),this.started){var n=(function(t,e){var n=M(t.touches),i=M(t.changedTouches);return e&(j|H)&&(n=R(n.concat(i),"identifier",!0)),[n,i]}).call(this,t,e);e&(j|H)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var Pt={touchstart:N,touchmove:2,touchend:j,touchcancel:H},_t="touchstart touchmove touchend touchcancel";function wt(){this.evTarget=_t,this.targetIds={},$.apply(this,arguments)}_(wt,$,{handler:function(t){var e=Pt[t.type],n=(function(t,e){var n=M(t.touches),i=this.targetIds;if(e&(2|N)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=M(t.changedTouches),a=[],c=this.target;if(r=n.filter(function(t){return k(t.target,c)}),e===N)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),e&(j|H)&&delete i[s[o].identifier],o++;return a.length?[R(r.concat(a),"identifier",!0),a]:void 0}).call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var xt=2500;function Tt(){$.apply(this,arguments);var t=w(this.handler,this);this.touch=new wt(this.manager,t),this.mouse=new lt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function St(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)},xt)}}_(Tt,$,{handler:function(t,e,n){var i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if("touch"==n.pointerType)(function(t,e){t&N?(this.primaryTouch=e.changedPointers[0].identifier,St.call(this,e)):t&(j|H)&&St.call(this,e)}).call(this,e,n);else if(i&&(function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(r<=25&&s<=25)return!0}return!1}).call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ct=O(l.style,"touchAction"),kt=Ct!==a,Et=function(){if(!kt)return!1;var t={},e=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||o.CSS.supports("touch-action",n)}),t}();function Bt(t,e){this.manager=t,this.set(e)}Bt.prototype={set:function(t){"compute"==t&&(t=this.compute()),kt&&this.manager.element.style&&Et[t]&&(this.manager.element.style[Ct]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,function(e){x(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(E(t,"none"))return"none";var e=E(t,"pan-x"),n=E(t,"pan-y");return e&&n?"none":e||n?e?"pan-x":"pan-y":E(t,"manipulation")?"manipulation":"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,o=E(i,"none")&&!Et.none,r=E(i,"pan-y")&&!Et["pan-y"],s=E(i,"pan-x")&&!Et["pan-x"];if(o&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!s||!r)return o||r&&n&K||s&&n&Z?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Lt=1,Mt=2,Rt=4,Ot=8,Ft=Ot,It=16;function At(t){this.options=c({},this.defaults,t||{}),this.id=F++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=Lt,this.simultaneous={},this.requireFail=[]}function Dt(t){return t&It?"cancel":t&Ot?"end":t&Rt?"move":t&Mt?"start":""}function zt(t){return t==Y?"down":t==q?"up":t==G?"left":t==W?"right":""}function Vt(t,e){var n=e.manager;return n?n.get(t):t}function Nt(){At.apply(this,arguments)}function jt(){Nt.apply(this,arguments),this.pX=null,this.pY=null}function Ht(){Nt.apply(this,arguments)}function Ut(){At.apply(this,arguments),this._timer=null,this._input=null}function Gt(){Nt.apply(this,arguments)}function Wt(){Nt.apply(this,arguments)}function qt(){At.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Yt(t,e){return(e=e||{}).recognizers=T(e.recognizers,Yt.defaults.preset),new Kt(t,e)}function Kt(t,e){var n;this.options=c({},Yt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(D?gt:z?wt:A?Tt:lt))(n,tt),this.touchAction=new Bt(this,this.options.touchAction),Zt(this,!0),v(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Zt(t,e){var n,i=t.element;i.style&&(v(t.options.cssProps,function(o,r){n=O(i.style,r),e?(t.oldCssProps[n]=i.style[n],i.style[n]=o):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}At.prototype={defaults:{},set:function(t){return c(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Vt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)?this:(t=Vt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===L(e,t=Vt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Vt(t,this);var e=L(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<Ot&&i(e.options.event+Dt(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=Ot&&i(e.options.event+Dt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|Lt)))return!1;t++}return!0},recognize:function(t){var e=c({},t);if(!x(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Ft|It|32)&&(this.state=Lt),this.state=this.process(e),this.state&(Mt|Rt|Ot|It)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(Nt,At,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(Mt|Rt),o=this.attrTest(t);return i&&(n&H||!o)?e|It:i||o?n&j?e|Ot:e&Mt?e|Rt:Mt:32}}),_(jt,Nt,{defaults:{event:"pan",threshold:10,pointers:1,direction:X},getTouchAction:function(){var t=this.options.direction,e=[];return t&K&&e.push("pan-y"),t&Z&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&K?(o=0===r?U:r<0?G:W,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?U:s<0?q:Y,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return Nt.prototype.attrTest.call(this,t)&&(this.state&Mt||!(this.state&Mt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=zt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),_(Ht,Nt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Mt)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),_(Ut,At,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(j|H)&&!o)this.reset();else if(t.eventType&N)this.reset(),this._timer=g(function(){this.state=Ft,this.tryEmit()},e.time,this);else if(t.eventType&j)return Ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Ft&&(t&&t.eventType&j?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),_(Gt,Nt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Mt)}}),_(Wt,Nt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|Z,pointers:1},getTouchAction:function(){return jt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(K|Z)?e=t.overallVelocity:n&K?e=t.overallVelocityX:n&Z&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&t.eventType&j},emit:function(t){var e=zt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),_(qt,At,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&N&&0===this.count)return this.failTimeout();if(i&&o&&n){if(t.eventType!=j)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||rt(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=g(function(){this.state=Ft,this.tryEmit()},e.interval,this),Mt):Ft}return 32},failTimeout:function(){return this._timer=g(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Yt.VERSION="2.0.7",Yt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Gt,{enable:!1}],[Ht,{enable:!1},["rotate"]],[Wt,{direction:K}],[jt,{direction:K},["swipe"]],[qt],[qt,{event:"doubletap",taps:2},["tap"]],[Ut]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Kt.prototype={set:function(t){return c(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&Ft)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(Mt|Rt|Ot)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof At)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=L(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return v(B(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==a){var n=this.handlers;return v(B(t),function(t){e?n[t]&&n[t].splice(L(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=r.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&Zt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},c(Yt,{INPUT_START:N,INPUT_MOVE:2,INPUT_END:j,INPUT_CANCEL:H,STATE_POSSIBLE:Lt,STATE_BEGAN:Mt,STATE_CHANGED:Rt,STATE_ENDED:Ot,STATE_RECOGNIZED:Ft,STATE_CANCELLED:It,STATE_FAILED:32,DIRECTION_NONE:U,DIRECTION_LEFT:G,DIRECTION_RIGHT:W,DIRECTION_UP:q,DIRECTION_DOWN:Y,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:Z,DIRECTION_ALL:X,Manager:Kt,Input:$,TouchAction:Bt,TouchInput:wt,MouseInput:lt,PointerEventInput:gt,TouchMouseInput:Tt,SingleTouchInput:bt,Recognizer:At,AttrRecognizer:Nt,Tap:qt,Pan:jt,Swipe:Wt,Pinch:Ht,Rotate:Gt,Press:Ut,on:S,off:C,each:v,merge:P,extend:b,assign:c,inherit:_,bindFn:w,prefixed:O}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=Yt,(i=(function(){return Yt}).call(e,n,e,t))===a||(t.exports=i)}(window,document)},z2eg:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("6okS"),o=n("exf4"),r=function(){function t(){this.visiblePages=[],this.viewPos=o.e.point(),this.viewSize=o.e.size(),this.bandSize=o.e.size(),this.zoomType=o.d.pdfPageView.none,this.zoom=1,this.rotate=0,this.currentPage=0,this.visibleRange={startPage:-1,endPage:-1},this.callbacks=null,this.doc=null,this.view=null,this.dragPoint=o.e.point(),this.dragging=!1}return t.prototype.getOffset=function(){return this.viewPos.copy()},t.prototype.initialize=function(t){this.callbacks=t.layoutCallbacks,this.doc=t.document,this.view=t,this.zoomType=this.doc.pageView,this.zoom=1,this.rotate=0,this.currentPage=this.doc.pageSelectedIndex,this.onChanged()},t.prototype.zoomTo=function(t,e,n){var i=n?n.copy():o.e.rect(0,0,this.viewSize.width,this.viewSize.height).getCenter();return this.zoomType!==t&&(this.zoomType=t,this.updateZoom(i)),this.zoomType===o.d.pdfPageView.none&&(e<.1&&(e=.1),e>2&&(e=2),this.setZoomValue(e,i)),!0},t.prototype.setPagesRotation=function(t){if(this.rotate!==t){var e=this.currentPage;this.rotate=t,this.onChanged(!1),this.goToPageRect(e),this.callbacks&&this.callbacks.onRotateChanged&&this.callbacks.onRotateChanged(this.rotate)}},t.prototype.updatePages=function(){this.clearPageNodes(),this.updateLayout()},t.prototype.mapPointToPage=function(t,e){var n=o.e.point(0,0),r=this.doc.getPage(t);if(i.j(r))return n;var s=r.getPageToDevSpaceMatrix(this.zoom,this.rotate).invert();if(!i.j(s)){var a=o.e.point(e.x+this.viewPos.x,e.y+this.viewPos.y);r.position&&a.offset(-r.position.x,-r.position.y),n=s.mapPoint(a)}return n},t.prototype.mapRectToPage=function(t,e){var n=o.e.rect(),r=this.doc.getPage(t);if(i.j(r))return n;var s=r.getPageToDevSpaceMatrix(this.zoom,this.rotate).invert();if(!i.j(s)){var a=o.e.rect(e.left+this.viewPos.x-r.position.x,e.top+this.viewPos.y-r.position.y,e.right+this.viewPos.x-r.position.x,e.bottom+this.viewPos.y-r.position.y);n=s.mapRect(a)}return n},t.prototype.mapPointToDevice=function(t,e){var n=o.e.point(),i=this.doc.getPage(t);return i?((n=i.getPageToDevSpaceMatrix(this.zoom,this.rotate).mapPoint(e).floor()).offset(-this.viewPos.x,-this.viewPos.y),n.offset(i.position.x,i.position.y),n):n},t.prototype.mapRectToDevice=function(t,e){var n=o.e.rect(),r=this.doc.getPage(t);return i.j(r)?n:((n=r.getPageToDevSpaceMatrix(this.zoom,this.rotate).mapRect(e).round()).offset(-this.viewPos.x,-this.viewPos.y),n.offset(r.position.x,r.position.y),n)},t.prototype.goToPageRect=function(t,e,n){var r,s=this.doc.pages;if(t>=s.length||t<0)return null;if(i.j(n)&&(n=0),this.currentPage=t,this.callbacks&&this.callbacks.onFocusPageChanged(t),e?(r=this.mapRectToDevice(t,e)).offset(this.viewPos.x,this.viewPos.y):(r=s[t].pageRect.copy()).inflate(6,6),n&o.d.bLRectFlags.kBLRectDontScrollVisible&&o.e.rect(this.viewPos.x,this.viewPos.y,this.viewPos.x+this.viewSize.width,this.viewPos.y+this.viewSize.height).containsRect(r))return null;var a=r.left+(r.getWidth()-this.viewSize.width)/2,c=r.top+(r.getHeight()-this.viewSize.height)/2;return r.getWidth()>this.viewSize.width&&(a=n&o.d.bLRectFlags.kBLRectPreferRightOverLeft?r.right-this.viewSize.width:r.left),r.getHeight()>this.viewSize.height&&(c=n&o.d.bLRectFlags.kBLRectPreferBottomOverTop?r.bottom-this.viewSize.height:r.top),this.viewPos.x=o.e.castFloatToInt(a),this.viewPos.y=o.e.castFloatToInt(c),this.updatePagesVisibility(),this.updateScrolls(),o.e.point(a,c)},t.prototype.goToNextPage=function(){this.currentPage<this.doc.getPagesCount()-1&&this.goToPageRect(this.currentPage+1,null,0)},t.prototype.goToPrevPage=function(){this.currentPage>0&&this.goToPageRect(this.currentPage-1,null,0)},t.prototype.getPageAtPoint=function(t){for(var e=-1,n=this.doc.pages,i=o.e.point(this.viewPos.x+t.x,this.viewPos.y+t.y),r=0,s=n.length;r<s;++r)if(n[r].pageRect.containsPoint(i)){e=r;break}return e},t.prototype.resizeView=function(t){if(t&&!t.isEmpty()&&!t.isEqual(this.viewSize)&&(this.viewSize=t,this.doc)){var e=this.doc.getPage(this.currentPage).position.copy();e.offset(-this.viewPos.x,-this.viewPos.y),this.updateZoom(e),this.onChanged()}},t.prototype.getVisibleRange=function(){return{startPage:this.visibleRange.startPage,endPage:this.visibleRange.endPage}},t.prototype.getFocusPage=function(){return this.currentPage},t.prototype.setFocusPage=function(t){t<this.doc.getPagesCount()&&t>=0&&(this.currentPage=t,this.callbacks&&this.callbacks.onFocusPageChanged(t))},t.prototype.processScrollEvent=function(t,e,n){switch(e){case o.d.bLScrollEvent.kBLScrollHome:this.setScrollPos(t,this.getMinScrollPos(t));break;case o.d.bLScrollEvent.kBLScrollEnd:this.setScrollPos(t,this.getMaxScrollPos(t));break;case o.d.bLScrollEvent.kBLScrollStepPlus:this.setScrollPos(t,this.getScrollPos(t)+o.e.castFloatToInt(this.getScrollSize(t)/10))||this.callbacks&&this.callbacks.onNavigateToNextPage();break;case o.d.bLScrollEvent.kBLScrollStepMinus:this.setScrollPos(t,this.getScrollPos(t)-o.e.castFloatToInt(this.getScrollSize(t)/10))||this.callbacks&&this.callbacks.onNavigateToPrevPage();break;case o.d.bLScrollEvent.kBLScrollPagePlus:this.setScrollPos(t,this.getScrollPos(t)+this.getScrollSize(t));break;case o.d.bLScrollEvent.kBLScrollPageMinus:this.setScrollPos(t,this.getScrollPos(t)-this.getScrollSize(t));break;case o.d.bLScrollEvent.kBLScrollPos:case o.d.bLScrollEvent.kBLScrollSliderReleased:this.setScrollPos(t,n)}},t.prototype.pointerPressed=function(t){this.dragging||(this.dragPoint=o.e.point(this.viewPos.x+t.x,this.viewPos.y+t.y),this.dragging=!0)},t.prototype.pointerReleased=function(t){this.dragging=!1},t.prototype.pointerMoved=function(t){this.dragging&&(this.setScrollPos(o.d.bLScrollBarType.kBLScrollBarHorz,this.dragPoint.x-t.x),this.setScrollPos(o.d.bLScrollBarType.kBLScrollBarVert,this.dragPoint.y-t.y),this.dragPoint=o.e.point(this.viewPos.x+t.x,this.viewPos.y+t.y))},t.prototype.pointerWheel=function(t,e){for(var n=o.e.castFloatToInt(e);n>0;)this.processScrollEvent(o.d.bLScrollBarType.kBLScrollBarVert,o.d.bLScrollEvent.kBLScrollStepMinus,0),--n;for(;n<0;)this.processScrollEvent(o.d.bLScrollBarType.kBLScrollBarVert,o.d.bLScrollEvent.kBLScrollStepPlus,0),++n},t.prototype.draw=function(t,e,n){if(this.view){var i=this.viewPos.copy();t.translateCTM(-i.x,-i.y),this.view.defaultDraw(t,n)}},t.prototype.oCConfigChanged=function(){this.onChanged()},t.prototype.getVisiblePages=function(){return this.visiblePages},t.prototype.isUsingVisibleRangeNavigation=function(){return!1},t.prototype.dispose=function(){this.callbacks=null,this.doc=null,this.view=null},t.prototype.onChanged=function(t){i.j(t)&&(t=!0),this.updateLayout(),this.updatePagesVisibility(),t&&this.updateFocusPage(),this.updateScrolls()},t.prototype.updateLayout=function(){if(this.doc){for(var t=0,e=0,n=this.doc.pages,i=0,r=n.length;i<r;++i){var s=(l=n[i]).getPageToDevSpaceMatrix(this.zoom,this.rotate).mapRect(l.getPageBox()).floor().getSize(),a=s.width,c=s.height;l.position=o.e.point(0,0),l.pageRect=o.e.rect(l.position.x,l.position.y,l.position.x+a,l.position.y+c).floor(),t=Math.max(t,a+12),e=Math.max(e,c+12)}t=Math.max(t,this.viewSize.width),e=Math.max(e,this.viewSize.height);var u=0;for(r=n.length;u<r;++u){var l;c=(l=n[u]).pageRect.height,l.position.x=(t-(a=l.pageRect.width))/2,l.position.y+=(e-c)/2,l.position=l.position.floor(),l.pageRect.offset(l.position.x,l.position.y),l.pageRect=l.pageRect.floor(),l.virtualLeft=o.e.castFloatToInt(l.pageRect.left),l.virtualTop=o.e.castFloatToInt(l.pageRect.top)}this.bandSize=o.e.size(Math.max(this.viewSize.width,t),Math.max(this.viewSize.height,e)).floor()}},t.prototype.updatePagesVisibility=function(){if(this.doc){if(this.bandSize.width<this.viewSize.width)this.viewPos.x=o.e.castFloatToInt((this.bandSize.width-this.viewSize.width)/2);else{var t=this.getMinScrollPos(o.d.bLScrollBarType.kBLScrollBarHorz),e=this.getMaxScrollPos(o.d.bLScrollBarType.kBLScrollBarHorz);this.viewPos.x=Math.min(Math.max(this.viewPos.x,t),e)}this.bandSize.height<this.viewSize.height?this.viewPos.y=(this.bandSize.height-this.viewSize.height)/2:(t=this.getMinScrollPos(o.d.bLScrollBarType.kBLScrollBarVert),e=this.getMaxScrollPos(o.d.bLScrollBarType.kBLScrollBarVert),this.viewPos.y=o.e.castFloatToInt(Math.min(Math.max(this.viewPos.y,t),e)));for(var n=o.e.rect(this.viewPos.x,this.viewPos.y,this.viewPos.x+this.viewSize.width,this.viewPos.y+this.viewSize.height),r=this.doc.pages,s={startPage:Number.MAX_VALUE,endPage:0},a=0,c=r.length;a<c;++a)n.hasIntersection(r[a].pageRect)&&(s.startPage=Math.min(s.startPage,a),s.endPage=Math.max(s.endPage,a));this.visiblePages=i.m(r,s.startPage,s.endPage+1),s.startPage===this.visibleRange.startPage&&s.endPage===this.visibleRange.endPage||(this.visibleRange=s,this.visibleRange.startPage!==Number.MAX_VALUE&&this.callbacks&&this.callbacks.onVisibleRangeChanged(this.visibleRange.startPage,this.visibleRange.endPage)),this.callbacks&&this.callbacks.onDrawUpdated()}},t.prototype.updateFocusPage=function(){for(var t=o.e.rect(this.viewPos.x,this.viewPos.y,this.viewPos.x+this.viewSize.width,this.viewPos.y+this.viewSize.height),e=0,n=0,i=this.visiblePages,r=0,s=this.visiblePages.length;r<s;++r){var a=i[r].pageRect;if(t.hasIntersection(a)){var c=o.e.intersectRects(t,a).getArea();c>n&&(n=c,e=i[r].index)}}e!==this.currentPage&&(this.currentPage=e,this.callbacks&&this.callbacks.onFocusPageChanged(this.currentPage))},t.prototype.clearPageNodes=function(){},t.prototype.setZoomValue=function(t,e){if(this.zoom!==t){var n=this.currentPage,i=this.mapPointToPage(n,e);this.zoom=o.g.floorZoom(Math.min(Math.max(t,.1),2)),this.updateLayout();var r=this.mapPointToDevice(n,i);this.viewPos.offset(r.x,r.y),this.viewPos.offset(-e.x,-e.y),this.updatePagesVisibility(),this.updateFocusPage(),this.updateScrolls()}this.callbacks&&this.callbacks.onChangeZoom(this.zoomType,this.zoom)},t.prototype.updateZoom=function(t){if(this.zoomType!==o.d.pdfPageView.none&&!this.viewSize.isAreaEmpty()&&this.doc){for(var e=0,n=0,i=this.doc.pages,r=0,s=i.length;r<s;r++){var a=i[r].getDevSpacePageBox(1,this.rotate).getSize(),c=a.width;e<c&&(e=c);var u=a.height;n<u&&(n=u)}var l=(this.viewSize.width-12-2)/e,h=(this.viewSize.height-65-2)/n;switch(this.zoomType){case o.d.pdfPageView.fitPage:this.setZoomValue(Math.min(l,h),t);break;case o.d.pdfPageView.fitWidth:this.setZoomValue(l,t);break;case o.d.pdfPageView.kBLZoomFitHeight:this.setZoomValue(h,t)}}},t.prototype.updateScrolls=function(){this.callbacks&&(this.bandSize.width>this.viewSize.width?(this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarHorz,!0),this.callbacks.onScrollRangeChanged(o.d.bLScrollBarType.kBLScrollBarHorz,this.bandSize.width),this.callbacks.onScrollSizeChanged(o.d.bLScrollBarType.kBLScrollBarHorz,this.viewSize.width),this.callbacks.onScrollPositionChanged(o.d.bLScrollBarType.kBLScrollBarHorz,this.viewPos.x),this.callbacks.onScrollChanged(o.d.bLScrollBarType.kBLScrollBarHorz,{pos:this.viewPos.x,size:this.viewSize.width,range:this.bandSize.width})):this.zoomType===o.d.bLZoomType.kBLZoomFitHeight?(this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarHorz,!0),this.callbacks.onScrollRangeChanged(o.d.bLScrollBarType.kBLScrollBarHorz,1),this.callbacks.onScrollSizeChanged(o.d.bLScrollBarType.kBLScrollBarHorz,1),this.callbacks.onScrollPositionChanged(o.d.bLScrollBarType.kBLScrollBarHorz,0)):this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarHorz,!1),this.bandSize.height>this.viewSize.height?(this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarVert,!0),this.callbacks.onScrollRangeChanged(o.d.bLScrollBarType.kBLScrollBarVert,this.bandSize.height),this.callbacks.onScrollSizeChanged(o.d.bLScrollBarType.kBLScrollBarVert,this.viewSize.height),this.callbacks.onScrollPositionChanged(o.d.bLScrollBarType.kBLScrollBarVert,this.viewPos.y),this.callbacks.onScrollChanged(o.d.bLScrollBarType.kBLScrollBarVert,{pos:this.viewPos.y,size:this.viewSize.height,range:this.bandSize.height})):this.zoomType===o.d.bLZoomType.kBLZoomFitWidth?(this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarVert,!0),this.callbacks.onScrollRangeChanged(o.d.bLScrollBarType.kBLScrollBarVert,1),this.callbacks.onScrollSizeChanged(o.d.bLScrollBarType.kBLScrollBarVert,1),this.callbacks.onScrollPositionChanged(o.d.bLScrollBarType.kBLScrollBarVert,0)):this.callbacks.onScrollVisibilityChanged(o.d.bLScrollBarType.kBLScrollBarVert,!1))},t.prototype.getMinScrollPos=function(t){return 0},t.prototype.getMaxScrollPos=function(t){return t===o.d.bLScrollBarType.kBLScrollBarHorz?this.bandSize.width<this.viewSize.width?0:this.bandSize.width-this.viewSize.width:this.bandSize.height<this.viewSize.height?0:this.bandSize.height-this.viewSize.height},t.prototype.getScrollSize=function(t){return t===o.d.bLScrollBarType.kBLScrollBarHorz?this.viewSize.width:this.viewSize.height},t.prototype.getScrollPos=function(t){return t===o.d.bLScrollBarType.kBLScrollBarHorz?this.viewPos.x:this.viewPos.y},t.prototype.forceSetScrollPos=function(t,e){t===o.d.bLScrollBarType.kBLScrollBarHorz?this.viewPos.x=e:this.viewPos.y=e},t.prototype.setScrollPos=function(t,e){var n=this.getMinScrollPos(t),i=this.getMaxScrollPos(t),o=Math.min(Math.max(e,n),i);return o!==this.getScrollPos(t)&&(this.forceSetScrollPos(t,o),this.updatePagesVisibility(),this.updateFocusPage(),this.callbacks&&this.callbacks.onScrollPositionChanged(t,o),!0)},t}()},zgar:function(t,e,n){"use strict";var i=n("CcnG"),o=n("Ip0R"),r=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),s=i["ɵcrt"]({encapsulation:0,styles:[[".progress[_ngcontent-%COMP%]{display:block;position:absolute;top:calc(50% - 17px);left:calc(50% - 17px);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:.99;pointer-events:none;z-index:2}.progress__content[_ngcontent-%COMP%]{width:35px;height:35px;position:relative;margin:auto}.progress__item[_ngcontent-%COMP%]{width:32px;height:32px;opacity:0;-ms-transform:rotate(225deg);transform:rotate(225deg);-webkit-animation-iteration-count:infinite;-webkit-animation-duration:4.96s;-webkit-animation-name:orbit;-moz-animation-iteration-count:infinite;-moz-animation-duration:4.96s;-moz-animation-name:orbit;-o-animation-iteration-count:infinite;-o-animation-duration:4.96s;-o-animation-name:orbit;animation-iteration-count:infinite;animation-duration:4.96s;animation-name:orbit;position:absolute}.progress__item[_ngcontent-%COMP%]:nth-child(1){-webkit-animation-delay:1.52s;animation-delay:1.52s}.progress__item[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:.3s;animation-delay:.3s}.progress__item[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:.61s;animation-delay:.61s}.progress__item[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-delay:.91s;animation-delay:.91s}.progress__item[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-delay:1.22s;animation-delay:1.22s}.progress__item--circle[_ngcontent-%COMP%]{top:0;left:0;position:absolute;width:5px;height:5px;border-radius:100%;background:#fff;box-shadow:0 0 2px 0 #000}.progress__text[_ngcontent-%COMP%]{text-shadow:0 0 2px #000;margin-top:5px;color:#fff}@-webkit-keyframes orbit{0%{opacity:1;z-index:99;-ms-transform:rotate(180deg);transform:rotate(180deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}7%{opacity:1;-ms-transform:rotate(300deg);transform:rotate(300deg);-webkit-animation-timing-function:linear;animation-timing-function:linear;origin:0}30%{opacity:1;-ms-transform:rotate(410deg);transform:rotate(410deg);-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;origin:7%}39%{opacity:1;-ms-transform:rotate(645deg);transform:rotate(645deg);-webkit-animation-timing-function:linear;animation-timing-function:linear;origin:30%}70%{opacity:1;-ms-transform:rotate(770deg);transform:rotate(770deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;origin:39%}75%{opacity:1;-ms-transform:rotate(900deg);transform:rotate(900deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;origin:70%}100%,76%{opacity:0;-ms-transform:rotate(900deg);transform:rotate(900deg)}}@keyframes orbit{0%{opacity:1;z-index:99;-ms-transform:rotate(180deg);transform:rotate(180deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}7%{opacity:1;-ms-transform:rotate(300deg);transform:rotate(300deg);-webkit-animation-timing-function:linear;animation-timing-function:linear;origin:0}30%{opacity:1;-ms-transform:rotate(410deg);transform:rotate(410deg);-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;origin:7%}39%{opacity:1;-ms-transform:rotate(645deg);transform:rotate(645deg);-webkit-animation-timing-function:linear;animation-timing-function:linear;origin:30%}70%{opacity:1;-ms-transform:rotate(770deg);transform:rotate(770deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;origin:39%}75%{opacity:1;-ms-transform:rotate(900deg);transform:rotate(900deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;origin:70%}100%,76%{opacity:0;-ms-transform:rotate(900deg);transform:rotate(900deg)}}"]],data:{}});function a(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,13,"div",[["class","progress"]],null,null,null,null,null)),(t()(),i["ɵeld"](1,0,null,null,10,"ul",[["class","progress__content"]],null,null,null,null,null)),(t()(),i["ɵeld"](2,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](3,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](4,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](5,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](6,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](7,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](8,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](9,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](10,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](11,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](12,0,null,null,1,"p",[["class","progress__text"]],null,null,null,null,null)),(t()(),i["ɵted"](-1,null,["Processing..."]))],null,null)}var c=n("q6c6"),u=n("ZbGM");n("HpxQ"),n("In1z"),n("jkSe"),n("0O6x"),n("Tzdt"),n("CkTg"),n("A7o+"),n("02Pb"),n("Lt/k"),n("ZYCi"),n.d(e,"a",function(){return l}),n.d(e,"b",function(){return f});var l=i["ɵcrt"]({encapsulation:0,styles:[['[_nghost-%COMP%]{height:100%;display:block}.canvas-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;z-index:2}.progress[_ngcontent-%COMP%]{display:block;position:absolute;top:calc(50% - 17px);left:calc(50% - 17px);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:.99;pointer-events:none;z-index:0}.progress__content[_ngcontent-%COMP%]{width:35px;height:35px;position:relative;margin:auto}.progress__item[_ngcontent-%COMP%]{width:32px;height:32px;opacity:0;-ms-transform:rotate(225deg);transform:rotate(225deg);-webkit-animation-iteration-count:infinite;-webkit-animation-duration:4.96s;-webkit-animation-name:orbit;-moz-animation-iteration-count:infinite;-moz-animation-duration:4.96s;-moz-animation-name:orbit;-o-animation-iteration-count:infinite;-o-animation-duration:4.96s;-o-animation-name:orbit;animation-iteration-count:infinite;animation-duration:4.96s;animation-name:orbit;position:absolute}.progress__item[_ngcontent-%COMP%]:nth-child(1){-webkit-animation-delay:1.52s;animation-delay:1.52s}.progress__item[_ngcontent-%COMP%]:nth-child(2){-webkit-animation-delay:.3s;animation-delay:.3s}.progress__item[_ngcontent-%COMP%]:nth-child(3){-webkit-animation-delay:.61s;animation-delay:.61s}.progress__item[_ngcontent-%COMP%]:nth-child(4){-webkit-animation-delay:.91s;animation-delay:.91s}.progress__item[_ngcontent-%COMP%]:nth-child(5){-webkit-animation-delay:1.22s;animation-delay:1.22s}.progress__item--circle[_ngcontent-%COMP%]{top:0;left:0;position:absolute;width:5px;height:5px;border-radius:100%;background:#0d61ab}@-webkit-keyframes orbit{0%{opacity:1;z-index:99;-ms-transform:rotate(180deg);transform:rotate(180deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}7%{opacity:1;-ms-transform:rotate(300deg);transform:rotate(300deg);-webkit-animation-timing-function:linear;animation-timing-function:linear;origin:0}30%{opacity:1;-ms-transform:rotate(410deg);transform:rotate(410deg);-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;origin:7%}39%{opacity:1;-ms-transform:rotate(645deg);transform:rotate(645deg);-webkit-animation-timing-function:linear;animation-timing-function:linear;origin:30%}70%{opacity:1;-ms-transform:rotate(770deg);transform:rotate(770deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;origin:39%}75%{opacity:1;-ms-transform:rotate(900deg);transform:rotate(900deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;origin:70%}100%,76%{opacity:0;-ms-transform:rotate(900deg);transform:rotate(900deg)}}@keyframes orbit{0%{opacity:1;z-index:99;-ms-transform:rotate(180deg);transform:rotate(180deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}7%{opacity:1;-ms-transform:rotate(300deg);transform:rotate(300deg);-webkit-animation-timing-function:linear;animation-timing-function:linear;origin:0}30%{opacity:1;-ms-transform:rotate(410deg);transform:rotate(410deg);-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;origin:7%}39%{opacity:1;-ms-transform:rotate(645deg);transform:rotate(645deg);-webkit-animation-timing-function:linear;animation-timing-function:linear;origin:30%}70%{opacity:1;-ms-transform:rotate(770deg);transform:rotate(770deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;origin:39%}75%{opacity:1;-ms-transform:rotate(900deg);transform:rotate(900deg);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out;origin:70%}100%,76%{opacity:0;-ms-transform:rotate(900deg);transform:rotate(900deg)}}.clientSizeElement[_ngcontent-%COMP%]{width:100%;height:100%;position:inherit}.client-size-holder[_ngcontent-%COMP%]{top:0;right:0;bottom:0;left:0;position:absolute;z-index:1}.client-size-holder[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{top:0;left:0;position:absolute;padding:0;overflow:hidden;z-index:1}.client-size-holder[_ngcontent-%COMP%]   canvas.mask[_ngcontent-%COMP%]{z-index:2;opacity:.2;pointer-events:none;-ms-transform-origin:center center;transform-origin:center center}.client-size-holder[_ngcontent-%COMP%]   canvas.mask.no-mask[_ngcontent-%COMP%]{opacity:0}.client-size-holder[_ngcontent-%COMP%]   canvas.mask.no-mask[_ngcontent-%COMP%]:hover{opacity:.2}.client-size-holder[_ngcontent-%COMP%]   canvas.canvas-cursor[_ngcontent-%COMP%]{opacity:1;pointer-events:none;z-index:2}.mask-wrapper[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:url(transparency.5c2a04ad19318d42001a.png) left top}.view-cursor[_ngcontent-%COMP%]{cursor:wait}.view-cursor[cursor="0"][_ngcontent-%COMP%]{cursor:default}.view-cursor[cursor="1"][_ngcontent-%COMP%]{cursor:url(hand.8b98497d2687f4af10d9.cur),auto}.view-cursor[cursor="2"][_ngcontent-%COMP%]{cursor:pointer}.view-cursor[cursor="3"][_ngcontent-%COMP%]{cursor:url(drag.811b0b42a0e849c7e4a4.cur),auto}.view-cursor[cursor="4"][_ngcontent-%COMP%]{cursor:text}.view-cursor[cursor="5"][_ngcontent-%COMP%]{cursor:crosshair}.view-cursor[cursor="6"][_ngcontent-%COMP%]{cursor:not-allowed}.view-cursor[cursor="7"][_ngcontent-%COMP%]{cursor:move}.view-cursor[cursor="8"][_ngcontent-%COMP%]{cursor:url(rotate.0ae5aa5ef45265e8db99.cur),auto}.view-cursor[cursor="9"][_ngcontent-%COMP%]{cursor:ns-resize}.view-cursor[cursor="10"][_ngcontent-%COMP%]{cursor:nesw-resize}.view-cursor[cursor="11"][_ngcontent-%COMP%]{cursor:ew-resize}.view-cursor[cursor="12"][_ngcontent-%COMP%]{cursor:nwse-resize}.view-cursor[cursor="13"][_ngcontent-%COMP%]{cursor:ns-resize}.view-cursor[cursor="14"][_ngcontent-%COMP%]{cursor:nesw-resize}.view-cursor[cursor="15"][_ngcontent-%COMP%]{cursor:ew-resize}.view-cursor[cursor="16"][_ngcontent-%COMP%]{cursor:nwse-resize}.view-cursor[cursor="17"][_ngcontent-%COMP%]{cursor:url(scale-proportional-n.56e8e03ddbd8d1ef2f3d.cur) 6 6,auto}.view-cursor[cursor="18"][_ngcontent-%COMP%]{cursor:url(scale-proportional-ne.0801593b7a17dd6bee6e.cur) 6 6,auto}.view-cursor[cursor="19"][_ngcontent-%COMP%]{cursor:url(scale-proportional-e.986ddc3b3bab7dc16298.cur) 6 6,auto}.view-cursor[cursor="20"][_ngcontent-%COMP%]{cursor:url(scale-proportional-se.7f370149359c695b0b33.cur) 6 6,auto}.view-cursor[cursor="21"][_ngcontent-%COMP%]{cursor:url(scale-proportional-s.9f9a05dcc0e7174c1ba9.cur) 6 6,auto}.view-cursor[cursor="22"][_ngcontent-%COMP%]{cursor:url(scale-proportional-sw.1bb1ab6670b46828a1fd.cur) 6 6,auto}.view-cursor[cursor="23"][_ngcontent-%COMP%]{cursor:url(scale-proportional-w.661232899127be87d5cb.cur) 6 6,auto}.view-cursor[cursor="24"][_ngcontent-%COMP%]{cursor:url(scale-proportional-nw.e02d204aec18590eee3d.cur) 6 6,auto}.view-cursor[cursor="25"][_ngcontent-%COMP%]{cursor:url(pencil.22dbe769a8cdca4bebdf.cur),auto}.view-cursor[cursor="26"][_ngcontent-%COMP%]{cursor:url(precise.5f84bb62c69fa5a599de.cur),auto}.view-cursor[cursor="27"][_ngcontent-%COMP%]{cursor:url(stamp.a83f8214b9c5c9de8bd6.cur),auto}.view-cursor[cursor="28"][_ngcontent-%COMP%]{cursor:url(text-markup.e613c0cc5a6e060f28db.cur),auto}.view-cursor[cursor="29"][_ngcontent-%COMP%]{cursor:url(Sign.68f3c3b91c174f7b8e72.cur),auto}.view-cursor[cursor="30"][_ngcontent-%COMP%]{cursor:url(Snapshot.de75f6c38a3d7e450674.cur),auto}.view-cursor[cursor="51"][_ngcontent-%COMP%]{cursor:wait}@media all and (-ms-high-contrast:none),(-ms-high-contrast:active){.view-cursor[cursor="9"][_ngcontent-%COMP%]{cursor:n-resize}.view-cursor[cursor="10"][_ngcontent-%COMP%]{cursor:ne-resize}.view-cursor[cursor="11"][_ngcontent-%COMP%]{cursor:e-resize}.view-cursor[cursor="12"][_ngcontent-%COMP%]{cursor:se-resize}.view-cursor[cursor="13"][_ngcontent-%COMP%]{cursor:s-resize}.view-cursor[cursor="14"][_ngcontent-%COMP%]{cursor:sw-resize}.view-cursor[cursor="15"][_ngcontent-%COMP%]{cursor:w-resize}.view-cursor[cursor="16"][_ngcontent-%COMP%]{cursor:nw-resize}.view-cursor[cursor="17"][_ngcontent-%COMP%]{cursor:url(scale-proportional-n.56e8e03ddbd8d1ef2f3d.cur),auto}.view-cursor[cursor="18"][_ngcontent-%COMP%]{cursor:url(scale-proportional-ne.0801593b7a17dd6bee6e.cur),auto}.view-cursor[cursor="19"][_ngcontent-%COMP%]{cursor:url(scale-proportional-e.986ddc3b3bab7dc16298.cur),auto}.view-cursor[cursor="20"][_ngcontent-%COMP%]{cursor:url(scale-proportional-se.7f370149359c695b0b33.cur),auto}.view-cursor[cursor="21"][_ngcontent-%COMP%]{cursor:url(scale-proportional-s.9f9a05dcc0e7174c1ba9.cur),auto}.view-cursor[cursor="22"][_ngcontent-%COMP%]{cursor:url(scale-proportional-sw.1bb1ab6670b46828a1fd.cur),auto}.view-cursor[cursor="23"][_ngcontent-%COMP%]{cursor:url(scale-proportional-w.661232899127be87d5cb.cur),auto}.view-cursor[cursor="24"][_ngcontent-%COMP%]{cursor:url(scale-proportional-nw.e02d204aec18590eee3d.cur),auto}}@supports (-ms-accelerator:true) or (-ms-ime-align:auto){.view-cursor[cursor="9"][_ngcontent-%COMP%]{cursor:n-resize}.view-cursor[cursor="10"][_ngcontent-%COMP%]{cursor:ne-resize}.view-cursor[cursor="11"][_ngcontent-%COMP%]{cursor:e-resize}.view-cursor[cursor="12"][_ngcontent-%COMP%]{cursor:se-resize}.view-cursor[cursor="13"][_ngcontent-%COMP%]{cursor:s-resize}.view-cursor[cursor="14"][_ngcontent-%COMP%]{cursor:sw-resize}.view-cursor[cursor="15"][_ngcontent-%COMP%]{cursor:w-resize}.view-cursor[cursor="16"][_ngcontent-%COMP%]{cursor:nw-resize}.view-cursor[cursor="17"][_ngcontent-%COMP%]{cursor:url(scale-proportional-n.56e8e03ddbd8d1ef2f3d.cur),auto}.view-cursor[cursor="18"][_ngcontent-%COMP%]{cursor:url(scale-proportional-ne.0801593b7a17dd6bee6e.cur),auto}.view-cursor[cursor="19"][_ngcontent-%COMP%]{cursor:url(scale-proportional-e.986ddc3b3bab7dc16298.cur),auto}.view-cursor[cursor="20"][_ngcontent-%COMP%]{cursor:url(scale-proportional-se.7f370149359c695b0b33.cur),auto}.view-cursor[cursor="21"][_ngcontent-%COMP%]{cursor:url(scale-proportional-s.9f9a05dcc0e7174c1ba9.cur),auto}.view-cursor[cursor="22"][_ngcontent-%COMP%]{cursor:url(scale-proportional-sw.1bb1ab6670b46828a1fd.cur),auto}.view-cursor[cursor="23"][_ngcontent-%COMP%]{cursor:url(scale-proportional-w.661232899127be87d5cb.cur),auto}.view-cursor[cursor="24"][_ngcontent-%COMP%]{cursor:url(scale-proportional-nw.e02d204aec18590eee3d.cur),auto}}']],data:{}});function h(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,[[2,0],["mask",1]],null,3,"canvas",[["class","view-cursor mask"],["tabindex","0"]],null,null,null,null,null)),i["ɵprd"](512,null,o.u,o.v,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["ɵdid"](2,278528,null,0,o.i,[o.u],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](3,{"no-mask":0})],function(t,e){var n=t(e,3,0,e.component.isHiddenMask);t(e,2,0,"view-cursor mask",n)},null)}function p(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,[[3,0],["cursor",1]],null,0,"canvas",[["class","view-cursor canvas-cursor"],["tabindex","0"]],null,null,null,null,null))],null,null)}function d(t){return i["ɵvid"](0,[(t()(),i["ɵeld"](0,0,null,null,1,"app-progress",[],null,null,null,a,s)),i["ɵdid"](1,114688,null,0,r,[],null,null)],function(t,e){t(e,1,0)},null)}function f(t){return i["ɵvid"](0,[i["ɵqud"](402653184,1,{canvasRef:0}),i["ɵqud"](671088640,2,{canvasMaskRef:0}),i["ɵqud"](671088640,3,{canvasCursorRef:0}),i["ɵqud"](402653184,4,{clienSizeHolderRef:0}),i["ɵqud"](402653184,5,{scrollElementRef:0}),i["ɵqud"](402653184,6,{clienSizeElementRef:0}),(t()(),i["ɵeld"](6,0,null,null,23,"div",[["class","canvas-wrapper"]],null,null,null,null,null)),(t()(),i["ɵeld"](7,0,[[4,0],["clienSizeHolder",1]],null,20,"div",[["class","client-size-holder"],["is-animated","false"],["name","render-target"]],null,null,null,null,null)),(t()(),i["ɵeld"](8,0,[[6,0],["clienSizeElement",1]],null,1,"div",[["class","clientSizeElement scroll-bar"]],null,null,null,null,null)),(t()(),i["ɵeld"](9,0,[[5,0],["scrollElement",1]],null,0,"div",[["class","scrollElement"]],null,null,null,null,null)),(t()(),i["ɵeld"](10,0,[[1,0],["canvas",1]],null,1,"canvas",[["class","view-cursor"],["droppable",""],["tabindex","0"]],null,[[null,"onDrop"],[null,"mouseenter"],[null,"mouseleave"],[null,"drop"]],function(t,e,n){var o=!0,r=t.component;return"drop"===e&&(o=!1!==i["ɵnov"](t,11).drop(n)&&o),"onDrop"===e&&(o=!1!==r.onItemDrop(n)&&o),"mouseenter"===e&&(o=!1!==r.mouseEnter()&&o),"mouseleave"===e&&(o=!1!==r.mouseLeave()&&o),o},null,null)),i["ɵdid"](11,212992,null,0,c.Droppable,[i.ElementRef,i.Renderer2,u.NgDragDropService,i.NgZone],null,{onDrop:"onDrop"}),(t()(),i["ɵand"](16777216,null,null,1,null,h)),i["ɵdid"](13,16384,null,0,o.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["ɵand"](16777216,null,null,1,null,p)),i["ɵdid"](15,16384,null,0,o.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["ɵeld"](16,0,null,null,11,"div",[["class","progress"]],null,null,null,null,null)),(t()(),i["ɵeld"](17,0,null,null,10,"ul",[["class","progress__content"]],null,null,null,null,null)),(t()(),i["ɵeld"](18,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](19,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](20,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](21,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](22,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](23,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](24,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](25,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵeld"](26,0,null,null,1,"li",[["class","progress__item"]],null,null,null,null,null)),(t()(),i["ɵeld"](27,0,null,null,0,"div",[["class","progress__item--circle"]],null,null,null,null,null)),(t()(),i["ɵand"](16777216,null,null,1,null,d)),i["ɵdid"](29,16384,null,0,o.k,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,11,0),t(e,13,0,n.isShowMask),t(e,15,0,n.isShowCursor),t(e,29,0,n.isProcessing)},null)}}}]);